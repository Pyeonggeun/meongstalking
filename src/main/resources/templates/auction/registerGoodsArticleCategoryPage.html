<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>상품 카테고리 등록</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <script src="https://kit.fontawesome.com/784384f602.js" crossorigin="anonymous"></script>


    <script>

        let selectedCategory = null;



        function reloadCategory(){

            const url = "./getCategory";
            
            fetch(url)
            .then(response => response.json())
            .then(response => {
                
                const categoryBoxList = document.getElementById("categoryBoxList");
                categoryBoxList.innerHTML = "";


                for (let i = 0; i < response.data.length; i += 2){
                    const categoryWrapper = document.querySelector("#template .categoryWrapper").cloneNode(true);

                    const col1 = categoryWrapper.querySelector(".first-col");
                    const categoryBox1 = document.querySelector("#template .category-box").cloneNode(true);
                    categoryBox1.setAttribute("data-value", response.data[i].pk);
                    const title1 = categoryBox1.querySelector(".category-title");
                    const iconBox1 = categoryBox1.querySelector(".check-icon-box");
                    const icon1 = categoryBox1.querySelector(".check-icon");
                    title1.innerText = response.data[i].name;
                    col1.appendChild(categoryBox1);




                    if(i + 1 < response.data.length){
                        const col2 = categoryWrapper.querySelector(".second-col");
                        const categoryBox2 = document.querySelector("#template .category-box").cloneNode(true);
                        categoryBox2.setAttribute("data-value", response.data[i+1].pk);
                        const title2 = categoryBox2.querySelector(".category-title");
                        title2.innerText = response.data[i+1].name;
                        col2.appendChild(categoryBox2);
                    }

                    categoryBoxList.appendChild(categoryWrapper);
                }



            });


        }


        function checkSelect(element) {
            
            element.classList.add("selected");

            const allBoxes = document.querySelectorAll(".category-box");
            allBoxes.forEach(box => {
            if (box !== element) {
                box.classList.remove("selected");
            }
            });

            selectedCategory = element.getAttribute("data-value");
        }

        function registerCategory(){
            
            const url = "./registerCategory?category_pk=" + selectedCategory;
            
            fetch(url)
            .then(response => response.json())
            .then(response => {
                
                window.location.href = "./registerGoodsArticleInfoPage";

            });

        }




        function templete(){
		
            const url = "";
            
            fetch(url)
            .then(response => response.json())
            .then(response => {
                
            });
        }  

        window.addEventListener("DOMContentLoaded", () => {
            
            reloadCategory();
        });  




    </script>




    <style>
        .container-fluid{
            padding-left: 1em;
            padding-right: 1em;
            background-color: #f5f5f5;

        }
        body{
            background-color: #f5f5f5;
        }

        .footer{
            position: fixed;
            bottom: 0;
            padding-left: 0em;
            padding-right: 0em;
        }

        .footer-botton{
            width: 100%; 
            height: 3em; 
            border-width: 0; 
            color: white; 
            background-color: #0090FD; 
            font-size: 1em;
        }

        .navbar-row{
            height: 3em;
            position: relative;
        }

        .arrow-icon{
            font-size: 1.2em;
            color: #111111;
            position: absolute;
            top: 50%;
            left: 1em;
            transform: translate(0, -50%);
        }

        .more-icon{
            font-size: 1.2em;
            color: #111111;
            position: absolute;
            top: 50%;
            right: 1em;
            transform: translate(0, -50%);            
        }

        .navbar-title{
            color: #111111;
            position: absolute;
            font-size: 1em;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);   
        }

        .category-box-row{
            background-color: white;
            padding-top: 0.5em;
            padding-bottom: 1.5em;
            padding-left: 0.5em;
            padding-right: 0.5em;
            border-radius: 1em;
            margin-left: 0;
            margin-right: 0;
        }

        .category-box{
            background-color: black;
            height: 10em;
            width: 8em;
            border-radius: 1em;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }


        .category-box-text{
            color: #DEF358; 
            font-size: 1em; 
            font-weight: 200;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .check-icon-box{
            border-radius: 1em; 
            background-color: white; 
            width: 2em; 
            height: 2em; 
            position: absolute; 
            top: 8%; 
            left: 8%;
        }

        .check-icon{
            font-size: 1.3em; 
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%);
        }

        .selected .check-icon-box{
            border-style: solid;
            border-color: red;
            border-width: 0.1em;
        }

        .selected .check-icon{
            color: red;
        }

        .selected .category-title{
            color: red;
        }

        .category-title{
            position: absolute; 
            top: 52%; 
            left: 8%; 
            color: #DEF358; 
            font-size: 1em; 
            font-weight: 200;
        }
        .category-text1{
            position: absolute; 
            top: 68%; 
            left: 8%; 
            color: white; 
            font-size: 0.8em; 
            font-weight: 400;
        }
        .category-text2{
            position: absolute;
            top: 80%; 
            left: 8%; 
            color: white; 
            font-size: 0.8em; 
            font-weight: 400;
        }


    </style>

</head>







<body>
    <div class="container-fluid">
        <div class="row navbar-row">
            <div class="col">
                <div class="arrow-icon"><i class="bi bi-arrow-left"></i></div>
                <div class="navbar-title fw-bold">카테고리 선택</div>
                <div class="more-icon"><i class="bi bi-three-dots"></i></div>
            </div>
        </div>

        <div class="row category-box-row">
            <div id="categoryBoxList" class="col">

            </div>
        </div>

    </div>

    <div class="container-fluid footer">
        <div class="row">
            <div class="col px-0">
                <button onclick="registerCategory()" class="fw-bold footer-botton">다음으로</button>
            </div>
        </div>
    </div>


    <!--템플릿-->
    <div id="template" class="d-none">

        <!--카테고리-->
        <div class="row categoryWrapper" style="padding-top: 1em;">
            <div class="col first-col" style="position: relative; height: 10em;">

            </div>
            <div class="col second-col" style="position: relative; height: 10em;">
            
            </div>
        </div>

        <div class="category-box" onclick="checkSelect(this)">
            <div class="check-icon-box">
                <div class="check-icon"><i class="bi bi-check-lg"></i></div>
            </div>
            <div class="category-title">Clothes</div>
            <div class="category-text1">취향별 픽!</div>
            <div class="category-text2">입기 좋은 츄리닝</div>
        </div>
        
    </div>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>

</html>