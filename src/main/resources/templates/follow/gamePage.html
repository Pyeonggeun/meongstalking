<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maxium-scale=1.0, user-scalable=no">
        
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
        <script src="https://kit.fontawesome.com/fdd6196f61.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=a277eb582a644847f86de6196a42745f"></script>

        <script src="/public/js/commons/lockLikeMobile.js"></script>

        <script src="/public/js/commons/naviBar.js"></script>
        <link rel="stylesheet" th:href="@{/public/css/commons/naviBar.css}">

        <link rel="stylesheet" th:href="@{/public/css/mFollowShop/item.css}" />
        <link rel="stylesheet" th:href="@{/public/css/mFollowShop/achievement.css}" />
        <script src="/public/js/mFollowShop/item.js"></script>
        <script src="/public/js/mFollowShop/achievement.js"></script>

        <script>

            let user_pk;

            let map;

            let myLocation;

            let currentLat;
            let currentLng;

            const staticLat = 37.4996259;
            const staticLng = 127.0304801;

            let myTrackMarkers = [];
            let tracingTrackMarkers = [];
            let tracingTrackInfoMarkers = [];
            let scanningTrackMarkers = [];

            const trackMarkerEffectiveDistance = 100;
            const trackMarkerDateValidity = 7;
            const trackMarkerUpTo = 3;

            let scanMarkerEffectiveDistance = 250;
            let scanMarkerUpTo = 5;
            
            let collectMarkerUpTo = 3;

            let traceMarkerUpTo = 3;

            let plusTrackMarkerProbability = 0;

            let scanUpItemCnt;
            let rainbowHandItemCnt;
            let megaPhoneItemCnt;
            let cupidoItemCnt;

            let mapHeight;

            function getMyUserPk() {

                const url = "./getMyUserPk";

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    user_pk = response.data.user_pk;
                    console.log(user_pk);

                    if(response.data.gender == "M") {
                        console.log(response.data.gender);
                        document.getElementById("myPageImage").setAttribute("src", "/public/image/follow/male.png");
                    }

                    getMyTrackMarkers();
                    getTracingTrackMarkers();
                    getPermanentItemLv();
                    getItemCount();

                });

            }

            function createMap() {

                const mapContainer = document.getElementById("map");
                mapOption = {
                    center: new kakao.maps.LatLng(staticLat, staticLng),
                    level: 4
                };

                map = new kakao.maps.Map(mapContainer, mapOption);

            }

            function getMyLocation(value) {
                if(navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition((position) => {

                        currentLat = position.coords.latitude;
                        currentLng = position.coords.longitude;

                        position = new kakao.maps.LatLng(currentLat, currentLng);

                        displayMyLocation(position, value);
                    }, (error) => {

                        if(error.code === 3) {
                            document.getElementById("alertContent").innerText = "위치정보 확인이 지연되고 있습니다";
                        }else if(error.code === 1) {
                            document.getElementById("alertContent").innerText = "위치정보 허용이 필요합니다";
                        }else {
                            document.getElementById("alertContent").innerText = "예기치 못한 오류가 발생했습니다";
                        }

                        document.getElementById("alertCheckButton").onclick = () => {
                            hideAlertModal();
                            location.href = "/commons/mainPage";
                        };
                        showAlertModal();

                        position = new kakao.maps.LatLng(staticLat, staticLng);
                        displayMyLocation(position, value);

                        });

                }else {
                    position = new kakao.maps.LatLng(staticLat, staticLng);
                    displayMyLocation(position, value);

                    document.getElementById("alertContent").innerText = "위치정보 사용이 불가합니다";
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                        location.href = "/commons/mainPage";
                    };
                    showAlertModal();
                }
            }

            function displayMyLocation(position, value) {

                if(myLocation) {
                    myLocation.setPosition(position);
                    map.panTo(position);

                    if(value == 1) {
                        isFirstTimeLeavingTrackMark();
                    }

                    if(value == 2) {
                        scanningMarker(position);
                        getScanningTrackMarkers();
                    }

                    if(value == 3) {
                        getLikeList();
                        showLikeListModal();
                    }

                    return;
                }

                const content = document.createElement("div");
                content.classList.add("myLocationMarkerBox");

                const div1 = document.createElement("div");
                div1.classList.add("myLocationMarker", "first");
                const div2 = document.createElement("div");
                div2.classList.add("myLocationMarker", "second");
                const div3 = document.createElement("div");
                div3.classList.add("myLocationMarker", "third");

                content.appendChild(div1);
                content.appendChild(div2);
                content.appendChild(div3);
                
                myLocation = new kakao.maps.CustomOverlay({
                    position: position,
                    content: content
                });

                myLocation.setMap(map);
                map.panTo(position);

            }

            function displayMyTrackMarker(lat, lng) {

                const position = new kakao.maps.LatLng(lat, lng);

                const content = document.createElement("div");
                content.classList.add("myTrackMarker");

                marker = new kakao.maps.CustomOverlay({
                    position: position,
                    content: content,
                    yAnchor: 0.95,
                    zIndex: 1
                });

                marker.setMap(map);
                myTrackMarkers.push(marker);

            }

            function removeMyTrackMarkers() {
                for(var i = 0 ; i < myTrackMarkers.length ; i++) {
                    myTrackMarkers[i].setMap(null);
                }

                myTrackMarkers = [];
            }

            function displayTracingTrackAndInfoMarker(e) {

                const position = new kakao.maps.LatLng(e.latitude, e.longitude);

                var circle = new kakao.maps.Circle({
                    center : position,  // 원의 중심좌표 입니다 
                    radius: 1000, // 미터 단위의 원의 반지름입니다 
                    strokeWeight: 5, // 선의 두께입니다 
                    // strokeColor: '#75B8FA', // 선의 색깔입니다
                    strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
                    strokeStyle: 'dashed', // 선의 스타일 입니다
                    // fillColor: '#CFE7FF', // 채우기 색깔입니다
                    fillOpacity: 0  // 채우기 불투명도 입니다   
                }); 

                // 지도에 원을 표시합니다 
                circle.setMap(map);

                const content = document.createElement("div");
                content.classList.add("traceMarkerBox", "d-flex", "justify-content-center");

                const div1 = document.createElement("div");
                div1.classList.add("traceMarkerImage");
                div1.style.background = "url('/public/image/follow/pointer.png') no-repeat center";
                div1.style.backgroundSize = "cover";

                const div2 = document.createElement("div");
                div2.style.position = "absolute";
                div2.style.width = "7rem";
                div2.style.height = "0.9rem"
                div2.style.top = "0.18rem";
                div2.style.fontSize = "0.65rem";
                div2.classList.add("text-white", "d-flex", "align-items-center", "justify-content-center");
                div2.innerText = e.time_limit + "까지";

                const div3 = document.createElement("div");
                div3.style.position = "absolute";
                div3.style.width = "3rem";
                div3.style.height = "3rem";
                div3.style.borderRadius = "8%";
                div3.setAttribute("class", "d-flex align-items-center justify-content-center");

                const div4 = document.createElement("div");
                div4.style.width = "2.7rem";
                div4.style.height = "2.7rem";
                div4.style.borderRadius = "3%";
                div4.style.color = "#211e1e";
                div4.style.fontSize = "0.6rem";
                div4.setAttribute("class", "d-flex align-items-center justify-content-center fw-bold");
                div4.innerText = "No. " + e.user_more_pk;

                if(e.star_rating == 'oneStar') {
                    div3.classList.add("OneStarOuter");
                    div4.classList.add("OneStarInner");
                }else if(e.star_rating == 'twoStar') {
                    div3.classList.add("TwoStarOuter");
                    div4.classList.add("TwoStarInner");
                }else if(e.star_rating == 'threeStar') {
                    div3.classList.add("ThreeStarOuter");
                    div4.classList.add("ThreeStarInner");
                }else if(e.star_rating == 'fourStar') {
                    div3.classList.add("FourStarOuter");
                    div4.classList.add("FourStarInner");
                }else if(e.star_rating == 'fiveStar') {
                    div3.classList.add("FiveStarOuter");
                    div4.classList.add("FiveStarInner");
                }else if(e.star_rating == 'S') {
                    div3.classList.add("SOuter");
                    div4.classList.add("SInner");
                }else if(e.star_rating == 'SR') {
                    div3.classList.add("SROuter");
                    div4.classList.add("SRInner");
                }else {
                    div3.classList.add("SSROuter");
                    div4.classList.add("SSRInner");
                }
                
                div1.appendChild(div2);
                div3.appendChild(div4);
                content.appendChild(div3);
                content.appendChild(div1);

                var customOverlay = new kakao.maps.CustomOverlay({
                    position: position,
                    content: content,
                    yAnchor: 0.95,
                    zIndex: 1
                });

                customOverlay.setMap(map);

                tracingTrackMarkers.push(circle);
                tracingTrackInfoMarkers.push(customOverlay);

            }

            function removeTracingTrackAndInfoMarkers() {
                for(var i = 0 ; i < tracingTrackMarkers.length ; i++) {
                    tracingTrackMarkers[i].setMap(null);
                    tracingTrackInfoMarkers[i].setMap(null);
                }

                tracingTrackMarkers = [];
                tracingTrackInfoMarkers = [];
            }

            function displayScanningTrackMarkers(e) {

                const position = new kakao.maps.LatLng(e.latitude, e.longitude);

                const content = document.createElement("div");
                content.classList.add("scanMarkerBox", "markDrop");

                const div1 = document.createElement("div");
                div1.classList.add("scanMarkerImage");

                if(e.star_rating == 'oneStar') {
                    div1.style.background = "url('/public/image/follow/onestar.png') no-repeat center";
                }else if(e.star_rating == 'twoStar') {
                    div1.style.background = "url('/public/image/follow/twostar.png') no-repeat center";
                }else if(e.star_rating == 'threeStar') {
                    div1.style.background = "url('/public/image/follow/threestar.png') no-repeat center";
                }else if(e.star_rating == 'fourStar') {
                    div1.style.background = "url('/public/image/follow/fourstar.png') no-repeat center";
                }else if(e.star_rating == 'fiveStar') {
                    div1.style.background = "url('/public/image/follow/fivestar.png') no-repeat center";
                }else if(e.star_rating == 'S') {
                    div1.style.background = "url('/public/image/follow/sixstar.png') no-repeat center";
                }else if(e.star_rating == 'SR') {
                    div1.style.background = "url('/public/image/follow/sevenstar.png') no-repeat center";
                }else {
                    div1.style.background = "url('/public/image/follow/eightstar.png') no-repeat center";
                }

                div1.style.backgroundSize = "cover";

                const div2 = document.createElement("div");
                div2.classList.add("scanMarkerContent");
                
                div2.style.width = "1.2rem";
                div2.style.height = "1.2rem";
                div2.style.top = "0.8rem";
                div2.style.left = "1.4rem";

                div2.style.background = "url('/public/image/follow/questionBlack.png') no-repeat center";
                div2.style.backgroundSize = "cover";

                if(e.open_rating == 10) {
                    div2.style.width = "1.6rem";
                    div2.style.height = "1.6rem";
                    div2.style.top = "0.7rem";
                    div2.style.left = "1.2rem";

                    div2.style.background = "url('" + e.profile_photo + " ') no-repeat center";
                }

                content.appendChild(div1);
                content.appendChild(div2);

                // 커스텀 오버레이를 생성합니다
                var customOverlay = new kakao.maps.CustomOverlay({
                    position: position,
                    content: content,
                    yAnchor: 0.9,
                    zIndex: 1
                });

                // 커스텀 오버레이를 지도에 표시합니다
                customOverlay.setMap(map);

                content.onclick = () => {
                    console.log("click");
                    fillPreviewTrackMarkerModal(e);

                };

                scanningTrackMarkers.push(customOverlay);

            }

            function removeScanningTrackMarkers() {
                for(var i = 0 ; i < scanningTrackMarkers.length ; i++) {
                    scanningTrackMarkers[i].setMap(null);
                }

                scanningTrackMarkers = [];
            }

            function scanningMarker(position) {

                const content = '<div id="markScanCircle"></div>';

                const customOverlay = new kakao.maps.CustomOverlay({
                    position: position,
                    content: content
                });

                customOverlay.setMap(map);

                setTimeout(() => {
                    customOverlay.setMap(null);
                    blockOff();
                }, 3000);
                
            }

            function tracingMarker(e) {
                console.log(e)
                console.log(e.latitude)
                console.log(e.longitude)
                const currentPosition = new kakao.maps.LatLng(currentLat, currentLng);
                const position = new kakao.maps.LatLng(e.latitude, e.longitude);

                const content = '<div id="markScanCircle"></div>';

                map.panTo(position);

                const customOverlay = new kakao.maps.CustomOverlay({
                    position: position,
                    content: content
                });

                customOverlay.setMap(map);

                setTimeout(() => {
                    customOverlay.setMap(null);
                    map.panTo(currentPosition);
                    walkingPawMarker(currentPosition, position);
                }, 3000);
                
            }

            function walkingPawMarker(currentPosition, position) {

                const proj = map.getProjection();
                var center = proj.containerPointFromCoords(currentPosition);
                var pos = proj.containerPointFromCoords(position);

                var angle = getAngle(center, pos);

                var content = document.createElement('div');
                content.setAttribute("class", "walkingPawCircle");
                content.style.transform = "rotate(" + angle + "deg)";

                var div1 = document.createElement('div');
                div1.setAttribute("class", "material-symbols-outlined walkingPawIcon first");
                div1.innerText = "pets";
                var div2 = document.createElement('div');
                div2.setAttribute("class", "material-symbols-outlined walkingPawIcon second");
                div2.innerText = "pets";
                var div3 = document.createElement('div');
                div3.setAttribute("class", "material-symbols-outlined walkingPawIcon third");
                div3.innerText = "pets";
                var div4 = document.createElement('div');
                div4.setAttribute("class", "material-symbols-outlined walkingPawIcon fourth");
                div4.innerText = "pets";
                var div5 = document.createElement('div');
                div5.setAttribute("class", "material-symbols-outlined walkingPawIcon fifth");
                div5.innerText = "pets";
                var div6 = document.createElement('div');
                div6.setAttribute("class", "material-symbols-outlined walkingPawIcon sixth");
                div6.innerText = "pets";
                var div7 = document.createElement('div');
                div7.setAttribute("class", "material-symbols-outlined walkingPawIcon seventh");
                div7.innerText = "pets";

                content.appendChild(div1);
                content.appendChild(div2);
                content.appendChild(div3);
                content.appendChild(div4);
                content.appendChild(div5);
                content.appendChild(div6);
                content.appendChild(div7);

                var customOverlay = new kakao.maps.CustomOverlay({
                    position: currentPosition,
                    content: content
                });

                customOverlay.setMap(map);

                setTimeout(() => {
                    customOverlay.setMap(null);
                    getTracingTrackMarkers();
                }, 3000);

            }

            function getAngle(center, target) {
                var dx = target.x - center.x;
                var dy = center.y - target.y;
                var deg = Math.atan2( dy , dx ) * 180 / Math.PI; 

                return ((-deg + 360) % 360 | 0) + 90;
            }

            function getMyTrackMarkers() {

                removeMyTrackMarkers();

                const url = "./getMyTrackMarkers?user_pk=" + user_pk + "&trackMarkerDateValidity=" + trackMarkerDateValidity;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    if(response.data.length == 0) {
                        console.log("getMyTrackMarkers");
                        return;
                    }

                    for(let e of response.data) {
                        console.log(e);
                        displayMyTrackMarker(e.latitude, e.longitude);

                    }

                });

            }

            function getTracingTrackMarkers() {

                removeTracingTrackAndInfoMarkers();

                const url = "./getTracingTrackMarkers?user_pk=" + user_pk + "&trackMarkerDateValidity=" + trackMarkerDateValidity;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                        if(response.data.length == 0) {
                            console.log("getTracingTrackMarkers");
                            return;
                        }

                        for(let e of response.data) {
                            console.log(e);
                            displayTracingTrackAndInfoMarker(e);

                        }

                });

            }

            function getPermanentItemLv() {

                const url = "./getPermanentItemLv?user_pk=" + user_pk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    for(let e of response.data) {

                        if(e.item_pk == 1) {
                            scanMarkerUpTo += e.item_cnt;
                        }else if(e.item_pk == 2) {
                            scanMarkerEffectiveDistance += e.item_cnt * 5;
                        }else if(e.item_pk == 3) {
                            traceMarkerUpTo += e.item_cnt;
                        }else if(e.item_pk == 4) {
                            plusTrackMarkerProbability += e.item_cnt;
                        }

                    }

                });

            }

            function getItemCount() {

                const url = "./getItemCount?user_pk=" + user_pk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    for(let e of response.data) {

                        if(e.item_pk == 5) {
                        rainbowHandItemCnt = e.item_cnt;
                        }else if(e.item_pk == 6) {
                            scanUpItemCnt = e.item_cnt;
                        }else if(e.item_pk == 7) {
                            megaPhoneItemCnt = e.item_cnt;
                        }else if(e.item_pk == 8) {
                            cupidoItemCnt = e.item_cnt;
                        }

                    }

                });

            }

            function saveItemInfo(itemPk) {

                const url = "./insertUserItemInfo?user_pk=" + user_pk + "&item_pk=" + itemPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    getItemCount();

                });

            }
            
            function marking() {

                hideAction();
                getMyLocation(1);

            }

            function isFirstTimeLeavingTrackMark() {

                const url = "./isFirstTimeLeavingTrackMark?user_pk=" + user_pk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    if(response.data) {
                        console.log("isFirstTimeLeavingTrackMark : " + response.data);
                        document.getElementById("alertWithCancelContent").innerText = "처음 체취를 남기실 경우 추가 정보를 입력해주셔야 합니다";
                        document.getElementById("alertWithCancelCheckButton").onclick = () => {
                            hideAlertWithCancelModal();
                            showWriteMoreInfoModal();
                        };
                        showAlertWithCancelModal();

                        return;
                    }

                    console.log("isFirstTimeLeavingTrackMark : " + response.data);

                    getCurrentMyTrackMarkerCount();

                });

            }
            // qwer
            function saveMoreInfo() {
                // pqpq 받음
                height = document.getElementById("writeMoreInfoHeight").value;
                weight = document.getElementById("writeMoreInfoWeight").value;
                bloodType = document.getElementById("writeMoreInfoBloodType").value;
                mbtiType = document.getElementById("writeMoreInfoMbtiType").value;
                hobby = document.getElementById("writeMoreInfoHobby").value;
                drinking = document.querySelector("input[name='isDrinking']:checked").value;
                smoking = document.querySelector("input[name='isSmoking']:checked").value;
                preference = document.getElementById("writeMoreInfoPreference").value;

                if(height == "" || weight == "" || bloodType == "0" || mbtiType == "0" || hobby == "" || preference == "0") {
                    document.getElementById("writeBlank").innerText = "※ 빈칸을 모두 채워주세요";
                    return;
                }

                const url = "./insertMoreInfo?user_pk=" + user_pk + "&height=" + height + "&weight=" + weight + "&blood_type=" + bloodType + "&mbti_type=" + mbtiType +
                    "&hobby=" + hobby + "&drinking=" + drinking + "&smoking=" + smoking + "&preference=" + preference;

                fetch(url)
                .then(response => response.json())
                .then(response => {
                    
                    hideWriteMoreInfoModal();

                    document.getElementById("alertContent").innerText = "추가정보 입력이 완료되었습니다";
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                        showWriteTrackMarkModal();
                    };
                    
                    showAlertModal();

                });

            }

            function getCurrentMyTrackMarkerCount() {

                const url = "./getCurrentMyTrackMarkerCount?user_pk=" + user_pk;

                fetch(url)
                .then(response => response.json())
                .then(response => {
                    console.log("getCurrentMyTrackMarkerCount : " + response.data);
                    if(response.data >= trackMarkerUpTo) {

                        document.getElementById("alertContent").innerText = "횟수를 모두 사용하셨습니다";
                        document.getElementById("alertCheckButton").onclick = () => {
                            hideAlertModal();
                        };
                        showAlertModal();

                        return;

                    }

                    isEnoughDistanceFromMyTrackMarker();

                });

            }

            function isEnoughDistanceFromMyTrackMarker() {

                const url = "./isEnoughDistanceFromMyTrackMarker?user_pk=" + user_pk + "&latitude=" + currentLat + "&longitude=" + currentLng +
                    "&trackMarkerEffectiveDistance=" + trackMarkerEffectiveDistance + "&trackMarkerDateValidity=" + trackMarkerDateValidity;

                fetch(url)
                .then(response => response.json())
                .then(response => {
                    console.log("isEnoughDistanceFromMyTrackMarker : " + response.data);
                    if(response.data) {

                        showWriteTrackMarkModal();

                        return;

                    }

                    document.getElementById("alertContent").innerText = "근처에 분사한 체취가 있습니다";
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                    };
                    showAlertModal();

                });

            }
            // qwer
            function saveWriteTrackMarkInfo() {
                // pqpq 받음
                const inputImage = document.getElementById("writeTrackMarkImage");
                const content = document.getElementById("writeTrackMarkContent").value;

                if(inputImage.files.length == 0 || content == "") {

                    document.getElementById("alertContent").innerText = "사진이 없습니다";
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                    };
                    showAlertModal();

                    return;
                }

                const formData = new FormData();
                formData.append("user_pk", user_pk);
                formData.append("imageFile", inputImage.files[0]);
                formData.append("content", content);
                formData.append("latitude", currentLat);
                formData.append("longitude", currentLng);

                const url = "./insertWriteTrackMarkInfo";
                const option = {
                    method: "post",
                    "Content-Type": "multipart/form-data",
                    body: formData
                };

                fetch(url, option)
                .then(response => {
                    console.log("saveWriteTrackMarkInfo");
                    hideWriteTrackMarkModal();
                    getMyTrackMarkers();

                });

            }

            function scanning() {

                blockOn();

                hideAction();
                getMyLocation(2);
                removeScanningTrackMarkers();
                
            }

            function getScanningTrackMarkers() {

                const url = "./getScanningTrackMarkers?user_pk=" + user_pk + "&latitude=" + currentLat + "&longitude=" + currentLng +
                    "&trackMarkerDateValidity=" + trackMarkerDateValidity + "&scanMarkerEffectiveDistance=" + scanMarkerEffectiveDistance +
                    "&scanMarkerUpTo=" + scanMarkerUpTo;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    if(response.data.length == 0) {
                        console.log("getScanningTrackMarkers");
                        document.getElementById("alertContent").innerText = "근처에 분사된 체취가 없습니다";
                        document.getElementById("alertCheckButton").onclick = () => {
                            hideAlertModal();
                        };
                        showAlertModal();

                        return;

                    }

                    let delay = 0;
                    for(let e of response.data) {
                        console.log(e);
                        setTimeout(() => {
                            displayScanningTrackMarkers(e);
                        }, delay);

                        delay += 250;

                    }

                });

            }

            function fillPreviewTrackMarkerModal(e) {

                resetPreviewTrackMarkerModal();

                switch(e.open_rating) {

                    case "10" :
                        document.getElementById("previewTrackMarkerName").innerText = e.nick_name;
                    case "9" :
                        document.getElementById("previewTrackMarkerImage").style.background = 
                            "url(" + e.profile_photo + ") no-repeat center";
                            document.getElementById("previewTrackMarkerImage").style.backgroundSize = "cover";
                    case "8" : 
                        if(e.preference == "L") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "이성애";
                        }else if(e.preference == "B") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "게이";
                        }else if(e.preference == "G") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "레즈비언";
                        }else if(e.preference == "V") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "바이섹슈얼";
                        }else if(e.preference == "A") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "에이섹슈얼";
                        }else if(e.preference == "D") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "데미섹슈얼";
                        }else if(e.preference == "P") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "팬섹슈얼";
                        }else if(e.preference == "Q") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "퀘스처닝";
                        }
                    case "7", "6" : 
                        document.getElementById("previewTrackMarkerMbtiType").innerText = e.blood_type;
                        document.getElementById("previewTrackMarkerHobby").innerText = e.hobby;
                    case "5" :
                        document.getElementById("previewTrackMarkerSmoking").innerText = e.smoking;
                        document.getElementById("previewTrackMarkerDrinking").innerText = e.drinking;
                    case "4", "3" : 
                        document.getElementById("previewTrackMarkerHeight").innerText = e.height;
                        document.getElementById("previewTrackMarkerWeight").innerText = e.weight;
                        document.getElementById("previewTrackMarkerBloodType").innerText = e.blood_type;
                    case "2": 
                        if(e.gender == 'W') {
                            document.getElementById("previewTrackMarkerGender").innerText = "👱🏻‍♀️";
                        }else {
                            document.getElementById("previewTrackMarkerGender").innerText = "👱🏻‍♂️";
                        }
                    case "1":
                        document.getElementById("previewTrackMarkerPk").innerText = e.user_more_pk;

                        if(e.mstar_temp < 100) {
                            document.getElementById("previewTrackMarkerTemp").style.width = e.mstar_temp;
                            document.getElementById("previewTrackMarkerTempContent").innerText = e.mstar_temp;
                        }else {
                            document.getElementById("previewTrackMarkerTemp").style.width = 100;
                            document.getElementById("previewTrackMarkerTempContent").innerText = 100;
                        }

                    }

                    if(e.open_rating == 10) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + e.cnt + " / ∞ )";
                    }else if(e.open_rating == 9) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (18 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 8) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (16 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 7) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (14 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 6) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (12 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 5) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (10 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 4) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (8 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 3) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (6 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 2) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (4 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 1) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + e.cnt + " / 2 )";
                    }

                    document.getElementById("previewTrackMarkerOuter").setAttribute("class", "d-flex align-items-center justify-content-center border-0");
                    document.getElementById("previewTrackMarkercoverdImage").setAttribute("class", "col-6 rounded-pill mx-3 px-0");
                    if(e.star_rating == "SSR") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("SSROuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("SSROuter");
                    }else if(e.star_rating == "SR") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("SROuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("SROuter");
                    }else if(e.star_rating == "S") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("SOuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("SOuter");
                    }else if(e.star_rating == "fiveStar") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("FiveStarOuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("FiveStarOuter");
                    }else if(e.star_rating == "fourStar") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("FourStarOuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("FourStarOuter");
                    }else if(e.star_rating == "threeStar") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("ThreeStarOuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("ThreeStarOuter");
                    }else if(e.star_rating == "twoStar") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("TwoStarOuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("TwoStarOuter");
                    }else if(e.star_rating == "oneStar") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("OneStarOuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("OneStarOuter");
                    }


                document.getElementById("collectTrackMarkerButton").onclick = () => {

                    getCurrentCollectTrackMarkerCount(e);

                };

                showPreviewTrackMarkerModal();
                
            }

            function getCurrentCollectTrackMarkerCount(e) {

                const url = "./getCurrentCollectTrackMarkerCount?user_pk=" + user_pk;

                fetch(url)
                .then(response => response.json())
                .then(response => {
                    console.log("getCurrentCollectTrackMarkerCount : " + response.data);
                    if(response.data >= collectMarkerUpTo) {
                        //ghgh

                        document.getElementById("alertWithCancelContent").innerText = `횟수를 모두 사용하셨습니다\n아이템을 사용하시겠습니까?`;
                        document.getElementById("alertWithCancelCheckButton").onclick = () => {
                            hideAlertWithCancelModal();

                            const itemBox = document.getElementById("itemBox");
                            itemBox.innerHTML = "";

                            const itemScanUpWrapper = document.querySelector("#template .itemScanUpWrapper").cloneNode(true);
                            itemScanUpWrapper.querySelector(".itemCount").innerText = scanUpItemCnt;
                            itemScanUpWrapper.onclick = () => {

                                if(scanUpItemCnt <= 0) {

                                    document.getElementById("alertContent").innerText = "사용할 수 있는 아이템이 없습니다";
                                    document.getElementById("alertCheckButton").onclick = () => {
                                        hideAlertModal();
                                    };
                                    showAlertModal();

                                    return;

                                }

                                hideAlertItemModal();
                                saveItemInfo(6);
                                collectTrackMarkerInfo(e);
                            
                            };

                            itemBox.appendChild(itemScanUpWrapper);
                            showAlertItemModal();

                        };
                        showAlertWithCancelModal();

                        return;

                    }

                    collectTrackMarkerInfo(e);

                });

            }
            // qwer
            function collectTrackMarkerInfo(e) {

                removeScanningTrackMarkers();
                getTracingTrackMarkers();
                fillTrackMarkerModal(e);
                saveCollectionInfo(e.log_pk);

                // mnbv
                const random = Math.floor((Math.random() * 99) + 1);

                if(plusTrackMarkerProbability >= random) {

                    getPlusTrackMarker(e.user_pk);
                }

            }

            function getPlusTrackMarker(userWriterPk) {

                const url = "./getPlusTrackMarker?user_pk=" + user_pk + "&user_writer_pk=" + userWriterPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    document.getElementById("alertContent").innerText = `축하드립니다🎉\nNo.` + response.data.log_pk + ` 체취가\n추가로 수집되었습니다!`;
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                    };
                    showAlertModal();

                    saveCollectionInfo(response.data.log_pk);

                });

            }

            function fillTrackMarkerModal(e) {

                resetTrackMarkerModal();
                console.log(e.star_rating)
                document.getElementById("trackMarkerOuter").setAttribute("class", "d-flex align-items-center justify-content-center border-0");
                if(e.star_rating == "SSR") {
                    document.getElementById("trackMarkerOuter").classList.add("SSROuter");
                }else if(e.star_rating == "SR") {
                    document.getElementById("trackMarkerOuter").classList.add("SROuter");
                }else if(e.star_rating == "S") {
                    document.getElementById("trackMarkerOuter").classList.add("SOuter");
                }else if(e.star_rating == "fiveStar") {
                    document.getElementById("trackMarkerOuter").classList.add("FiveStarOuter");
                }else if(e.star_rating == "fourStar") {
                    document.getElementById("trackMarkerOuter").classList.add("FourStarOuter");
                }else if(e.star_rating == "threeStar") {
                    document.getElementById("trackMarkerOuter").classList.add("ThreeStarOuter");
                }else if(e.star_rating == "twoStar") {
                    document.getElementById("trackMarkerOuter").classList.add("TwoStarOuter");
                }else if(e.star_rating == "oneStar") {
                    document.getElementById("trackMarkerOuter").classList.add("OneStarOuter");
                }

                if(e.open_rating == 9) {
                    document.getElementById("trackMarkerInner").style.background = 
                        "url(" + e.profile_photo + ") no-repeat center";
                    document.getElementById("trackMarkerInner").style.backgroundSize = "cover";
                }

                document.getElementById("trackMarkerPk").innerText = "No. " + e.user_more_pk;

                if(e.is_like == "Y") {
                    document.getElementById("trackMarkerHeartIcon").style.fontVariationSettings = "'FILL' 1";
                }else {
                    document.getElementById("trackMarkerHeartIcon").style.fontVariationSettings = "'FILL' 0";
                }
                
                document.getElementById("trackMarkerHeartIcon").onclick = () => {

                    if(e.is_trace == "N") {
                        toggleLike(e.user_pk, document.getElementById("trackMarkerHeartIcon"));
                        return;
                    }

                    document.getElementById("alertContent").innerText = "추행하고 있습니다";
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                    };
                    showAlertModal();

                };

                document.getElementById("trackMarkerImage").style.background = "url(/uploadFiles/" + e.image_link + ") no-repeat center";
                document.getElementById("trackMarkerImage").style.backgroundSize = "cover";

                document.getElementById("trackMarkerContent").innerText = e.content;

                document.getElementById("trackMarkerCommentButton").onclick = () => {

                    saveTrackMarkerComment(e.log_pk);

                };

                showTrackMarkerModal();

            }

            function saveCollectionInfo(logPk) {

                const url = "./insertCollectionInfo?user_pk=" + user_pk + "&log_pk=" + logPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    hideLikeListModal();
                    getTracingTrackMarkers();
                    hidePreviewTrackMarkerModal();

                });

            }

            function saveTrackMarkerComment(logPk) {

                const content = document.getElementById("trackMarkerCommentContent").value;

                const url = "./insertComment?user_pk=" + user_pk + "&log_pk=" + logPk + "&content=" + content;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    document.getElementById("trackMarkerCommentHidden").hidden = true;
                    document.getElementById("trackMarkerPreviewCommentContent").innerText = content;

                });

            }

            function tracing() {
                
                hideAction();
                getMyLocation(3);

            }

            function getLikeList() {

                const url = "./getLikeList?user_pk=" + user_pk + "&trackMarkerDateValidity=" + trackMarkerDateValidity;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    const likeListBox = document.getElementById("likeListBox");
                    likeListBox.innerHTML = "";

                    if(response.data.length == 0) {
                        console.log("getLikeList");
                        const noLikeListWrapper = document.querySelector("#template .noLikeListWrapper").cloneNode(true);
                        likeListBox.appendChild(noLikeListWrapper);

                        showLikeListModal();
                        return;

                    }
                    
                    let switchButton = true;

                    for(let e of response.data) {
                        console.log(e);
                        const likeListWrapper = document.querySelector("#template .likeListWrapper").cloneNode(true);
                        
                        if(switchButton) {
                            likeListWrapper.classList.add("active");
                        }

                        likeListWrapper.querySelector(".likeListButton").onclick = () => {
                            console.log(e.user_pk + ": " + e.is_trace);
                            if(e.is_trace == "Y") {
                                // ghgh

                                document.getElementById("alertWithCancelContent").innerText = `이미 추행하고 있습니다\n아이템을 사용하시겠습니까?`;
                                document.getElementById("alertWithCancelCheckButton").onclick = () => {

                                    hideAlertWithCancelModal();

                                    const itemBox = document.getElementById("itemBox");
                                    itemBox.innerHTML = "";

                                    const itemRainbowHandWrapper = document.querySelector("#template .itemRainbowHandWrapper").cloneNode(true);
                                    itemRainbowHandWrapper.querySelector(".itemCount").innerText = rainbowHandItemCnt;
                                    itemRainbowHandWrapper.onclick = () => {

                                        if(rainbowHandItemCnt <= 0) {

                                            document.getElementById("alertContent").innerText = "사용할 수 있는 아이템이 없습니다";
                                            document.getElementById("alertCheckButton").onclick = () => {
                                                hideAlertModal();
                                            };
                                            showAlertModal();

                                            return;

                                        }

                                        hideAlertItemModal();
                                        saveItemInfo(5);
                                        getTracingTrackMarkerLogPk(e.user_pk);

                                        document.getElementById("alertContent").innerText = "수집이 완료되었습니다";
                                        document.getElementById("alertCheckButton").onclick = () => {
                                            hideAlertModal();
                                        };
                                        showAlertModal();
                                    
                                    };

                                    const itemMegaPhoneWrapper = document.querySelector("#template .itemMegaPhoneWrapper").cloneNode(true);
                                    itemMegaPhoneWrapper.querySelector(".itemCount").innerText = megaPhoneItemCnt;
                                    itemMegaPhoneWrapper.onclick = () => {
                                        
                                        if(megaPhoneItemCnt <= 0) {

                                            document.getElementById("alertContent").innerText = "사용할 수 있는 아이템이 없습니다";
                                            document.getElementById("alertCheckButton").onclick = () => {
                                                hideAlertModal();
                                            };
                                            showAlertModal();

                                            return;

                                        }

                                        hideAlertItemModal();
                                        document.getElementById("sendItemMessageButton").onclick = () => {
                                            sendMessage(e.user_pk);
                                        }
                                        showAlertItemMessageModal();
                                        
                                    
                                    };

                                    itemBox.appendChild(itemRainbowHandWrapper);
                                    itemBox.appendChild(itemMegaPhoneWrapper);
                                    showAlertItemModal();

                                };
                                showAlertWithCancelModal();

                                return;

                            }

                            if(tracingTrackMarkers.length == traceMarkerUpTo) {

                                document.getElementById("alertContent").innerText = "횟수를 모두 사용하셨습니다";
                                document.getElementById("alertCheckButton").onclick = () => {
                                    hideAlertModal();
                                };
                                showAlertModal();

                                return;

                            }

                            getClosestTrackMarker(e.user_pk);

                        };

                        likeListWrapper.querySelector(".heartIcon").style.fontVariationSettings = "'FILL' 1";
                        likeListWrapper.querySelector(".heartIcon").onclick = () => {

                            if(e.is_trace == "N") {
                                toggleLike(e.user_pk, likeListWrapper.querySelector(".heartIcon"));
                                return;
                            }

                            document.getElementById("alertContent").innerText = "추행하고 있습니다";
                            document.getElementById("alertCheckButton").onclick = () => {
                                hideAlertModal();
                            };
                            showAlertModal();

                        };

                        switch(e.open_rating) {

                            case "10" :
                                likeListWrapper.querySelector(".likeListName").innerText = e.nick_name;
                            case "9" :
                                likeListWrapper.querySelector(".likeListImage").style.background = 
                                    "url(" + e.profile_photo + ") no-repeat center";
                                    likeListWrapper.querySelector(".likeListImage").style.backgroundSize =
                                    "cover";
                            case "8" : 
                                if(e.preference == "L") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "이성애";
                                }else if(e.preference == "B") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "게이";
                                }else if(e.preference == "G") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "레즈비언";
                                }else if(e.preference == "V") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "바이섹슈얼";
                                }else if(e.preference == "A") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "에이섹슈얼";
                                }else if(e.preference == "D") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "데미섹슈얼";
                                }else if(e.preference == "P") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "팬섹슈얼";
                                }else if(e.preference == "Q") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "퀘스처닝";
                                }
                            case "7", "6" : 
                                likeListWrapper.querySelector(".likeListMbtiType").innerText = e.blood_type;
                                likeListWrapper.querySelector(".likeListHobby").innerText = e.hobby;
                            case "5" :
                                likeListWrapper.querySelector(".likeListSmoking").innerText = e.smoking;
                                likeListWrapper.querySelector(".likeListDrinking").innerText = e.drinking;
                            case "4", "3" : 
                                likeListWrapper.querySelector(".likeListHeight").innerText = e.height;
                                likeListWrapper.querySelector(".likeListWeight").innerText = e.weight;
                                likeListWrapper.querySelector(".likeListBloodType").innerText = e.blood_type;
                            case "2": 
                                if(e.gender == 'W') {
                                    likeListWrapper.querySelector(".likeListGender").innerText = "👱🏻‍♀️";
                                }else {
                                    likeListWrapper.querySelector(".likeListGender").innerText = "👱🏻‍♂️";
                                }
                            case "1":
                                likeListWrapper.querySelector(".likeListPk").innerText = e.user_more_pk;

                                if(e.mstar_temp < 100) {
                                    likeListWrapper.querySelector(".likeListTemp").style.width = e.mstar_temp;
                                    likeListWrapper.querySelector(".likeListTempContent").innerText = e.mstar_temp;
                                }else {
                                    likeListWrapper.querySelector(".likeListTemp").style.width = 100;
                                    likeListWrapper.querySelector(".likeListTempContent").innerText = 100;
                                }

                        }

                        if(e.open_rating == 10) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + e.cnt + " / ∞ )";
                        }else if(e.open_rating == 9) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (18 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 8) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (16 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 7) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (14 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 6) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (12 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 5) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (10 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 4) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (8 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 3) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (6 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 2) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (4 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 1) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + e.cnt + " / 2 )";
                        }

                        if(e.star_rating == "SSR") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("SSROuter");
                        }else if(e.star_rating == "SR") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("SROuter");
                        }else if(e.star_rating == "S") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("SOuter");
                        }else if(e.star_rating == "fiveStar") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("FiveStarOuter");
                        }else if(e.star_rating == "fourStar") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("FourStarOuter");
                        }else if(e.star_rating == "threeStar") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("ThreeStarOuter");
                        }else if(e.star_rating == "twoStar") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("TwoStarOuter");
                        }else if(e.star_rating == "oneStar") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("OneStarOuter");
                        }

                        switchButton = false;

                        likeListBox.appendChild(likeListWrapper);

                    }

                });

            }

            function getTracingTrackMarkerLogPk(userWriterPk) {

                const url = "./getTracingTrackMarkerLogPk?user_pk=" + user_pk + "&user_writer_pk=" + userWriterPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    saveCollectionInfo(response.data);
                    
                });

            }

            function sendMessage(userWriterPk) {

                const title = "누군가 메세지를 보냈어요!";
                const message = document.getElementById("sendItemMessageContent").value;
                const notifyImg = "N";
                const linkPath = "/follow/gamePage";

                notification(userWriterPk, title, message, notifyImg, linkPath);
                hideAlertItemMessageModal();
                saveItemInfo(7);

                document.getElementById("alertContent").innerText = "메세지 전송이 완료되었습니다";
                document.getElementById("alertCheckButton").onclick = () => {
                    hideAlertModal();
                };
                showAlertModal();

            }

            function notification(userWriterPk, title, message, notifyImg, linkPath) {

                const url = "./sendMessage?user_pk=" + userWriterPk + "&title=" + title +
                    "&message=" + message + "&link_path=" + linkPath + "&notify_img=" + notifyImg;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    console.log("알림 보냄!");

                });

            }
            

            function getClosestTrackMarker(userWriterPk) {

                const url = "./getClosestTrackMarker?user_pk=" + user_pk + "&user_writer_pk=" +
                    userWriterPk + "&latitude=" + currentLat + "&longitude=" + currentLng + "&trackMarkerDateValidity=" + trackMarkerDateValidity;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    if(!response.data) {

                    document.getElementById("alertContent").innerText = "아직 체취를 분사하지 않았습니다";
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                    };
                    showAlertModal();

                        return;

                    }

                    hideLikeListModal();
                    saveClosestTrackMarker(response.data);

                });

            }

            function saveClosestTrackMarker(e) {
                console.log(e);
                const url = "./insertLikeLogInfo?user_pk=" + user_pk + "&log_pk=" + e.log_pk +
                    "&markLat=" + e.latitude + "&markLng=" + e.longitude;
                
                fetch(url)
                .then(response => response.json())
                .then(response => {

                    tracingMarker(response.data);
                    getLikeList();

                });

            }

            function toggleLike(userWriterPk, target) {

                // .onclick = () => {} 으로 호출 & if문으로 is_trace 걸러내기
                
                const url = "./isLike?user_collector_pk=" + user_pk + "&user_writer_pk=" + userWriterPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {
                    if(response.data) {

                        deleteLike(userWriterPk, target);
                        return;

                    }

                    insertLike(userWriterPk, target);

                });
                
            }

            function insertLike(userWriterPk, target) {

                const url = "./insertLike?user_collector_pk=" + user_pk + "&user_writer_pk=" + userWriterPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    target.style.fontVariationSettings = "'FILL' 1";

                });

            }

            function deleteLike(userWriterPk, target) {

                const url = "./deleteLike?user_collector_pk=" + user_pk + "&user_writer_pk=" + userWriterPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    target.style.fontVariationSettings = "'FILL' 0";

                });

            }

            function toggleAction() {

                const checkClaw = document.getElementById("checkClaw");

                if(checkClaw.value == "hide") {

                    showAction();

                }else {

                    hideAction();

                }

            }

            function showAction() {

                const checkClaw = document.getElementById("checkClaw");
                checkClaw.value = "show";

                const actionIcons = document.getElementsByClassName("actionIcon");
                for(e of actionIcons) {
                    e.style.animation = "actionIconOn 0.3s linear 1";
                    e.style.animationFillMode = "both";
                }

                const markClaw = document.getElementById("markClaw");
                markClaw.style.animation = "markClawOn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1";
                markClaw.style.animationFillMode = "both";

                const scanClaw = document.getElementById("scanClaw");
                scanClaw.style.animation = "scanClawOn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1";
                scanClaw.style.animationFillMode = "both";
                
                const traceClaw = document.getElementById("traceClaw");
                traceClaw.style.animation = "traceClawOn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1";
                traceClaw.style.animationFillMode = "both";

                const loveClaw = document.getElementById("loveClaw");
                loveClaw.style.animation = "loveClawOn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1";
                loveClaw.style.animationFillMode = "both";

            }

            function hideAction() {

                const checkClaw = document.getElementById("checkClaw");
                checkClaw.value = "hide";

                const actionIcons = document.getElementsByClassName("actionIcon");
                for(e of actionIcons) {
                    e.style.animation = "actionIconOff 0.3s linear 1";
                }

                const markClaw = document.getElementById("markClaw");
                markClaw.style.animation = "markClawOff 0.3s cubic-bezier(0.6, -0.28, 0.735, 0.045) 1";

                const scanClaw = document.getElementById("scanClaw");
                scanClaw.style.animation = "scanClawOff 0.3s cubic-bezier(0.6, -0.28, 0.735, 0.045) 1";
                
                const traceClaw = document.getElementById("traceClaw");
                traceClaw.style.animation = "traceClawOff 0.3s cubic-bezier(0.6, -0.28, 0.735, 0.045) 1";

                const loveClaw = document.getElementById("loveClaw");
                loveClaw.style.animation = "loveClawOff 0.3s cubic-bezier(0.6, -0.28, 0.735, 0.045) 1";

            }

            function openBag() {

                blockOn();
                getCollectionList();
                showCollectionModal();

            }

            function getCollectionList() {

                resetCollectionModal();

                const url = "./getCollectionList?user_pk=" + user_pk;

                fetch(url)
                .then(response => response.json())
                .then(response => {
                    
                    const collectionLikeListBox = document.getElementById("collectionLikeListBox");
                    const collectionListBox = document.getElementById("collectionListBox");

                    for(let e of response.data) {

                        const collectionWrapper = document.querySelector("#template .collectionWrapper").cloneNode(true);

                        const collectionOuter = collectionWrapper.querySelector(".collectionOuter");
                        const collectionInner = collectionWrapper.querySelector(".collectionInner");
                        const collectionOpenRating = collectionWrapper.querySelector(".collectionOpenRating");
                        const collectionOpenRatngContent = collectionWrapper.querySelector(".collectionOpenRatngContent");
                        const collectionProgress = collectionWrapper.querySelector(".collectionProgress");
                        
                        collectionWrapper.querySelector(".collectionPk").innerText = "No. " + e.user_more_pk;
                        collectionOpenRating.innerText = "Lv " + e.open_rating;

                        if(e.star_rating == 'SSR') {
                            collectionOuter.classList.add("SSROuter");
                            collectionInner.classList.add("SSRInner");
                        }else if(e.star_rating == 'SR') {
                            collectionOuter.classList.add("SROuter");
                            collectionInner.classList.add("SRInner");
                        }else if(e.star_rating == 'S') {
                            collectionOuter.classList.add("SOuter");
                            collectionInner.classList.add("SInner");
                        }else if(e.star_rating == 'oneStar') {
                            collectionOuter.classList.add("OneStarOuter");
                            collectionInner.classList.add("OneStarInner");
                        }else if(e.star_rating == 'twoStar') {
                            collectionOuter.classList.add("TwoStarOuter");
                            collectionInner.classList.add("TwoStarInner");
                        }else if(e.star_rating == 'threeStar') {
                            collectionOuter.classList.add("ThreeStarOuter");
                            collectionInner.classList.add("ThreeStarInner");
                        }else if(e.star_rating == 'fourStar') {
                            collectionOuter.classList.add("FourStarOuter");
                            collectionInner.classList.add("FourStarInner");
                        }else {
                            collectionOuter.classList.add("FiveStarOuter");
                            collectionInner.classList.add("FiveStarInner");
                        }

                        if(e.open_rating == '10') {
                            collectionInner.style.background = "url(" + e.profile_photo + ") no-reapt center";
                            collectionProgress.style.width = "100%";
                            collectionOpenRatngContent.innerText = e.collect_count + " / ∞";
                        }else if(e.open_rating == '9') {
                            collectionInner.style.background = "url(" + e.profile_photo + ") no-reapt center";
                            collectionProgress.style.width = (18 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (18 - e.collect_count) + " / 2";
                        }else if(e.open_rating == '8') {
                            collectionProgress.style.width = (16 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (16 - e.collect_count) + " / 2";
                        }else if(e.open_rating == '7') {
                            collectionProgress.style.width = (14 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (14 - e.collect_count) + " / 2";
                        }else if(e.open_rating == '6') {
                            collectionProgress.style.width = (12 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (12 - e.collect_count) + " / 2";
                        }else if(e.open_rating == '5') {
                            collectionProgress.style.width = (10 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (10 - e.collect_count) + " / 2";
                        }else if(e.open_rating == '4') {
                            collectionProgress.style.width = (8 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (8 - e.collect_count) + " / 2";
                        }else if(e.open_rating == '3') {
                            collectionProgress.style.width = (6 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (6 - e.collect_count) + " / 2";
                        }else if(e.open_rating == '2') {
                            collectionProgress.style.width = (4 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (4 - e.collect_count) + " / 2";
                        }else {
                            collectionProgress.style.width = e.collect_count / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = e.collect_count + " / 2";
                        }

                        collectionOuter.onclick = () => {

                            reloadDetailCollection(e);

                        };

                        document.getElementById("collectionLikeCnt").innerText = e.like_cnt;
                        console.log(e.is_like);
                        if(e.is_like == 'Y') {

                            collectionLikeListBox.appendChild(collectionWrapper);
                            
                        }else {

                            collectionListBox.appendChild(collectionWrapper);

                        }

                    }

                });

            }

            function reloadDetailCollection(e) {

                switch(e.open_rating) {

                    case "10" :
                        document.getElementById("collectionDetailName").innerText = e.nick_name;
                        document.getElementById("collectionDetailMstarButton").disabled = false;
                        document.getElementById("collectionDetailMstarButton").onclick = () => {

                            // hideCollectionDetailModal();
                            // hideCollectionModal();

                            location.href = "/mstar/profilePage";
                        };
                        document.getElementById("collectionDetailWalkRequestButton").disabled = false;
                        document.getElementById("collectionDetailWalkRequestButton").onclick = () => {

                            const title = "산책 신청이 왔어요!";
                            const message = `누군가 당신과의 산책을 원합니다\n누군지 궁금하다면 클릭해주세요`;
                            const notifyImg = "N";
                            const linkPath = "/mstar/anotherProfilePage?profile_info_pk=" + e.user_pk + "&another_info_pk=" + user_pk;
                            
                            notification(e.user_pk, title, message, notifyImg, linkPath);

                            document.getElementById("alertContent").innerText = `산책 신청이 완료되었습니다\n상대방이 당신의 멍스타 프로필을\n확인 할 수 있습니다`;
                            document.getElementById("alertCheckButton").onclick = () => {
                                hideAlertModal();
                            };
                            showAlertModal();

                        };

                    case "9" :
                        document.getElementById("collectionDetailModalImage").style.background = 
                            "url(" + e.profile_photo + ") no-repeat center";
                        document.getElementById("collectionDetailModalImage").style.backgroundSize = "cover";
                    case "8" : 
                        if(e.preference == "L") {
                            document.getElementById("likeListPreference").innerText = "이성애";
                        }else if(e.preference == "B") {
                            document.getElementById("likeListPreference").innerText = "게이";
                        }else if(e.preference == "G") {
                            document.getElementById("likeListPreference").innerText = "레즈비언";
                        }else if(e.preference == "V") {
                            document.getElementById("likeListPreference").innerText = "바이섹슈얼";
                        }else if(e.preference == "A") {
                            document.getElementById("likeListPreference").innerText = "에이섹슈얼";
                        }else if(e.preference == "D") {
                            document.getElementById("likeListPreference").innerText = "데미섹슈얼";
                        }else if(e.preference == "P") {
                            document.getElementById("likeListPreference").innerText = "팬섹슈얼";
                        }else if(e.preference == "Q") {
                            document.getElementById("likeListPreference").innerText = "퀘스처닝";
                        }
                    case "7", "6" : 
                        document.getElementById("collectionDetailMbtiType").innerText = e.blood_type;
                        document.getElementById("collectionDetailHobby").innerText = e.hobby;
                        document.getElementById("collectionDetailMessageButton").disabled = false;
                        document.getElementById("collectionDetailMessageButton").onclick = () => {
                            
                            const title = "당신과 가까워지고 있어요";
                            isAlert(e.user_pk, title);

                        };
                    case "5" :
                        document.getElementById("collectionDetailSmoking").innerText = e.smoking;
                        document.getElementById("collectionDetailDrinking").innerText = e.drinking;
                    case "4", "3" : 
                        document.getElementById("collectionDetailHeight").innerText = e.height;
                        document.getElementById("collectionDetailWeight").innerText = e.weight;
                        document.getElementById("collectionDetailBloodType").innerText = e.blood_type;
                    case "2": 
                        if(e.gender == 'W') {
                            document.getElementById("collectionDetailGender").innerText = "👱🏻‍♀️";
                        }else {
                            document.getElementById("collectionDetailGender").innerText = "👱🏻‍♂️";
                        }
                    case "1":

                        if(e.mstar_temp < 100) {
                            document.getElementById("collectionDetailTemp").style.width = e.mstar_temp;
                            document.getElementById("collectionDetailTempContent").innerText = e.mstar_temp;
                        }else {
                            document.getElementById("collectionDetailTemp").style.width = 100;
                            document.getElementById("collectionDetailTempContent").innerText = 100;
                        }

                }

                if(e.open_rating == 10) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + e.collect_count + " / ∞ )";
                }else if(e.open_rating == 9) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (18 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 8) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (16 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 7) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (14 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 6) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (12 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 5) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (10 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 4) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (8 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 3) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (6 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 2) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (4 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 1) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + e.collect_count + " / 2 )";
                }
                console.log(e.star_rating);
                document.getElementById("collectionDetailOuter").setAttribute("class", "d-flex align-items-center justify-content-center border-0");
                if(e.star_rating == "SSR") {
                    document.getElementById("collectionDetailOuter").classList.add("SSROuter");
                }else if(e.star_rating == "SR") {
                    document.getElementById("collectionDetailOuter").classList.add("SROuter");
                }else if(e.star_rating == "S") {
                    document.getElementById("collectionDetailOuter").classList.add("SOuter");
                }else if(e.star_rating == "fiveStar") {
                    document.getElementById("collectionDetailOuter").classList.add("FiveStarOuter");
                }else if(e.star_rating == "fourStar") {
                    document.getElementById("collectionDetailOuter").classList.add("FourStarOuter");
                }else if(e.star_rating == "threeStar") {
                    document.getElementById("collectionDetailOuter").classList.add("ThreeStarOuter");
                }else if(e.star_rating == "twoStar") {
                    document.getElementById("collectionDetailOuter").classList.add("TwoStarOuter");
                }else if(e.star_rating == "oneStar") {
                    document.getElementById("collectionDetailOuter").classList.add("OneStarOuter");
                }
                console.log(e.is_like)
                if(e.is_like == "Y") {
                    document.getElementById("collectionDetailHeartIcon").style.fontVariationSettings = "'FILL' 1";
                }else {
                    document.getElementById("collectionDetailHeartIcon").style.fontVariationSettings = "'FILL' 0";
                }
                
                document.getElementById("collectionDetailHeartButton").onclick = () => {
                    
                    if(e.is_trace == "N") {
                        console.log(e.is_trace);
                        toggleLike(e.user_pk, document.getElementById("collectionDetailHeartIcon"));
                        return;
                    }

                    document.getElementById("alertContent").innerText = "추행하고 있습니다";
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                    };
                    showAlertModal();

                };

                getCollectionLogList(e.user_pk, e.star_rating);

            }

            function getCollectionLogList(userWriterPk, starRating) {

                const url = "./getCollectionLogList?user_pk=" + user_pk + "&user_writer_pk=" + userWriterPk + "&trackMarkerDateValidity=" + trackMarkerDateValidity;
                console.log(userWriterPk);
                fetch(url)
                .then(response => response.json())
                .then(response => {
                    console.log(response.data);
                    const collectionDetailCardListBox = document.getElementById("collectionDetailCardListBox");
                    collectionDetailCardListBox.innerHTML = "";

                    if(response.data.length == 0) {

                        return;
                    }

                    for(let e of response.data) {

                        let wrapper;

                        if(starRating == "oneStar" || starRating == "twoStar") {

                            wrapper = document.querySelector("#template .collectionDetailCardCommonWrapper").cloneNode(true);

                        }else {

                            if(e.card_rating == "common") {
                                wrapper = document.querySelector("#template .collectionDetailCardCommonWrapper").cloneNode(true);
                            }else if(e.card_rating == "rare") {
                                wrapper = document.querySelector("#template .collectionDetailCardRareWrapper").cloneNode(true);
                            }else {
                                wrapper = document.querySelector("#template .collectionDetailCardLegendaryWrapper").cloneNode(true);
                            }
                            
                        }

                        if(e.is_collect == "N") {
                            wrapper.querySelector(".collectionDetailCardFilter").style.filter = "brightness(50%)";
                            wrapper.querySelector(".collectionDetailCardFilter").onclick = () => {
                                
                                document.getElementById("alertWithCancelContent").innerText = `아이템을 사용하시겠습니까?`;
                                document.getElementById("alertWithCancelCheckButton").onclick = () => {
                                    hideAlertWithCancelModal();

                                    const itemBox = document.getElementById("itemBox");
                                    itemBox.innerHTML = "";

                                    const itemCupidoWrapper = document.querySelector("#template .itemCupidoWrapper").cloneNode(true);
                                    itemCupidoWrapper.querySelector(".itemCount").innerText = cupidoItemCnt;
                                    itemCupidoWrapper.onclick = () => {

                                        if(cupidoItemCnt <= 0) {

                                            document.getElementById("alertContent").innerText = "사용할 수 있는 아이템이 없습니다";
                                            document.getElementById("alertCheckButton").onclick = () => {
                                                hideAlertModal();
                                            };
                                            showAlertModal();

                                            return;

                                        }

                                        hideAlertItemModal();
                                        saveItemInfo(8);
                                        saveCollectionInfoByItem(e.log_pk, userWriterPk, starRating);
                                    
                                    };

                                    itemBox.appendChild(itemCupidoWrapper);
                                    showAlertItemModal();

                                };
                                showAlertWithCancelModal();

                            };
                        }else {
                            wrapper.querySelector(".collectionDetailCardFilter").onclick = () => {
                                reloadCollectionCard(e);
                                console.log(e);
                            };
                        }

                        wrapper.querySelector(".collectionDetailLogPk").innerText = e.log_pk;
                        
                        collectionDetailCardListBox.appendChild(wrapper);

                    }

                    showCollectionDetailModal();

                });
                
            }

            function saveCollectionInfoByItem(logPk, userWriterPk, starRating) {
                
                const url = "./insertCollectionInfo?user_pk=" + user_pk + "&log_pk=" + logPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    getCollectionLogList(userWriterPk, starRating);

                });

            }

            function reloadCollectionCard(e) {
                console.log(e);
                document.getElementById("collectionCardLogPk").innerText = e.log_pk;
                document.getElementById("collectionCardCollectDate").innerText = e.collect_date;
                document.getElementById("collectionCardImage").style.background = "url('/uploadFiles/" + e.image_link + "') no-repeat center";
                document.getElementById("collectionCardImage").style.backgroundSize = "cover";
                document.getElementById("collectionCardDate").innerText = e.created_date;
                document.getElementById("collectionCardContent").innerText = e.content;
                document.getElementById("collectionCardCollectCount").innerText = e.collect_cnt;
                document.getElementById("collectionCardCommentCount").innerText = e.comment_cnt;
                document.getElementById("collectionCardTraceCount").innerText = e.trace_cnt;

                getCommentList(e.log_pk);

            }

            function getCommentList(logPk) {

                const url = "./getCommentList?log_pk=" + logPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    const collectionCardCommentBox = document.querySelector(".collectionCardCommentBox");
                    collectionCardCommentBox.innerHTML = "";
                    console.log(response.data);
                    if(response.data.length == 0) {

                        showCollectionCardModal();
                        return;

                    }

                    for(e of response.data) {

                        const collectionCardCommentWrapper = document.querySelector("#template .collectionCardCommentWrapper").cloneNode(true);

                        collectionCardCommentWrapper.querySelector(".collectionCardCommentDate").innerText = e.created_date;
                        collectionCardCommentWrapper.querySelector(".collectionCardCommentContent").innerText = e.content;

                        collectionCardCommentBox.appendChild(collectionCardCommentWrapper);

                    }

                    showCollectionCardModal();

                });

            }

            function sendCollectMessage(userWriterPk) {
                // pqpq 보냄
                const title = "당신과 가까워지고 있어요";
                const message = document.getElementById("sendCollectMessageContent");
                const notifyImg = "N";
                const linkPath = "/follow/gamePage";

                notification(userWriterPk, title, message, notifyImg, linkPath);

                document.getElementById("alertContent").innerText = "메세지 전송이 완료되었습니다";
                document.getElementById("alertCheckButton").onclick = () => {
                    hideAlertModal();
                };
                showAlertModal();

                hideAlertCollectMessageModal();

            }

            function isAlert(userWriterPk, title) {

                const url = "./isAlert?user_pk=" + userWriterPk + "&title=" + title;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    if(response.data) {
                        // pqpq 받음
                        document.getElementById("sendCollectionMessageContentTextareaHidden").hidden = true;
                        document.getElementById("sendCollectMessageButton").hidden = true;
                        document.getElementById("sendCollectionMessageContentHidden").innerText = response.data;
                        document.getElementById("sendCollectionMessageContentHidden").hidden = false;

                        showAlertCollectMessageModal();

                        return;

                    }

                    document.getElementById("sendCollectionMessageContentTextareaHidden").hidden = false;
                    document.getElementById("sendCollectMessageButton").hidden = false;
                    document.getElementById("sendCollectionMessageContentHidden").innerText = "";
                    document.getElementById("sendCollectionMessageContentHidden").hidden = true;

                    document.getElementById("sendCollectMessageButton").onclick = () => {
                                
                        sendCollectMessage(userWriterPk);

                    };

                    showAlertCollectMessageModal();

                });

            }

            function openMyPage() {

                blockOn();
                getMyPageInfo();

            }

            function getMyPageInfo() {

                const url = "./getMyPageInfo?user_pk=" + user_pk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    document.getElementById("myPageModalImage").style.background = "url('" + response.data.profile_photo + "') no-repeat center";
                    document.getElementById("myPageModalImage").style.backgroundSize = "cover";
                    document.getElementById("myPageName").innerText = response.data.nick_name;
                    document.getElementById("myPageHeight").innerText = response.data.height;

                    if(response.data.gender == "M") {
                        document.getElementById("myPageGender").innerText = "👱🏻‍♂️";
                    }else {
                        document.getElementById("myPageGender").innerText = "👱🏻‍♀️";
                    }
                    
                    document.getElementById("myPageWeight").innerText = response.data.weight;
                    document.getElementById("myPageMbtiType").innerText = response.data.mbti_type;
                    document.getElementById("myPageBloodType").innerText = response.data.blood_type;
                    document.getElementById("myPageDrinking").innerText = response.data.drinking;
                    document.getElementById("myPageSmoking").innerText = response.data.smoking;
                    document.getElementById("myPageHobby").innerText = response.data.hobby;

                    if(response.data.preference == "L") {
                        document.getElementById("myPagePreference").innerText = "이성애";
                    }else if(response.data.preference == "B") {
                        document.getElementById("myPagePreference").innerText = "게이";
                    }else if(response.data.preference == "G") {
                        document.getElementById("myPagePreference").innerText = "레즈비언";
                    }else if(response.data.preference == "V") {
                        document.getElementById("myPagePreference").innerText = "바이섹슈얼";
                    }else if(response.data.preference == "A") {
                        document.getElementById("myPagePreference").innerText = "에이섹슈얼";
                    }else if(response.data.preference == "D") {
                        document.getElementById("myPagePreference").innerText = "데미섹슈얼";
                    }else if(response.data.preference == "P") {
                        document.getElementById("myPagePreference").innerText = "팬섹슈얼";
                    }else if(response.data.preference == "Q") {
                        document.getElementById("myPagePreference").innerText = "퀘스처닝";
                    }

                    document.getElementById("mypageTemp").style.width = response.data.mstar_temp + "%";
                    document.getElementById("myPageTempContent").innerText = response.data.mstar_temp;
                    document.getElementById("myPageSombodyTraceCount").innerText = response.data.sombody_trace_cnt;
                    document.getElementById("myPageSombodyCollectCount").innerText = response.data.sombody_collect_cnt;
                    document.getElementById("myPageSombodyLikeCount").innerText = response.data.sombody_like_cnt;
                    document.getElementById("myPageSombodyCommentCount").innerText = response.data.sombody_comment_cnt;
                    document.getElementById("myPageMyTraceCount").innerText = response.data.my_trace_cnt;
                    document.getElementById("myPageMyCollectCount").innerText = response.data.my_collect_cnt;
                    document.getElementById("myPageMyLikeCount").innerText = response.data.my_like_cnt;
                    document.getElementById("myPageMyCommentCount").innerText = response.data.my_comment_cnt;
                    document.getElementById("myPageMyTrackCount").innerText = response.data.my_track_cnt;

                    document.getElementById("myPageTrackButton").onclick = () => {
                        getMyTrackMarkersInfo(response.data.star_rating);
                    };

                    showMyPageModal();

                });

            }

            function getMyTrackMarkersInfo(starRating) {

                const url = "./getMyTrackMarkersInfo?user_pk=" + user_pk + "&trackMarkerDateValidity=" + trackMarkerDateValidity;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    const myTrackListBox = document.getElementById("myTrackListBox");
                    myTrackListBox.innerHTML = "";

                    if(response.data.length == 0) {

                        document.getElementById("myTrackCnt").innerText = "0";
                        showMyTrackModal();
                        return;
                        
                    }
                    console.log(starRating);
                    for(let e of response.data) {

                        let wrapper;

                        if(starRating == "oneStar" || starRating == "twoStar") {

                            wrapper = wrapper = document.querySelector("#template .collectionDetailCardCommonWrapper").cloneNode(true);

                        }else {
                            console.log(e.card_rating);
                            if(e.card_rating == "common") {
                                wrapper = document.querySelector("#template .collectionDetailCardCommonWrapper").cloneNode(true);
                            }else if(e.card_rating == "rare") {
                                wrapper = document.querySelector("#template .collectionDetailCardRareWrapper").cloneNode(true);
                            }else {
                                wrapper = document.querySelector("#template .collectionDetailCardLegendaryWrapper").cloneNode(true);
                            }
                            
                        }
                        
                        document.getElementById("myTrackCnt").innerText = e.my_track_cnt;
                        wrapper.querySelector(".collectionDetailLogPk").innerText = e.log_pk;
                        wrapper.querySelector(".collectionDetailCardFilter").onclick = () => {
                            reloadMyTrackCard(e);
                            console.log(e);
                        }

                        myTrackListBox.appendChild(wrapper);

                    }

                    showMyTrackModal();

                });

            }

            function reloadMyTrackCard(e) {

                document.getElementById("myTrackCardLogPk").innerText = e.log_pk;
                document.getElementById("myTrackCardImage").style.background = "url('/uploadFiles/" + e.image_link + "') no-repeat center";
                document.getElementById("myTrackCardImage").style.backgroundSize = "cover";
                document.getElementById("myTrackCardContent").innerText = e.content;
                document.getElementById("myTrackCardDate").innerText = e.created_date;
                document.getElementById("myTrackCardCollectCount").innerText = e.collect_cnt;
                document.getElementById("myTrackCardCommentCount").innerText = e.comment_cnt;
                document.getElementById("myTrackCardTraceCount").innerText = e.trace_cnt;

                getMyTrackCommentList(e.log_pk);
                
                

            }

            function getMyTrackCommentList(logPk) {

                const url = "./getCommentList?log_pk=" + logPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {
                   
                    const myTrackCardCommentBox = document.querySelector(".myTrackCardCommentBox");
                    myTrackCardCommentBox.innerHTML = "";
                    console.log(response.data);
                    if(response.data.length == 0) {

                        showMyTrackCardModal();
                        return;

                    }

                    for(e of response.data) {

                        const myTrackCardCommentWrapper = document.querySelector("#template .myTrackCardCommentWrapper").cloneNode(true);

                        myTrackCardCommentWrapper.querySelector(".myTrackCardCommentDate").innerText = e.created_date;
                        myTrackCardCommentWrapper.querySelector(".myTrackCardCommentContent").innerText = e.content;

                        myTrackCardCommentBox.appendChild(myTrackCardCommentWrapper);

                    }

                    showMyTrackCardModal();

                });

            }

            function inputWriteTrackMarkImage() {
                const inputImage = document.getElementById("writeTrackMarkImage");
                inputImage.click();
            }

            function previewWriteTrackMarkImage() {
                const inputImage = document.getElementById("writeTrackMarkImage");
                const writeTrackMarkImageHere = document.getElementById("writeTrackMarkImageHere");

                if([...inputImage.files].length === 0) {
                    return;
                }

                const imageUrl = URL.createObjectURL(inputImage.files[0]);
                document.getElementById("writeTrackMarkNoimage").hidden = true;
                writeTrackMarkImageHere.style.background = "url(" + imageUrl + ") no-repeat center";
                writeTrackMarkImageHere.style.backgroundSize = "cover";
            }

            function blockOn() {

                document.getElementById("block").hidden = false;

            }

            function blockOff() {

                document.getElementById("block").hidden = true;

            }

            function showAlertWithCancelModal() {
                
                const modal = bootstrap.Modal.getOrCreateInstance("#alertWithCancelModal");
                modal.show();

            }

            function hideAlertWithCancelModal() {
                
                const modal = bootstrap.Modal.getOrCreateInstance("#alertWithCancelModal");
                modal.hide();

            }

            function showAlertModal() {
                
                const modal = bootstrap.Modal.getOrCreateInstance("#alertModal");
                modal.show();

            }

            function hideAlertModal() {
                
                const modal = bootstrap.Modal.getOrCreateInstance("#alertModal");
                modal.hide();

            }

            function showAlertItemModal() {
                
                const modal = bootstrap.Modal.getOrCreateInstance("#alertItemModal");
                modal.show();

            }

            function hideAlertItemModal() {
                
                const modal = bootstrap.Modal.getOrCreateInstance("#alertItemModal");
                modal.hide();

            }

            function showAlertItemMessageModal() {
                
                const modal = bootstrap.Modal.getOrCreateInstance("#alertItemMessageModal");
                modal.show();

            }

            function hideAlertItemMessageModal() {
                
                const modal = bootstrap.Modal.getOrCreateInstance("#alertItemMessageModal");
                modal.hide();

            }

            function showAlertCollectMessageModal() {
                
                const modal = bootstrap.Modal.getOrCreateInstance("#alertCollectMessageModal");
                modal.show();

            }

            function hideAlertCollectMessageModal() {
                
                const modal = bootstrap.Modal.getOrCreateInstance("#alertCollectMessageModal");
                modal.hide();

            }
            
            function showWriteMoreInfoModal() {

                resetWriteMoreInfoModal();

                const modal = bootstrap.Modal.getOrCreateInstance("#writeMoreInfoModal");
                modal.show();

            }

            function hideWriteMoreInfoModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#writeMoreInfoModal");
                modal.hide();

            }
            
            function showWriteTrackMarkModal() {

                resetWriteTrackMarkModal();

                const modal = bootstrap.Modal.getOrCreateInstance("#writeTrackMarkModal");
                modal.show();

            }

            function hideWriteTrackMarkModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#writeTrackMarkModal");
                modal.hide();

            }
            
            function showPreviewTrackMarkerModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#previewTrackMarkerModal");
                modal.show();

            }

            function hidePreviewTrackMarkerModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#previewTrackMarkerModal");
                modal.hide();

            }

            function showTrackMarkerModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#trackMarkerModal");
                modal.show();

            }
            
            function showCollectionModal() {

                document.getElementById("collectionModalHeight").style.height = mapHeight * 0.85 + "px";
                // document.getElementById("collectionListColorBox").style.height = mapHeight * 0.625;
                document.getElementById("collectionListBoxHeight").style.height = mapHeight * 0.85 * 0.8 + "px";

                const modal = bootstrap.Modal.getOrCreateInstance("#collectionModal");
                modal.show();

                // setTimeout(() => window.scrollTo(0,0), 1000);

            }

            function hideCollectionModal() {
                
                blockOff();

                const modal = bootstrap.Modal.getOrCreateInstance("#collectionModal");
                modal.hide();

            }

            function showCollectionDetailModal() {
                const modal = bootstrap.Modal.getOrCreateInstance("#collectionDetailModal");
                modal.show();


                document.getElementById("collectionDetailModalHeight").style.height = mapHeight * 0.85 + "px";
                //document.getElementById("collectionDetailInfoHeight").style.height;

                const collectionDetailInfoHeight = parseFloat(getComputedStyle(document.getElementById("collectionDetailInfoHeight")).height.replace("px",""));

                document.getElementById("collectionDetailModalCardHeight").style.height = (mapHeight * 0.85 - collectionDetailInfoHeight - 100) + "px";

            }

            function hideCollectionDetailModal() {

                getCollectionList();

                const modal = bootstrap.Modal.getOrCreateInstance("#collectionDetailModal");
                modal.hide();

            }

            function showMyPageModal() {

                // document.getElementById("myPageModalHeight").style.height = mapHeight * 0.6 + "px";
                document.getElementById("myPageModalHeight").style.height = "31.5rem";

                const modal = bootstrap.Modal.getOrCreateInstance("#myPageModal");
                modal.show();

            }

            function hideMyPageModal() {

                blockOff();

                const modal = bootstrap.Modal.getOrCreateInstance("#myPageModal");
                modal.hide();

            }
            
            function showMyTrackModal() {

                document.getElementById("myTrackModalHeight").style.height = "31.5rem";

                const modal = bootstrap.Modal.getOrCreateInstance("#myTrackModal");
                modal.show();

            }

            function showMyTrackCardModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#myTrackCardModal");

                document.getElementById("myTrackCardModal").addEventListener("shown.bs.modal", () => {
                    document.getElementById("myTrackCardModalHeight").style.height = mapHeight * 0.9 * 0.85 + "px";

                    const myTrackCardInfoHeight = parseFloat(getComputedStyle(document.getElementById("myTrackCardInfoHeight")).height.replace("px", ""));
                    console.log(myTrackCardInfoHeight);
                    document.getElementById("myTrackCardCommentHeight").style.height = ((mapHeight * 0.9 * 0.85) - myTrackCardInfoHeight - 30) + "px";
                });

                modal.show();

            }

            function showLikeListModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#likeListModal");
                modal.show();

                document.getElementById("likeListCarouselPrev").click();

            }

            function hideLikeListModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#likeListModal");
                modal.hide();

            }

            function showCollectionCardModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#collectionCardModal");

                // setTimeout(() => {
                //     // alert();
                //     document.getElementById("collectionCardModalHeight").style.height = mapHeight * 0.9 * 0.85 + "px";

                //     const collectionCardInfoHeight = parseFloat(getComputedStyle(document.getElementById("collectionCardInfoHeight")).height.replace("px", ""));
                //     console.log(getComputedStyle(document.getElementById("collectionCardInfoHeight")).height);
                //     console.log(collectionCardInfoHeight);

                //     document.getElementById("collectionCardCommentHeight").style.height = ((mapHeight * 0.9 * 0.85) - collectionCardInfoHeight - 30) + "px";

                // }, 250);

                
                document.getElementById("collectionCardModal").addEventListener("shown.bs.modal", () => {
                    document.getElementById("collectionCardModalHeight").style.height = mapHeight * 0.9 * 0.85 + "px";

                    const collectionCardInfoHeight = parseFloat(getComputedStyle(document.getElementById("collectionCardInfoHeight")).height.replace("px", ""));
                    console.log(getComputedStyle(document.getElementById("collectionCardInfoHeight")).height);
                    console.log(collectionCardInfoHeight);

                    document.getElementById("collectionCardCommentHeight").style.height = ((mapHeight * 0.9 * 0.85) - collectionCardInfoHeight - 30) + "px";
                });

                modal.show();

            }

            function showShopModal(){

                const itemModal = bootstrap.Modal.getOrCreateInstance("#itemModal");
                loadShopItemList();
                getMyCoin();
                itemModal.show();

            }

            function closeShopModal(){

                const itemModal = bootstrap.Modal.getOrCreateInstance("#itemModal");
                itemModal.hide();

                getItemCount();

            }

            function resetWriteMoreInfoModal() {
                document.getElementById("writeMoreInfoHeight").value = "";
                document.getElementById("writeMoreInfoWeight").value = "";
                document.getElementById("writeMoreInfoBloodType").value = "0";
                document.getElementById("writeMoreInfoMbtiType").value = "0";
                document.getElementById("writeMoreInfoHobby").value = "";
                document.getElementById("yesDrinking").checked = false;
                document.getElementById("yesSmoking").checked = false;
                document.getElementById("writeMoreInfoPreference").value = "0";
                document.getElementById("writeBlank").innerText = "";
            }

            function resetWriteTrackMarkModal() {
                document.getElementById("writeTrackMarkNoimage").hidden = false;
                document.getElementById("writeTrackMarkImageHere").style.removeProperty("background", "background-size");
                document.getElementById("writeTrackMarkContent").value = "";
            }

            function resetPreviewTrackMarkerModal() {
                // modal 내용 초기화
            }

            function resetTrackMarkerModal() {
                document.getElementById("trackMarkerPreviewCommentContent").innerText = "";
                document.getElementById("trackMarkerCommentContent").value = "";
                document.getElementById("trackMarkerCommentHidden").hidden = false;
            }

            function resetCollectionModal() {
                document.getElementById("collectionLikeCnt").innerText = "0";
                document.getElementById("collectionLikeListBox").innerHTML = "";
                document.getElementById("collectionListBox").innerHTML = "";
            }

            // window.addEventListener("DOMContentLoaded", () => {

            //     getMyUserPk();
            //     createMap();
            //     getMyLocation();
            //     showPreviewTrackMarkerModal();

            // })

        </script>

        <script>
            window.addEventListener("DOMContentLoaded", () => {

                const topNaviHeight = parseFloat(getComputedStyle(document.getElementById("topNavi")).height.replace("px", ""));
                const bottomNaviHeight = parseFloat(getComputedStyle(document.getElementById("bottomNavi")).height.replace("px", ""));
                const bodyHeight = parseFloat(getComputedStyle(document.body).height.replace("px", ""));
                const bodyBottomMargin = parseFloat(getComputedStyle(document.body).marginBottom.replace("px", ""));
                // alert(screen.availHeight);
                // alert(window.innerHeight);
                // alert(screen.height);
                // alert(bodyHeight);

                // alert(getComputedStyle(document.getElementById("map")).height);

                // const xxx = parseFloat(getComputedStyle(document.getElementById("map")).height.replace("px", ""));

                // mapHeight = screen.availHeight - topNaviHeight - bottomNaviHeight;
                mapHeight = window.innerHeight - topNaviHeight - bottomNaviHeight;
                document.getElementById("map").style.height = mapHeight  + "px";
                document.getElementById("block").style.height = mapHeight  + "px";
                // document.getElementById("map").style.height = xxx - topNaviHeight - bottomNaviHeight + "px";

                getMyUserPk();
                createMap();
                getMyLocation(0);
                // window.scrollTo(0,0);
            });

        </script>


        <style>

            @font-face {
                font-family: 'omyu_pretty';
                src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2304-01@1.0/omyu_pretty.woff2') format('woff2');
                font-weight: normal;
                font-style: normal;
            }

            body {
                font-family: 'omyu_pretty';
                min-width: 360px;
                touch-action: none;
            }

            #map {
                position: relative;
                overflow: hidden;
                width: 100%;
                height: 100vh;
            }

            #block {
                position: absolute;
                z-index: 2000;
                width: 100%;
            }
            
            .commonStyle {
                position: absolute;
                z-index: 1000;
            }

            #locationIcon {
                font-variation-settings:
                'FILL' 1;
                font-size: 1.2rem;
                color: #211e1e;
            }

            #pawIcon {
                font-variation-settings:
                'FILL' 1;
                font-size: 1.8rem;
                color: white;
            }

            .actionIcon {
                font-size: 0;
                color: #000;
                /* animation: actionIconOn 0.3s linear 1;
                animation-fill-mode: both; */
            }

            @keyframes actionIconOn {
                to {
                    font-size: 1.3rem;
                }
            }

            @keyframes actionIconOff {
                from {
                    font-size: 1.3rem;
                }
            }

            #collectionModalCloseIcon {
                font-variation-settings:
                'FILL' 1;
                color: white;
            }

            .myLocationMarkerBox {
                position: relative;
                width: 2rem;
                height: 2rem;
            }

            .myLocationMarker {
                position: absolute;
                border-radius: 50%;
                top: calc(50% - var(--my-location-marker-radius));
                left: calc(50% - var(--my-location-marker-radius));
            }

            .myLocationMarker.first {
                width: 2rem;
                height: 2rem;
                background: rgb(0, 0, 0, 0.1);
                --my-location-marker-radius: 1rem;
            }

            .myLocationMarker.second {
                width: 0.9rem;
                height: 0.9rem;
                background: white;
                box-shadow: 0 0 2px 2px rgb(0, 0, 0, 0.5);
                --my-location-marker-radius: 0.45rem;
            }

            .myLocationMarker.third {
                width: 0.65625rem;
                height: 0.65625rem;
                background: #211e1e;
                --my-location-marker-radius: 0.328125rem;
            }

            .scanMarkerBox {
                position: relative;
                width: 4rem;
                height: 4rem;
            }

            .traceMarkerBox {
                position: relative;
                width: 7rem;
                height: 5rem;
            }

            .scanMarkerImage {
                position: absolute;
                width: 4rem;
                height: 4rem;
            }

            .traceMarkerImage {
                position: absolute;
                bottom: 0;
                width: 7rem;
                height: 1.4rem;
            }

            .scanMarkerContent {
                position: absolute;
                border-radius: 50%;
            }

            #shopButton {
                width: 3rem;
                height: 3rem;
                right: 1rem;
                top: 2rem;
            }

            #myPageButton {
                width: 3rem;
                height: 3rem;
                right: 1rem;
                top: 5.5rem;
            }

            #bagButton {
                width: 3rem;
                height: 3rem;
                right: 1rem;
                top: 9rem;
            }

            #locationButton {
                position: relative;
                width: 2rem;
                height: 2rem;
                right: 1.5rem;
                bottom: 2.5rem;
                border-radius: 50%;
                border: 1px solid rgb(0, 0, 0, 0.15);
                box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                background: white;
            }

            #actionButton {
                width: 3rem;
                height: 3rem;
                left: calc(50% - 1.5rem);
                /* bottom: 7.5rem; */
                border-radius: 50%;
                border: 1px solid rgb(0, 0, 0, 0.15);
                box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                /* background: linear-gradient(to right, #FDE4CD 50%, #FFC98B 50%); */
                background: #211e1e;
            }

            #actionToggle {
                width: 3rem;
                height: 3rem;
                /* right: calc(50% - 1.5rem);
                bottom: 7.5rem; */
            }

            .myTrackMarker {
                width: 1.5rem;
                height: 1.5rem;
                background: url("/public/image/follow/mytrackmarker.png") no-repeat center;
                background-size : cover;
            }

            #claw1 {
                width: 0.6rem;
                height: 0.6rem;
                border-radius: 50%;
                background: #211e1e;
                top: 0.4rem;
                left: 0.6rem;
            }
            
            #claw2 {
                width: 0.6rem;
                height: 0.6rem;
                border-radius: 50%;
                background: #211e1e;
                top: 0.1rem;
                left: 0.9rem;
            }

            #claw3 {
                width: 0.6rem;
                height: 0.6rem;
                border-radius: 50%;
                background: #211e1e;
                top: 0.1rem;
                right: 0.9rem;
            }
            
            #claw4 {
                width: 0.6rem;
                height: 0.6rem;
                border-radius: 50%;
                background: #211e1e;
                top: 0.4rem;
                right: 0.6rem;
            }

            #markClaw {
                width: 0.4rem;
                height: 0.4rem;
                border-radius: 50%;
                background: white;
                top: 0.9rem;
                left: 0.6rem;
            }

            @keyframes markClawOn {
                to {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(-4rem, -2.5rem);
                }
            }

            @keyframes markClawOff {
                from {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(-4rem, -2.5rem);
                }
            }
            
            #scanClaw {
                width: 0.4rem;
                height: 0.4rem;
                border-radius: 50%;
                background: white;
                top: 0.5rem;
                left: 0.95rem;
            }

            @keyframes scanClawOn {
                to {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(-2.1rem, -4rem);
                }
            }

            @keyframes scanClawOff {
                from {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(-2.1rem, -4rem);
                }
            }

            #traceClaw {
                width: 0.4rem;
                height: 0.4rem;
                border-radius: 50%;
                background: white;
                top: 0.5rem;
                right: 0.95rem;
            }

            @keyframes traceClawOn {
                to {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(2.1rem, -4rem);
                }
            }

            @keyframes traceClawOff {
                from {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(2.1rem, -4rem);
                }
            }
            
            #loveClaw {
                width: 0.4rem;
                height: 0.4rem;
                border-radius: 50%;
                background: white;
                top: 0.9rem;
                right: 0.6rem;
                /* animation: loveClawOn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1;
                animation-fill-mode: both; */
            }

            @keyframes loveClawOn {
                to {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(4rem, -2.5rem);
                }
            }

            @keyframes loveClawOff {
                from {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(4rem, -2.5rem);
                }
            }

            #markScanCircle::before, #markScanCircle::after{
                content: "";
                position: absolute;
                z-index: 1500;
                border-radius: 50%;
                background: rgb(0, 0, 0, 0.3);
                width: 44rem;
                height: 44rem;
                top: calc(50% - 22rem);
                left: calc(50% - 22rem);
                animation: markScanCircle 1.2s linear 2;
                animation-fill-mode: both;
            }

            #markScanCircle::after {
                opacity: 0;
                animation: markScanCircle 1.2s 0.6s linear 2;
            }
            
            @keyframes markScanCircle {
                from {
                    scale: 0;
                    opacity: 1;
                }
                to {
                    scale: 1;
                    opacity: 0;
                }
            }

            .markDrop {
                animation: markDrop 1s cubic-bezier(.17,.67,0,1) 1;
                animation-fill-mode: both;
            }

            @keyframes markDrop {
                from {
                    scale: 2;
                    opacity: 0;
                }
                to {
                    scale: 1;
                    opacity: 1;
                }
            }

            .SSROuter {
                background: radial-gradient(white, #ffff90ff);
                border: 1px solid #ffdf00;
            }

            .SSRInner {
                border: 1px solid #ffdf00;
            }

            .SROuter {
                background: radial-gradient(white, #cc4125ff);
                border: 1px solid #980000;
            }

            .SRInner {
                border: 1px solid #980000;
            }

            .SOuter {
                background: radial-gradient(white, #c27ba0ff);
                border: 1px solid #a64d79;
            }

            .SInner {
                border: 1px solid #a64d79;
            }

            .FiveStarOuter {
                background: radial-gradient(white, #8e7cc3ff);
                border: 1px solid #674ea7;
            }

            .FiveStarInner {
                border: 1px solid #674ea7;
            }

            .FourStarOuter {
                background: radial-gradient(white, #3c78d8ff);
                border: 1px solid #0b5394;
            }

            .FourStarInner {
                border: 1px solid #0b5394;
            }

            .ThreeStarOuter {
                background: radial-gradient(white, #93c47dff);
                border: 1px solid #38761d;
            }

            .ThreeStarInner {
                border: 1px solid #38761d;
            }

            .TwoStarOuter {
                background: radial-gradient(white, #b7b7b7ff);
                border: 1px solid #666666;
            }

            .TwoStarInner {
                border: 1px solid #666666;
            }

            .OneStarOuter {
                background: radial-gradient(white, #d9d9d9ff);
                border: 1px solid #b7b7b7;
            }

            .OneStarInner {
                border: 1px solid #b7b7b7;
            }

            .walkingPawCircle {
                position: relative;
                width: 2rem;
                height: 2rem;
                border: 1px solid transparent;
                border-radius: 50%;
            }

            .walkingPawIcon {
                position: absolute;
                color: rgb(0, 0, 0);
            }

            .walkingPawIcon.first {
                top: calc(50% - 3rem);
                left: calc(50% - 1.5rem);
                transform: rotate(-5deg);
                opacity: 0;
                animation: showSomthing 1s, hideSomthing 0.5s 1s;
                animation-fill-mode: forwards;
            }

            .walkingPawIcon.second {
                top: calc(50% - 4rem);
                right: calc(50% - 1.5rem);
                transform: rotate(5deg);
                opacity: 0;
                animation: showSomthing 1s 0.3s, hideSomthing 0.5s 1.3s linear 1;
                animation-fill-mode: forwards;
            }

            .walkingPawIcon.third {
                top: calc(50% - 5rem);
                left: calc(50% - 1.5rem);
                transform: rotate(-5deg);
                opacity: 0;
                animation: showSomthing 1s 0.6s, hideSomthing 0.5s 1.6s linear 1;
                animation-fill-mode: forwards;
            }

            .walkingPawIcon.fourth {
                top: calc(50% - 6rem);
                right: calc(50% - 1.5rem);
                transform: rotate(5deg);
                opacity: 0;
                animation: showSomthing 1s 0.9s, hideSomthing 0.5s 1.9s linear 1;
                animation-fill-mode: forwards;
            }

            .walkingPawIcon.fifth {
                top: calc(50% - 7rem);
                left: calc(50% - 1.5rem);
                transform: rotate(-5deg);
                opacity: 0;
                animation: showSomthing 1s 1.2s, hideSomthing 0.5s 2.2s linear 1;
                animation-fill-mode: forwards;
            }

            .walkingPawIcon.sixth {
                top: calc(50% - 8rem);
                right: calc(50% - 1.5rem);
                transform: rotate(5deg);
                opacity: 0;
                animation: showSomthing 1s 1.5s, hideSomthing 0.5s 2.5s linear 1;
                animation-fill-mode: forwards;
            }

            .walkingPawIcon.seventh {
                top: calc(50% - 9rem);
                left: calc(50% - 1.5rem);
                transform: rotate(-5deg);
                opacity: 0;
                animation: showSomthing 1s 1.8s, hideSomthing 0.5s 2.8s linear 1;
                animation-fill-mode: forwards;
            }

            @keyframes showSomthing {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }

            @keyframes hideSomthing {
                from {
                    opacity: 1;
                }
                to {
                    opacity: 0;
                }
            }

        </style>

    </head>

    <body>

        <div class="container-fluid">
            <th:block th:replace="~{commons/naviBar.html :: topNavi}"></th:block>
            <th:block th:replace="~{commons/naviBar.html :: bottomNavi}"></th:block>
            <th:block th:replace="~{commons/naviBar.html :: motifyModal}"></th:block>
            <th:block th:replace="~{commons/naviBar.html :: unReadNotifyListTemplate}"></th:block>
            <th:block th:replace="~{commons/naviBar.html :: readNotifyListTeplate}"></th:block>
            <div class="row">
                <div class="col px-0">
                    <div id="map">
                        <div id="block" hidden></div>
                        <div onclick="showShopModal()" id="shopButton" class="commonStyle">
                            <img class="img-fluid" th:src="@{/public/image/follow/shop.png}">
                        </div>
                        <div onclick="openMyPage()" id="myPageButton" class="commonStyle">
                            <img id="myPageImage" class="img-fluid" th:src="@{/public/image/follow/female.png}">
                        </div>
                        <div onclick="openBag()" id="bagButton" class="commonStyle">
                            <img class="img-fluid" th:src="@{/public/image/follow/bag.png}">
                        </div>

                        <!-- modal -->

                        <div id="alertModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 5000;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: auto; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div class="modal-header text-white fw-bold py-1 px-1 border-0" style="font-size: 1rem;">
                                        알림
                                    </div>
                                    <div class="modal-body pb-1 text-center rounded" style="background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4);">
                                        <div id="alertContent" style="color: #81461A;">

                                        </div>
                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button id="alertCheckButton" class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">확인</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="alertWithCancelModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 5000;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: auto; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div class="modal-header text-white fw-bold py-1 px-1 border-0" style="font-size: 1rem;">
                                        알림
                                    </div>
                                    <div class="modal-body pb-1 text-center rounded" style="background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4);">
                                        <div id="alertWithCancelContent" style="color: #81461A;">

                                        </div>
                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button class="d-grid btn py-0 px-4 text-white" style="background: #a6a6a6; border: 2px solid rgba(91, 91, 91, 0.4); font-size: 0.9rem;" data-bs-dismiss="modal">취소</button>
                                            <!-- <button id="alertWithCancelCheckButton" class="d-grid btn py-0 px-4 text-white" style="background: #5D81B7; border: 2px solid rgba(78, 106, 150, 0.4);">확인</button> -->
                                            <button id="alertWithCancelCheckButton" class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">확인</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="alertItemModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 4500;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: auto; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div class="modal-header text-white fw-bold py-1 px-1 border-0" style="font-size: 1rem;">
                                        아이템
                                    </div>
                                    <div class="modal-body pb-1 text-center rounded" style="background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4);">
                                        <div id="itemBox" class="d-flex justify-content-center" style="color: #81461A;">

                                        </div>
                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;" data-bs-dismiss="modal">닫기</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="alertItemMessageModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 4500;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: 80%; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div class="modal-header text-white fw-bold py-1 px-1 border-0" style="font-size: 1rem;">
                                        메세지
                                    </div>
                                    <div class="modal-body pb-1 text-center rounded" style="background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4);">
                                        <div style="color: #81461A;">
                                            <div class="row">
                                                <div class="col" style="font-size: 0.8rem;">
                                                    당신의 마음이 닿기를
                                                </div>
                                            </div>
                                            <div class="row mt-2">
                                                <div class="col">
                                                    <textarea id="sendItemMessageContent" class="form-control py-1" style="font-size: 0.8rem; resize: none;" max="500"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button class="d-grid btn py-0 px-4 text-white" style="background: #a6a6a6; border: 2px solid rgba(91, 91, 91, 0.4); font-size: 0.9rem;" data-bs-dismiss="modal">취소</button>
                                            <button id="sendItemMessageButton" class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">보내기</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="alertCollectMessageModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 4500;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: 80%; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div class="modal-header text-white fw-bold py-1 px-1 border-0" style="font-size: 1rem;">
                                        메세지
                                    </div>
                                    <div class="modal-body pb-1 text-center rounded" style="background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4);">
                                        <div style="color: #81461A;">
                                            <div class="row">
                                                <div class="col" style="font-size: 0.8rem;">
                                                    너에게 한 발자국 한 발자국 가고 있어
                                                </div>
                                            </div>
                                            <div class="row mt-2">
                                                <div id="sendCollectionMessageContentHidden" class="col text-center text-dark" style="font-size: 0.9rem;" hidden>

                                                </div>
                                                <div id="sendCollectionMessageContentTextareaHidden" class="col">
                                                    <textarea id="sendCollectMessageContent" class="form-control py-1" style="font-size: 0.8rem; resize: none;" max="500"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button class="btn py-0 px-4 text-white" style="background: #a6a6a6; border: 2px solid rgba(91, 91, 91, 0.4); font-size: 0.9rem;" data-bs-dismiss="modal">닫기</button>
                                            <button id="sendCollectMessageButton" class="btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">보내기</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="writeMoreInfoModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 4000;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: auto; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div class="modal-header text-white fw-bold py-1 px-1 border-0" style="font-size: 1rem;">
                                        <span>추가 정보 입력</span>
                                        <span id="writeBlank" class="text-end" style="font-size: 0.7rem;"></span>
                                    </div>
                                    <div class="modal-body pb-1 text-center rounded" style="background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4); color: #81461A;">
                                        
                                        <div class="input-group">
                                            <span class="my-auto">키&nbsp;&nbsp;</span>
                                            <input id="writeMoreInfoHeight" type="number" class="form-control py-0 text-end" style="font-size: 0.8rem; box-shadow: none;">
                                            <span class="my-auto">&nbsp;&nbsp;cm&nbsp;&nbsp;</span>
                                            <span class="my-auto">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                                            <span class="my-auto">&nbsp;&nbsp;몸무게&nbsp;&nbsp;</span>
                                            <input id="writeMoreInfoWeight" type="number" class="form-control py-0 text-end" style="font-size: 0.8rem; box-shadow: none;">
                                            <span class="my-auto">&nbsp;&nbsp;kg</span>
                                        </div>

                                        <div class="input-group mt-2">
                                            <span class="my-auto">혈액형&nbsp;&nbsp;</span>
                                            <select id="writeMoreInfoBloodType" class="form-select py-0 text-end" style="font-size: 0.8rem; box-shadow: none;">
                                                <option value="0" selected>선택</option>
                                                <option value="A">A</option>
                                                <option value="B">B</option>
                                                <option value="O">O</option>
                                                <option value="AB">AB</option>
                                            </select>
                                            <span class="my-auto">&nbsp;&nbsp;형&nbsp;&nbsp;</span>
                                            <span class="my-auto">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                                            <span class="my-auto">&nbsp;&nbsp;MBTI&nbsp;&nbsp;</span>
                                            <select id="writeMoreInfoMbtiType" class="form-select py-0 text-end rounded-0" style="font-size: 0.8rem; box-shadow: none;">
                                                <option value="0" selected>선택</option>
                                                <option value="ENTP">ENTP</option>
                                                <option value="ENTJ">ENTJ</option>
                                                <option value="ENFP">ENFP</option>
                                                <option value="ENFJ">ENFJ</option>
                                                <option value="ESTP">ESTP</option>
                                                <option value="ESTJ">ESTJ</option>
                                                <option value="ESFP">ESFP</option>
                                                <option value="ESFJ">ESFJ</option>
                                                <option value="INTP">INTP</option>
                                                <option value="INTJ">INTJ</option>
                                                <option value="INFP">INFP</option>
                                                <option value="INFJ">INFJ</option>
                                                <option value="ISTP">ISTP</option>
                                                <option value="ISTJ">ISTJ</option>
                                                <option value="ISFP">ISFP</option>
                                                <option value="ISFJ">ISFJ</option>
                                            </select>
                                        </div>

                                        <div class="input-group mt-2">
                                            <span class="my-auto">취미&nbsp;&nbsp;</span>
                                            <input id="writeMoreInfoHobby" type="text" class="form-control py-0" max="10" style="font-size: 0.8rem; box-shadow: none;">
                                            <span class="my-auto" style="font-size: 0.6rem;">&nbsp;&nbsp;10글자이내</span>
                                        </div>

                                        <div class="input-group mt-2">
                                            <span class="my-auto">음주여부&nbsp;&nbsp;</span>
                                            <input type="radio" name="isDrinking" id="yesDrinking" class="form-check-input writeMoreInfoDrinking" value="Y">
                                            <label class="form-check-label" for="yesDrinking">&nbsp;&nbsp;Y&nbsp;&nbsp;</label>
                                            <input type="radio" name="isDrinking" id="noDrinking" class="form-check-input writeMoreInfoDrinking" value="N" checked>
                                            <label class="form-check-label" for="noDrinking">&nbsp;&nbsp;N&nbsp;&nbsp;</label>
                                            <span class="my-auto">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                                            <span class="my-auto">&nbsp;&nbsp;흡연여부&nbsp;&nbsp;</span>
                                            <input type="radio" name="isSmoking" id="yesSmoking" class="form-check-input writeMoreInfoSmoking" value="Y">
                                            <label class="form-check-label" for="yesSmoking">&nbsp;&nbsp;Y&nbsp;&nbsp;</label>
                                            <input type="radio" name="isSmoking" id="noSmoking" class="form-check-input writeMoreInfoSmoking" value="N" checked>
                                            <label class="form-check-label" for="noSmoking">&nbsp;&nbsp;N&nbsp;&nbsp;</label>
                                        </div>

                                        <div class="input-group mt-2">
                                            <span class="my-auto">성적지향&nbsp;&nbsp;</span>
                                            <select id="writeMoreInfoPreference" class="form-select py-0 text-end rounded-0" style="font-size: 0.8rem; box-shadow: none;">
                                                <option value="0" selected>선택</option>
                                                <option value="L">이성애</option>
                                                <option value="B">게이</option>
                                                <option value="G">레즈비언</option>
                                                <option value="V">바이섹슈얼</option>
                                                <option value="A">에이섹슈얼</option>
                                                <option value="D">데미섹슈얼</option>
                                                <option value="P">팬섹슈얼</option>
                                                <option value="Q">퀘스처닝</option>
                                            </select>
                                        </div>

                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button class="d-grid btn py-0 px-4 text-white" style="background: #a6a6a6; border: 2px solid rgba(91, 91, 91, 0.4); font-size: 0.9rem;" data-bs-dismiss="modal">취소</button>
                                            <button onclick="saveMoreInfo()" class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">저장</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="writeTrackMarkModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 4000;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: 70%; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div class="modal-header text-white fw-bold py-1 px-1 border-0" style="font-size: 1rem;">
                                        체취 분사
                                    </div>
                                    <div class="modal-body pb-1 rounded" style="background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4);">

                                        <div class="row">
                                            <div class="col">
                                                <div class="row">
                                                    <div onclick="inputWriteTrackMarkImage()" onchange="previewWriteTrackMarkImage()" id="writeTrackMarkImageHere" class="col border rounded-pill mx-3 px-0" style="aspect-ratio: 16/9;">
                                                        <!-- hidden -->
                                                        <div id="writeTrackMarkNoimage" class="row text-center align-items-center" style="height: 100%;">
                                                            <div class="col">
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span class="material-symbols-outlined" style="color: #BFBFBF; font-size: 1.5rem;">
                                                                            add_photo_alternate
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col" style="color: #BFBFBF; font-size: 0.9rem;">
                                                                        이미지 추가
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        <input id="writeTrackMarkImage" type="file" accept="image/*" hidden>
                                                    </div>
                                                </div>
                                                <div class="row mt-3">
                                                    <div class="col">
                                                        <span class="material-symbols-outlined align-middle" style="font-size: 1rem;">
                                                            stylus_note
                                                        </span>
                                                        한줄글
                                                    </div>
                                                    <div class="col text-end my-auto" style="font-size: 0.65rem;">
                                                        50글자 이내
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col">
                                                        <textarea id="writeTrackMarkContent" class="form-control" rows="2" maxlength="50" placeholder="체취와 함께하는 흔적" style="font-size: 0.8rem; resize: none;"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button class="d-grid btn py-0 px-4 text-white" style="background: #a6a6a6; border: 2px solid rgba(91, 91, 91, 0.4); font-size: 0.9rem;" data-bs-dismiss="modal">취소</button>
                                            <button onclick="saveWriteTrackMarkInfo()" class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">저장</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="previewTrackMarkerModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 4000;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: 90%; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div class="modal-header text-white fw-bold py-1 px-1 border-0 d-inline" style="font-size: 1rem;">
                                        시향&nbsp;&nbsp;No. <span id="previewTrackMarkerPk">777</span>
                                    </div>
                                    <div class="modal-body pb-1 px-1 pt-2 rounded" style="background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4);">
                                        <div class="rounded-top px-3 py-2" style="width: 100%; border: 3px solid #C5A886;">
                                            <div class="row">
                                                <div class="col-3">
                                                    <div class="row">
                                                        <div class="col px-2">
                                                            <div id="previewTrackMarkerOuter" style="width: 100%; aspect-ratio: 1/1; border-radius: 50%;">
                                                                <div id="previewTrackMarkerImage" style="width: 90%; aspect-ratio: 1/1; border-radius: 50%; background: url('/public/image/follow/questionBlack.png') no-repeat center; background-size: cover; filter: opacity(85%);"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row mt-1">
                                                        <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                            <span id="previewTrackMarkerName">? ? ?</span>
                                                            <!-- 김아무 -->
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div id="previewTrackMarkerOpenRating" class="col text-center fw-bold px-0" style="font-size: 0.56rem;">
                                                            Lv ? ( ?? / ?? )
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col my-auto">
                                                    <div class="row">
                                                        <div class="col">
                                                            <div class="row">
                                                                <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    <span id="previewTrackMarkerHeight">? ? ?</span> cm
                                                                    <!-- 163 cm -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    키
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col-3">
                                                            <div class="row">
                                                                <div id="previewTrackMarkerGender" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ?
                                                                    <!-- 👱🏻‍♀️ -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    성별
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col">
                                                            <div class="row">
                                                                <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    <span id="previewTrackMarkerWeight">? ? ?</span> kg
                                                                    <!-- 50 kg -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    몸무게
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col">
                                                            <div class="row">
                                                                <div id="previewTrackMarkerMbtiType" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ? ? ?
                                                                    <!-- ISTJ -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    MBTI
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col">
                                                            <div class="row">
                                                                <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    <span id="previewTrackMarkerBloodType">? ?</span> 형
                                                                    <!-- B 형 -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    혈액형
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col">
                                                            <div class="row">
                                                                <div id="previewTrackMarkerDrinking" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ?
                                                                    <!-- N -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    음주여부
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col">
                                                            <div class="row">
                                                                <div id="previewTrackMarkerSmoking" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ?
                                                                    <!-- N -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    흡연여부
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col">
                                                            <div class="row">
                                                                <div id="previewTrackMarkerHobby" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ? ? ? ?
                                                                    <!-- 집에서 뒹굴거리기 -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    취미
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col">
                                                            <div class="row">
                                                                <div id="previewTrackMarkerPreference" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ? ? ? ?
                                                                    <!-- 게이 -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    성적지향
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row align-items-center">
                                                <div class="col-auto pe-0 text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                    멍스타 활동온도
                                                </div>
                                                <div class="col">
                                                    <div class="row align-items-center">
                                                        <div class="col">
                                                            <div class="progress" style="height: 0.5rem;">
                                                                <div id="previewTrackMarkerTemp" class="progress-bar rounded" style="background: #feb146; width: 36.5%;"></div>
                                                            </div>
                                                        </div>
                                                        <div class="col-auto ps-0 fw-bold text-end" style="font-size: 0.8rem; color: #000;">
                                                            <span id="previewTrackMarkerTempContent">36.5</span>℃
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="rounded-bottom px-3 py-5" style="width: 100%; background: #C5A886;">
                                            <div class="row justify-content-center">
                                                <div id="previewTrackMarkercoverdImage" style="aspect-ratio: 16/9;">
                                                    <div class="row text-center align-items-center" style="height: 100%;">
                                                        <div class="col">
                                                            <div class="row">
                                                                <div class="col" style="font-size: 0.9rem;">
                                                                    ? ? ?
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row justify-content-center mt-4">
                                                <div class="col-auto my-auto">
                                                    <div class="row">
                                                        <div class="col-auto">
                                                            <span class="material-symbols-outlined align-middle" style="font-size: 1rem;">
                                                                stylus_note
                                                            </span>
                                                            한줄글
                                                        </div>
                                                        <div class="col">
                                                            ?&nbsp;&nbsp;?&nbsp;&nbsp;?&nbsp;&nbsp;?&nbsp;&nbsp;?
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button class="d-grid btn py-0 px-4 text-white" style="background: #a6a6a6; border: 2px solid rgba(91, 91, 91, 0.4); font-size: 0.9rem;" data-bs-dismiss="modal">취소</button>
                                            <button id="collectTrackMarkerButton" class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">수집</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="trackMarkerModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 4000;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: 90%; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div class="modal-header text-white fw-bold py-1 px-1 border-0 d-inline" style="font-size: 1rem;">
                                        주섬주섬
                                    </div>
                                    <div class="modal-body pb-1 pt-2 px-2 rounded" style="background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4);">
                                        <div class="row">
                                            <div class="col">
                                                <div class="row">
                                                    <div class="col-auto pe-1">
                                                        <div id="trackMarkerOuter" style="width: 2rem; height: 2rem; border-radius: 50%;">
                                                            <div id="trackMarkerInner" style="width: 1.6rem; height: 1.6rem; border-radius: 50%; background: url('/public/image/follow/questionBlack.png') no-repeat center; background-size: cover; filter: opacity(85%);"></div>
                                                        </div>
                                                    </div>
                                                    <div id="trackMarkerPk" class="col ps-0 align-self-end" style="font-size: 0.8rem;">
                                                        No. 777
                                                    </div>
                                                    <div class="col align-self-end">
                                                        <span id="trackMarkerHeartIcon" class="material-symbols-rounded d-flex float-end" style="font-size: 1.2rem;">
                                                            favorite
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mt-2">
                                            <div id="trackMarkerImage" class="col rounded-pill mx-3 px-0" style="aspect-ratio: 16/9; border: 2px solid #81461A;">
                                            </div>
                                        </div>
                                        <div class="row mt-2">
                                            <div class="col">
                                                <span class="material-symbols-outlined align-middle" style="font-size: 1rem;">
                                                    stylus_note
                                                </span>
                                                한줄글
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div id="trackMarkerContent" class="col">
                                                너의 눈동자에 치얼스★
                                            </div>
                                        </div>
                                        <div class="row mt-3">
                                            <div class="col-auto pe-0">
                                                <span class="material-symbols-rounded align-middle" style="font-size: 1rem;">
                                                    volunteer_activism
                                                </span>
                                                관심을 표현하세요
                                            </div>
                                        </div>
                                        <div class="row mt-1">
                                            <div id="trackMarkerPreviewCommentContent" class="col"></div>
                                        </div>
                                        <div id="trackMarkerCommentHidden" class="row mt-1">
                                            <div class="col">
                                                <div class="input-group">
                                                    <input id="trackMarkerCommentContent" type="text" class="form-control py-0 rounded" style="font-size: 0.8rem; box-shadow: none;">&nbsp;&nbsp;
                                                    <button id="trackMarkerCommentButton" class="btn py-1 rounded text-white" style="font-size: 0.8rem; background: #81461A; border: 2.5px solid #CEB597;">저장하기</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;" data-bs-dismiss="modal">확인</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="collectionModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 4000;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content border-0" style="position: relative; background: transparent; padding-left: 1rem; padding-right: 1rem;">
                                    <div style="position: absolute; width: 12rem; height: 3rem; z-index: 1; top: -1.4rem;">
                                        <img class="img-fluid" th:src="@{/public/image/follow/banner.png}" style="width: 12rem; height: 3rem;">
                                    </div>
                                    <span class="text-white fw-bold" style="position: absolute; z-index: 1; font-size: 1rem; left: 5.5rem; top: -0.7rem; color: #f3ecdd;">내 가 방</span>
                                    <button onclick="hideCollectionModal()" class="btn px-0 py-0 float-end d-grid align-items-center justify-content-center" style="position: absolute; z-index: 1; width: 1.7rem; height: 1.7rem; right: 0.7rem; top: -0.4rem; border-radius: 50%; background: #E0C9A9; border: 1px solid #7D3A05;">
                                        <div style="border-radius: 50%; background: #ac5e23; width: 1.3rem; height: 1.3rem; border: 1px solid #7D3A05;">
                                            <span id="collectionModalCloseIcon" class="material-symbols-rounded" style="position: absolute; font-size: 1.2rem; left: 0.2rem; color: #f3ecdd;">
                                                close
                                            </span>
                                        </div>
                                    </button>
                                    <div class="modal-body rounded" style="padding: 0.2rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                        <div id="collectionModalHeight" class="rounded" style="padding: 0.5rem; padding-top: 1rem; background: #E0C9A9; border: 2px solid rgba(241, 194, 92, 0.4);">
                                            <div class="row">
                                                <div class="col">
                                                    <span class="ps-1 pe-5 rounded" style="color: #81461A; background: #CEB597; font-size: 0.9rem;">&nbsp;꾸욱: <span id="collectionLikeCnt">0</span></span>
                                                </div>
                                                <!-- <div class="col text-end">
                                                    <span class="ps-1 pe-4 rounded" style="color: #81461A; background: #CEB597; font-size: 0.9rem;">&nbsp;등급순 &ShortDownArrow;</span>
                                                </div> -->
                                            </div>
                                            <div id="collectionListBoxHeight" class="rounded mt-2 overflow-auto" style="background: #C5A886; border: 1px solid #f3ecdd;">

                                                <div id="collectionLikeListBox" class="row row-cols-3 mx-auto py-0" style="width: 100%;">

                                                    

                                                </div>

                                                <hr class="mx-2 mt-3 mb-0" style="border: 2px solid #81461A; border-style: dashed;">
                                                <hr class="mx-2 mt-1 mb-0" style="border: 2px solid #81461A; border-style: dashed;">

                                                <div id="collectionListBox" class="row row-cols-3 mx-auto py-2" style="width: 100%;">



                                                </div>
                                                
                                            </div>

                                            <div class="modal-footer pb-0 border-0 justify-content-center">
                                                <!-- <button class="d-grid btn py-0 px-4 text-white" style="background: #4684d0; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">등급순</button>
                                                <button class="d-grid btn py-0 px-4 text-white" style="background: #5d96dc; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">이름순</button>
                                                <button class="d-grid btn py-0 px-4 text-white" style="background: #6fa3e3; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">수집도순</button> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="collectionDetailModal" class="modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 4100;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content border-0" style="position: relative; background: transparent; padding-left: 1rem; padding-right: 1rem;">
                                    <div style="position: absolute; width: 12rem; height: 3rem; z-index: 1; top: -1.4rem;">
                                        <img class="img-fluid" th:src="@{/public/image/follow/banner.png}" style="width: 12rem; height: 3rem;">
                                    </div>
                                    <span class="text-white fw-bold" style="position: absolute; z-index: 1; font-size: 1rem; left: 5rem; top: -0.7rem; color: #f3ecdd;">상 세 정 보</span>
                                    <button type="button" class="btn px-0 py-0 float-end d-grid align-items-center justify-content-center" onclick="hideCollectionDetailModal()" style="position: absolute; z-index: 1; width: 1.7rem; height: 1.7rem; right: 0.7rem; top: -0.4rem; border-radius: 50%; background: #E0C9A9; border: 1px solid #7D3A05;">
                                        <div style="border-radius: 50%; background: #ac5e23; width: 1.3rem; height: 1.3rem; border: 1px solid #7D3A05;">
                                            <span id="collectionModalCloseIcon" class="material-symbols-rounded" style="position: absolute; font-size: 1.2rem; left: 0.2rem; color: #f3ecdd;">
                                                close
                                            </span>
                                        </div>
                                    </button>
                                    <div class="modal-body rounded" style="padding: 0.2rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                        <div id="collectionDetailModalHeight" class="rounded" style="padding: 0.5rem; padding-top: 1.3rem; background: #E0C9A9; border: 2px solid rgba(241, 194, 92, 0.4);">

                                            <div id="collectionDetailInfoHeight">
                                                <div class="rounded px-3 py-2" style="width: 100%;">
                                                    <div class="row">
                                                        <div class="col-3">
                                                            <div class="row">
                                                                <div class="col px-2">
                                                                    <div id="collectionDetailOuter" style="width: 100%; aspect-ratio: 1/1; border-radius: 50%;">
                                                                        <div id="collectionDetailImage" style="width: 89%; aspect-ratio: 1/1; border-radius: 50%; background: url('/public/image/follow/questionBlack.png') no-repeat center; background-size: cover; filter: opacity(85%);"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row mt-1">
                                                                <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    <span id="collectionDetailName">? ? ?</span>
                                                                    <!-- 김아무 -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div id="collectionDetailOpenRating" class="col text-center fw-bold px-0" style="font-size: 0.56rem;">
                                                                    Lv ? ( ?? / ?? )
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col my-auto">
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            <span id="collectionDetailHeight">? ? ?</span> cm
                                                                            <!-- 163 cm -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            키
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                                <div class="col-3">
                                                                    <div class="row">
                                                                        <div id="collectionDetailGender" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            ? ?
                                                                            <!-- 👱🏻‍♀️ -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            성별
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            <span id="collectionDetailWeight">? ? ?</span> kg
                                                                            <!-- 50 kg -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            몸무게
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div id="collectionDetailMbtiType" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            ? ? ? ?
                                                                            <!-- ISTJ -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            MBTI
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            <span id="collectionDetailBloodType">? ?</span> 형
                                                                            <!-- B 형 -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            혈액형
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div id="collectionDetailDrinking" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            ? ?
                                                                            <!-- N -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            음주여부
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div id="collectionDetailSmoking" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            ? ?
                                                                            <!-- N -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            흡연여부
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div id="collectionDetailHobby" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            ? ? ? ? ?
                                                                            <!-- 집에서 뒹굴거리기 -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            취미
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div id="collectionDetailPreference" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            ? ? ? ? ?
                                                                            <!-- 게이 -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            성적지향
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row align-items-center">
                                                        <div class="col-auto pe-0 text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                            멍스타 활동온도
                                                        </div>
                                                        <div class="col">
                                                            <div class="row align-items-center">
                                                                <div class="col">
                                                                    <div class="progress" style="height: 0.5rem;">
                                                                        <div id="collectionDetailTemp" class="progress-bar rounded" style="background: #feb146; width: 36.5%;"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-auto ps-0 fw-bold text-end" style="font-size: 0.8rem; color: #000;">
                                                                    <span id="collectionDetailTempContent">36.5</span>℃
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <div style="position: relative;">
                                                    <hr class="my-2" style="color: #81461A;">
                                                    <span class="px-3" style="position: absolute; top: -0.65rem; left: calc(50% - 2rem); font-size: 0.9rem; background: #E0C9A9; color: #81461A;">열린기능</span>
                                                </div>
    
                                                <div class="row py-2 justify-content-center">
                                                    <div class="col-auto d-grid justify-content-center px-2">
                                                        <button id="collectionDetailHeartButton" class="btn text-white py-0" style="background: #81461A;">
                                                            <span id="collectionDetailHeartIcon" class="material-symbols-rounded" style="font-size: 0.8rem;">
                                                                favorite
                                                            </span>
                                                        </button>
                                                    </div>
                                                    <div class="col-auto d-grid justify-content-center px-2">
                                                        <button id="collectionDetailMessageButton" class="btn text-white py-0" style="background: #81461A; font-size: 0.8rem;" disabled>
                                                            메세지
                                                        </button>
                                                    </div>
                                                    <div class="col-auto d-grid justify-content-center px-2">
                                                        <button id="collectionDetailMstarButton" class="btn text-white py-0" style="background: #81461A; font-size: 0.8rem;" disabled>
                                                            Mstar
                                                        </button>
                                                    </div>
                                                    <div class="col-auto d-grid justify-content-center px-2">
                                                        <button id="collectionDetailWalkRequestButton" class="btn text-white py-0" style="background: #81461A; font-size: 0.8rem;" disabled>
                                                            산책 신청
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>

                                            <div style="position: relative;">
                                                <hr class="my-2" style="color: #81461A;">
                                                <span class="px-3" style="position: absolute; top: -0.65rem; left: calc(50% - 2rem); font-size: 0.9rem; background: #E0C9A9; color: #81461A;">체취도감</span>
                                            </div>

                                            <!-- ... -->
                                            <div class="row mt-2">
                                                <div class="col fw-bold">전체 카드목록</div>
                                            </div>
                                            <div class="row">
                                                <div class="col text-seconday" style="font-size: 0.8em;">다른 사람들의 카드를 수집해 봐요!!</div>
                                            </div>

                                            <div id="collectionDetailModalCardHeight" class="rounded mt-1" style="background: #C5A886;">
                                                <div class="overflow-auto px-3" style="height: 100%;">
                                                    <div id="collectionDetailCardListBox" class="row row-cols-4 mt-1 pb-2">

                                                        
                                                        <!-- <div class="col">
                                                            <div class="row">
                                                                <div class="col-3">
                                                                    <img src="/public/image/commons/list1.jpeg" class="img-fluid" style="height: 100%;">
                                                                </div>
                                                                <div class="col">
        
                                                                    <div class="row">
                                                                        <div  style="font-size: 0.8em;" class="col fw-bold">no.3</div>
                                                                    </div>
                
                                                                    <div class="row">
                                                                        <div class="col">
                                                                            <span class="text-secondary" style="font-size: 0.8em;">수집</span>
                                                                            <span class="text-danger fw-bold">3</span><span class="text-secondary" style="font-size: 0.8em;">회</span>
                                                                        </div>
                                                                        <div class="col">
                                                                            <span class="text-secondary" style="font-size: 0.8em;">댓글</span>
                                                                            <span class="text-danger fw-bold">7</span><span class="text-secondary" style="font-size: 0.8em;">개</span>
                                                                        </div>
                                                                        <div class="col">
                                                                            <span class="text-secondary" style="font-size: 0.8em;">추행</span>
                                                                            <span class="text-danger fw-bold">2</span><span class="text-secondary" style="font-size: 0.8em;">회</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div style="font-size: 0.8em;" class="col text-secondary">2024-01-03</div>
                                                                        <div style="font-size: 0.8em;" class="col text-success">수집 완료</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div> -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="collectionCardModal" class="modal fade" tabindex="-1" style="position: absolute; z-index: 4200;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content border-0" style="position: relative; background: transparent; margin-left: 2.5rem; margin-right: 2.5rem;">
                                    <div class="modal-body rounded" style="border: 1px solid #81461A; padding: 0;">
                                        <div class="rounded" style="border: 2px solid #f3ecdd;">
                                            <div id="collectionCardModalHeight" class="rounded px-2" style="width: 100%; background: rgb(45, 23, 11, 0.95);">
                                                <div class="row px-2" style="color: #f3ecdd;">
                                                    <div class="col">
                                                        <div class="row">
                                                            <div id="collectionCardInfoHeight" class="col">
                                                                <div class="row mt-2">
                                                                    <div class="col" style="font-size: 0.9rem;">
                                                                        No.<span id="collectionCardLogPk">13</span>
                                                                    </div>
                                                                    <div class="col text-end">
                                                                        <span style="font-size: 0.7rem; color: #ce742f;">수집일</span>
                                                                        &nbsp;<span id="collectionCardCollectDate" style="font-size: 0.9rem;">2024.07.07</span>
                                                                    </div>
                                                                </div>
                                                                <div class="row mt-2">
                                                                    <div class="col">
                                                                        <div id="collectionCardImage" class="rounded" style="width: 100%; aspect-ratio: 16/9; background-size: cover;"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="row mt-3">
                                                                    <div class="col" style="color: #ce742f;; font-size: 0.8em;">
                                                                        체취에 어울리는 흔적
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span id="collectionCardContent">이쁜 벚꽃과 귀여운 강아지와 함께하는 기분 좋은 하루~</span>
                                                                        &nbsp;&nbsp;<span id="collectionCardDate" class="text-secondary" style="font-size: 0.7rem;">2024.07.01</span>
                                                                    </div>
                                                                </div>
                                                                <div class="row mt-2">
                                                                    <div class="col" style="color: #ce742f;; font-size: 0.8em;">
                                                                        타인의 집계
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span style="font-size: 0.8em;" class="text-secondary">수집</span>
                                                                        <span id="collectionCardCollectCount">10</span>
                                                                        <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                                    </div>
                                                                    <div class="col">
                                                                        <span style="font-size: 0.8em;" class="text-secondary">관심</span>
                                                                        <span id="collectionCardCommentCount">10</span>
                                                                        <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                                    </div>
                                                                    <div class="col">
                                                                        <span style="font-size: 0.8em;" class="text-secondary">추행</span>
                                                                        <span id="collectionCardTraceCount">10</span>
                                                                        <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                                    </div>
                                                                </div>
                                                                <div class="row mt-2">
                                                                    <div class="col" style="color: #ce742f;; font-size: 0.8em;">
                                                                        누군가의 관심표현
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div id="collectionCardCommentHeight" class="collectionCardCommentBox row row-cols-1 overflow-scroll mt-1">

                                                            

                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- <div class="row" style="color: #f3ecdd;">
                                                    <div class="col">
                                                        <div class="row py-2">
                                                            <div class="col">no.13</div>
                                                            <div class="col-auto ms-auto">
                                                                <span style="font-size: 0.8em;" class="text-secondary">수집일</span>
                                                                <span>2024.07.07</span>
                                                            </div>
                                                        </div>                                                       
                                                        <div class="row">
                                                            <div class="col">
                                                                <img src="/public/image/commons/list2.jpeg" class="img-fluid" style="width: 100%; aspect-ratio: 16/9;" >
                                                            </div>
                                                        </div>                                                       

                                                        <div class="row">
                                                            <div class="col">
                                                                <span style="color: #ce742f;; font-size: 0.8em;">당신의 하루는 어땠나요?</span>
                                                            </div>
                                                        </div>                                                       


                                                        <div class="row">
                                                            <div class="col">
                                                                <span >오늘 하루 너무 즐거운 하루였다... 근데 얼빵이는 어딧을까...ㅠㅠ</span>
                                                                <span style="font-size: 0.8em;" class="text-secondary">(2024.05.05)</span>
                                                            </div>
                                                        </div>                                                       


                                                        <div class="row mt-2">
                                                            <div class="col">
                                                                <span style="color: #ce742f;; font-size: 0.8em;">정보 어쩌고.. 저쩌고..</span>
                                                            </div>
                                                        </div>                                                       

                                                        <div class="row">
                                                            <div class="col">
                                                                <span style="font-size: 0.8em;" class="text-secondary">수집</span>
                                                                <span>10</span>
                                                                <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                            </div>
                                                            <div class="col">
                                                                <span style="font-size: 0.8em;" class="text-secondary">관심</span>
                                                                <span>17</span>
                                                                <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                            </div>
                                                            <div class="col">
                                                                <span style="font-size: 0.8em;" class="text-secondary">추행</span>
                                                                <span>7</span>
                                                                <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                            </div>
                                                        </div>                                                       





                                                        <div class="row mt-2">
                                                            <div class="col">
                                                                <span style="color: #ce742f;; font-size: 0.8em;">관심을 나타는 글들이여요...</span>
                                                            </div>
                                                        </div>                                                       

                                                        <div class="row row-cols-1 overflow-auto" style="height: 5rem;">
                                                            
                                                            <div class="col">
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span style="color: #b2db5e;">얼빵이</span>
                                                                    </div>
                                                                    <div class="col">
                                                                        <span style="font-size: 0.8em;" class="text-secondary">(2024.05.05)</span>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span>저 여기 있어요....!!!</span>        
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col">
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span style="color: #b2db5e;">얼빵이</span>
                                                                    </div>
                                                                    <div class="col">
                                                                        <span style="font-size: 0.8em;" class="text-secondary">(2024.05.05)</span>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span>저 여기 있어요....!!!</span>        
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col">
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span style="color: #b2db5e;">얼빵이어딧나</span>
                                                                    </div>
                                                                    <div class="col-auto ms-auto">
                                                                        <span style="font-size: 0.8em;" class="text-secondary">(2024.05.05)</span>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span>저 여기 있어요....!!!저 여기 있어요....!!!저 여기 있어요....!!!저 여기 있어요....!!!저 여기 있어요....!!!저 여기 있어요....!!!저 여기 있어요....!!!저 여기 있어요....!!!저 여기 있어요....!!!저 여기 있어요....!!!저 여기 있어요....!!!저 여기 있어요....!!!저 여기 있어요....!!!저 여기 있어요....!!!</span>        
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col">
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span style="color: #b2db5e;">얼빵이으아아</span>
                                                                    </div>
                                                                    <div class="col">
                                                                        <span style="font-size: 0.8em;" class="text-secondary">(2024.05.05)</span>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span>저 여기 있어요....!!!저 여기 있어요....!!!저 여기 있어요....!!!저 여기 있어요....!!!</span>        
                                                                    </div>
                                                                </div>
                                                            </div>


                                                        </div>


                                                    </div>
                                                </div> -->

                                            
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="myPageModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 4000;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content border-0" style="position: relative; background: transparent; padding-left: 1rem; padding-right: 1rem;">
                                    <div style="position: absolute; width: 12rem; height: 3rem; z-index: 1; top: -1.4rem;">
                                        <img class="img-fluid" th:src="@{/public/image/follow/banner.png}" style="width: 12rem; height: 3rem;">
                                    </div>
                                    <span class="text-white fw-bold" style="position: absolute; z-index: 1; font-size: 1rem; left: 5.5rem; top: -0.7rem; color: #f3ecdd;">내 정 보</span>
                                    <button onclick="hideMyPageModal()" class="btn px-0 py-0 float-end d-grid align-items-center justify-content-center" style="position: absolute; z-index: 1; width: 1.7rem; height: 1.7rem; right: 0.7rem; top: -0.4rem; border-radius: 50%; background: #E0C9A9; border: 1px solid #7D3A05;">
                                        <div style="border-radius: 50%; background: #ac5e23; width: 1.3rem; height: 1.3rem; border: 1px solid #7D3A05;">
                                            <span id="collectionModalCloseIcon" class="material-symbols-rounded" style="position: absolute; font-size: 1.2rem; left: 0.2rem; color: #f3ecdd;">
                                                close
                                            </span>
                                        </div>
                                    </button>
                                    <div class="modal-body rounded" style="padding: 0.2rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                        <div id="myPageModalHeight" class="rounded" style="padding: 0.5rem; padding-top: 3.5rem; background:#E0C9A9; border: 2px solid rgba(241, 194, 92, 0.4);">
                                            <div class="rounded" style="position: relative; background: #C5A886; height: 11rem; border: 1px solid #f3ecdd;">
                                                <div class="d-flex gap-2 justify-content-end" style="position: absolute; left: 5.2rem; top: -1.7rem;">
                                                    <button id="myPageTrackButton" class="btn text-white py-0" style="background: #81461A; font-size: 0.8rem;">내 체취 / 흔적</button>
                                                    <button onclick="showAchievementModal()" class="btn text-white py-0" style="background: #81461A; font-size: 0.8rem;">업적</button>
                                                </div>
                                                <div class="d-grid align-items-center justify-content-center" style="position: absolute; width: 4rem; height: 4rem; top: -2rem; left: 1rem; border-radius: 50%; background: #81461A;">
                                                    <div style="width: 3.5rem; height: 3.5rem; border-radius: 50%; background: #f3ecdd;">
                                                        <div id="myPageModalImage" style="width: 3.5rem; height: 3.5rem; border-radius: 50%;"></div>
                                                    </div>
                                                </div>
                                                <div style="width: 100%;">
                                                    <div class="row" style="padding-left: 6rem; margin-top: 0.8rem;">
                                                        <div class="col fw-bold" style="font-size: 0.8rem;">
                                                            <span class="text-body-tertiary" style="font-size: 0.6rem;">이름</span>&nbsp;&nbsp;
                                                            <span id="myPageName">? ? ?</span>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="margin-top: 0.8rem;">
                                                        <div class="col">
                                                            <div class="row">
                                                                <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    <span id="myPageHeight">? ? ?</span> cm
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    키
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col-3">
                                                            <div class="row">
                                                                <div id="myPageGender" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ?
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    성별
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col">
                                                            <div class="row">
                                                                <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    <span id="myPageWeight">? ? ?</span> kg
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    몸무게
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col">
                                                            <div class="row">
                                                                <div id="myPageMbtiType" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ? ? ?
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    MBTI
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col">
                                                            <div class="row">
                                                                <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    <span id="myPageBloodType">? ?</span> 형
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    혈액형
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col">
                                                            <div class="row">
                                                                <div id="myPageDrinking" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ?
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    음주여부
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col">
                                                            <div class="row">
                                                                <div id="myPageSmoking" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ?
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    흡연여부
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col">
                                                            <div class="row">
                                                                <div id="myPageHobby" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ? ? ? ?
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    취미
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col">
                                                            <div class="row">
                                                                <div id="myPagePreference" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ? ? ? ?
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    성적지향
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row align-items-center px-2">
                                                        <div class="col-auto pe-0 text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                            멍스타 활동온도
                                                        </div>
                                                        <div class="col">
                                                            <div class="row align-items-center">
                                                                <div class="col">
                                                                    <div class="progress" style="height: 0.5rem;">
                                                                        <div id="mypageTemp" class="progress-bar rounded" style="background: #feb146; width: 36.5%;"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-auto ps-0 fw-bold text-end" style="font-size: 0.8rem; color: #000;">
                                                                    <span id="myPageTempContent">36.5</span>℃
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div style="position: relative;">
                                                <hr style="color: #81461A;">
                                                <span class="px-1" style="position: absolute; top: -0.65rem; left: calc(50% - 2.5rem); font-size: 0.9rem; background: #E0C9A9; color: #81461A;">내가 당한 짓</span>
                                            </div>
                                            <div class="row px-4 py-1">
                                                <div class="col">
                                                    <div class="row">
                                                        <div class="col text-center px-0" style="font-size: 0.7rem; color: #980000;">
                                                            <span class="material-symbols-rounded" style="font-variation-settings: 'FILL' 1;">
                                                                footprint
                                                            </span>
                                                            <span>추행</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            <span id="myPageSombodyTraceCount" class="fw-bold text-dark" style="font-size: 1rem;">4</span>
                                                            <span class="text-secondary">회</span>
                                                        </div>
                                                        <div class="col text-center px-0" style="font-size: 0.8rem; color: #980000;">
                                                            <span class="material-symbols-rounded" style="font-variation-settings: 'FILL' 1;">
                                                                wash
                                                            </span>
                                                            <span>착취</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            <span id="myPageSombodyCollectCount" class="fw-bold text-dark" style="font-size: 1rem;">17</span>
                                                            <span class="text-secondary">회</span>
                                                        </div>
                                                    </div>
                                                    <div class="row mt-1">
                                                        <div class="col text-center px-0" style="font-size: 0.8rem; color: #980000;">
                                                            <span class="material-symbols-rounded" style="font-variation-settings: 'FILL' 1;">
                                                                favorite
                                                            </span>
                                                            <span>꾸욱</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            <span id="myPageSombodyLikeCount" class="fw-bold text-dark" style="font-size: 1rem;">40</span>
                                                            <span class="text-secondary">회</span>
                                                        </div>
                                                        <div class="col text-center px-0" style="font-size: 0.8rem; color: #980000;">
                                                            <span class="material-symbols-rounded" style="font-variation-settings: 'FILL' 1;">
                                                                visibility
                                                            </span>
                                                            <span>관심</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            <span id="myPageSombodyCommentCount" class="fw-bold text-dark" style="font-size: 1rem;">100</span>
                                                            <span class="text-secondary">회</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div style="position: relative;">
                                                <hr style="color: #81461A;">
                                                <span class="px-1" style="position: absolute; top: -0.65rem; left: calc(50% - 2rem); font-size: 0.9rem; background: #E0C9A9; color: #81461A;">내가 한 짓</span>
                                            </div>
                                            <div class="row px-4 py-1">
                                                <div class="col">
                                                    <div class="row">
                                                        <div class="col text-center px-0" style="font-size: 0.7rem; color: #980000;">
                                                            <span class="material-symbols-rounded">
                                                                footprint
                                                            </span>
                                                            <span>추행</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            <span id="myPageMyTraceCount" class="fw-bold text-dark" style="font-size: 1rem;">4</span>
                                                            <span class="text-secondary">회</span>
                                                        </div>
                                                        <div class="col text-center px-0" style="font-size: 0.8rem; color: #980000;">
                                                            <span class="material-symbols-rounded">
                                                                wash
                                                            </span>
                                                            <span>착취</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            <span id="myPageMyCollectCount" class="fw-bold text-dark" style="font-size: 1rem;">17</span>
                                                            <span class="text-secondary">회</span>
                                                        </div>
                                                    </div>
                                                    <div class="row mt-1">
                                                        <div class="col text-center px-0" style="font-size: 0.8rem; color: #980000;">
                                                            <span class="material-symbols-rounded">
                                                                favorite
                                                            </span>
                                                            <span>꾸욱</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            <span id="myPageMyLikeCount" class="fw-bold text-dark" style="font-size: 1rem;">40</span>
                                                            <span class="text-secondary">회</span>
                                                        </div>
                                                        <div class="col text-center px-0" style="font-size: 0.8rem; color: #980000;">
                                                            <span class="material-symbols-rounded">
                                                                visibility
                                                            </span>
                                                            <span>관심</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            <span id="myPageMyCommentCount" class="fw-bold text-dark" style="font-size: 1rem;">100</span>
                                                            <span class="text-secondary">회</span>
                                                        </div>
                                                    </div>
                                                    <div class="row mt-2">
                                                        <div class="col text-center px-0" style="font-size: 0.8rem; color: #980000;">
                                                            <span class="material-symbols-rounded">
                                                                sentiment_very_satisfied
                                                            </span>
                                                            <span>유혹</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            <span id="myPageMyTrackCount" class="fw-bold text-dark" style="font-size: 1rem;">126</span>
                                                            <span class="text-secondary">회</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- <div class="row">
                                                <div class="col">
                                                    <div style="position: relative;">
                                                        <hr style="color: #81461A;">
                                                        <span class="px-1" style="position: absolute; top: -0.65rem; left: calc(50% - 1.5rem); font-size: 0.9rem; background: #E0C9A9; color: #81461A;">내가 당한 짓</span>
                                                    </div>

                                                    <div class="row text-start row-cols-1">
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">추행</span>
                                                            <span >4</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                        </div>
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">착취</span>
                                                            <span >217</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                        </div>
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">꾸욱</span>
                                                            <span >8</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                        </div>
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">관심</span>
                                                            <span >8</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                        </div>
                                                    </div>
    
                                                </div>
                                                <div class="col">
                                                    <div style="position: relative;">
                                                        <hr style="color: #81461A;">
                                                        <span class="px-1" style="position: absolute; top: -0.65rem; left: calc(50% - 1.5rem); font-size: 0.9rem; background: #E0C9A9; color: #81461A;">내가 한 짓</span>
                                                    </div>
    
                                                    <div class="row text-start row-cols-1">
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">추행</span>
                                                            <span >4</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                        </div>
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">착취</span>
                                                            <span >217</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                        </div>
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">꾸욱</span>
                                                            <span >8</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                        </div>
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">관심</span>
                                                            <span >8</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                        </div>
                                                    </div>

                                                    <div class="row text-center">
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">유혹</span>
                                                            <span >17</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                        </div>
                                                    </div>
    
    

                                                </div>
                                            </div> -->

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="myTrackModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 4100;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content border-0" style="position: relative; background: transparent; padding-left: 1rem; padding-right: 1rem;">
                                    <div style="position: absolute; width: 12rem; height: 3rem; z-index: 1; top: -1.4rem;">
                                        <img class="img-fluid" th:src="@{/public/image/follow/banner.png}" style="width: 12rem; height: 3rem;">
                                    </div>
                                    <span class="text-white fw-bold" style="position: absolute; z-index: 1; font-size: 1rem; left: 4.5rem; top: -0.7rem; color: #f3ecdd;">내 체취 / 흔적</span>
                                    <button type="button" class="btn px-0 py-0 float-end d-grid align-items-center justify-content-center" data-bs-dismiss="modal" style="position: absolute; z-index: 1; width: 1.7rem; height: 1.7rem; right: 0.7rem; top: -0.4rem; border-radius: 50%; background: #E0C9A9; border: 1px solid #7D3A05;">
                                        <div style="border-radius: 50%; background: #ac5e23; width: 1.3rem; height: 1.3rem; border: 1px solid #7D3A05;">
                                            <span id="collectionModalCloseIcon" class="material-symbols-rounded" style="position: absolute; font-size: 1.2rem; left: 0.2rem; color: #f3ecdd;">
                                                close
                                            </span>
                                        </div>
                                    </button>
                                    <div class="modal-body rounded" style="padding: 0.2rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                        <div id="myTrackModalHeight" class="rounded" style="padding: 0.5rem; padding-top: 1rem; background:#E0C9A9; border: 2px solid rgba(241, 194, 92, 0.4);">
                                            <div class="row">
                                                <div class="col">
                                                    <span class="ps-1 pe-5 rounded" style="color: #81461A; background: #CEB597; font-size: 0.9rem;">&nbsp;전체: <span id="myTrackCnt">0</span></span>
                                                </div>
                                            </div>
                                            <div class="rounded mt-2" style="background: #C5A886; height: 27rem;">
                                                <div class="overflow-auto px-3" style="height: 100%;">
                                                    <div id="myTrackListBox" class="row row-cols-4 mt-1 pb-2">

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="myTrackCardModal" class="modal fade" tabindex="-1" style="position: absolute; z-index: 4200;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content border-0" style="position: relative; background: transparent; margin-left: 2.5rem; margin-right: 2.5rem;">
                                    <div class="modal-body rounded" style="border: 1px solid #81461A; padding: 0;">
                                        <div class="rounded" style="border: 2px solid #f3ecdd;">
                                            <div id="myTrackCardModalHeight" class="rounded px-2" style="width: 100%; background: rgb(45, 23, 11, 0.95);">
                                                <div class="row px-2" style="color: #f3ecdd;">
                                                    <div class="col">
                                                        <div class="row">
                                                            <div id="myTrackCardInfoHeight" class="col">
                                                                <div class="row mt-2">
                                                                    <div class="col" style="font-size: 0.9rem;">
                                                                        No.<span id="myTrackCardLogPk">13</span>
                                                                    </div>
                                                                </div>
                                                                <div class="row mt-2">
                                                                    <div class="col">
                                                                        <div id="myTrackCardImage" class="rounded" style="width: 100%; aspect-ratio: 16/9; background-size: cover;"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="row mt-3">
                                                                    <div class="col" style="color: #ce742f;; font-size: 0.8em;">
                                                                        체취에 어울리는 흔적
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span id="myTrackCardContent">이쁜 벚꽃과 귀여운 강아지와 함께하는 기분 좋은 하루~</span>
                                                                        &nbsp;&nbsp;<span id="myTrackCardDate" class="text-secondary" style="font-size: 0.7rem;">2024.07.01</span>
                                                                    </div>
                                                                </div>
                                                                <div class="row mt-2">
                                                                    <div class="col" style="color: #ce742f;; font-size: 0.8em;">
                                                                        타인의 집계
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span style="font-size: 0.8em;" class="text-secondary">수집</span>
                                                                        <span id="myTrackCardCollectCount">10</span>
                                                                        <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                                    </div>
                                                                    <div class="col">
                                                                        <span style="font-size: 0.8em;" class="text-secondary">관심</span>
                                                                        <span id="myTrackCardCommentCount">10</span>
                                                                        <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                                    </div>
                                                                    <div class="col">
                                                                        <span style="font-size: 0.8em;" class="text-secondary">추행</span>
                                                                        <span id="myTrackCardTraceCount">10</span>
                                                                        <span style="font-size: 0.8em;" class="text-secondary">회</span>
                                                                    </div>
                                                                </div>
                                                                <div class="row mt-2">
                                                                    <div class="col" style="color: #ce742f;; font-size: 0.8em;">
                                                                        누군가의 관심표현
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div id="myTrackCardCommentHeight" class="myTrackCardCommentBox row row-cols-1 overflow-auto mt-1">

                                                            

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="likeListModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 4000;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: 90%; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div id="previewTrackMarkerPk" class="modal-header text-white fw-bold py-1 px-1 border-0" style="font-size: 1rem;">
                                        꾸욱
                                    </div>
                                    <div class="modal-body pb-1 px-0 pt-1 rounded" style="width: 100%; background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4);">
                                        <div id="likeListCarousel" class="carousel slide" data-bs-wrap="false">
                                            <div id="likeListBox" class="carousel-inner">
                                                
                                                

                                            </div>
                                            <button id="likeListCarouselPrev" class="carousel-control-prev" type="button" data-bs-target="#likeListCarousel" data-bs-slide="prev" style="position: absolute; top: calc(50% - 5.3rem); left: -3rem;">
                                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                <span class="visually-hidden">Previous</span>
                                              </button>
                                              <button id="likeListCarouselNext" class="carousel-control-next" type="button" data-bs-target="#likeListCarousel" data-bs-slide="next" style="position: absolute; top: calc(50% - 5.3rem); right: -3rem;">
                                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                <span class="visually-hidden">Next</span>
                                            </button>
                                        </div>
                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button id="collectTrackMarkerButton" class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;" data-bs-dismiss="modal">닫기</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>

        <div th:insert="~{commons/item/itemShop}"></div>
        <div th:insert="~{commons/item/achievement}"></div>

        <!-- fetch(url)
                .then(response => response.json())
                .then(response => {

                    

        }); -->
        
        <div id="likeListBox"></div>

        <div id="template" class="d-none">

            <div class="collectionWrapper col mt-3 px-3">
                <div class="row">
                    <div class="col d-grid align-items-bottom">
                        <span class="collectionPk fw-bold" style="font-size: 0.7rem; color: #81461A;">No. 7777</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col d-flex justify-content-center">
                        <div class="collectionOuter d-flex align-items-center justify-content-center" style="width: 80%; aspect-ratio: 1/1; border-radius: 8%;">
                            <!-- <div class="d-flex justify-content-center" style="position: relative; width: 98%; aspect-ratio: 1/1; border: 1px solid #ffdf00; border-radius: 3%; background: url('/public/image/commons/list2.jpeg') no-repeat center; background-size: cover; filter: opacity(80%);"> -->
                            <div class="collectionInner" style="position: relative; width: 97%; aspect-ratio: 1/1; border-radius: 3%; background: url('/public/image/follow/questionAnother (2).png') no-repeat; background-position: center; background-size: contain; filter: opacity(80%);">
                                <!-- <div class="fw-bold text-center" style="position: absolute; width: 1rem; height: 1rem; top: 0.2rem; left: 0.2rem; border-radius: 50%; background: #ffff90ff; border: 1px solid #feb146; font-size: 0.8rem;">
                                    1
                                </div> -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-1">
                    <div class="col-auto d-grid align-items-bottom pe-0">
                        <span class="collectionOpenRating" style="font-size: 0.6rem; color: #81461A;">Lv 2</span>
                    </div>
                    <div class="col d-grid align-items-bottom text-end ps-0">
                        <span class="collectionOpenRatngContent" style="font-size: 0.6rem; color: #81461A;">15 / 100</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="progress" role="progressbar" style="height: 0.4rem; border: 0.1px solid #E0C9A9; bottom: 0.1rem;">
                            <div class="collectionProgress progress-bar progress-bar-striped rounded-pill" style="background: #feb146; width: 75%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="noLikeListWrapper carousel-item px-1 active">
                <div class="rounded px-3 py-3" style="width: 100%; background: #C5A886;">
                    <div class="row">
                        <div class="col text-center py-5">
                            <div class="row">
                                <div class="col">
                                    <span class="material-symbols-rounded">
                                        ecg
                                    </span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    목록이 없습니다
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="likeListWrapper carousel-item px-1">
                <div class="rounded px-3 py-2" style="width: 100%; background: #C5A886;">
                    <div class="row my-auto align-items-center">
                        <div class="col">No. <span class="likeListPk">777</span></div>
                        <div class="col">
                            <span class="heartIcon material-symbols-rounded d-flex align-items-center float-end" style="font-size: 1.3rem;">
                                favorite
                            </span>
                        </div>
                    </div>
                    <div>
                        <hr class="mt-1 mb-2" style="color: #81461A;">
                    </div>
                    <div class="likeListButton row">
                        <div class="col">
                            <div class="row">
                                <div class="col-3">
                                    <div class="row">
                                        <div class="col px-2">
                                            <div class="likeListOuter d-flex align-items-center justify-content-center border-0" style="width: 100%; aspect-ratio: 1/1; border-radius: 50%;">
                                                <div class="likeListImage" style="width: 90%; aspect-ratio: 1/1; border-radius: 50%; background: url('/public/image/follow/questionBlack.png') no-repeat center; background-size: cover; filter: opacity(85%);"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mt-1">
                                        <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                            <span class="likeListName">? ? ?</span>
                                            <!-- 김아무 -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="likeListOpenRating col text-center fw-bold px-0" style="font-size: 0.56rem;">
                                            Lv ? ( ?? / ?? )
                                        </div>
                                    </div>
                                </div>
                                <div class="col my-auto">
                                    <div class="row">
                                        <div class="col">
                                            <div class="row">
                                                <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                    <span class="likeListHeight">? ? ?</span> cm
                                                    <!-- 163 cm -->
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                    키
                                                </div>
                                            </div>
                                        </div>
                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                        <div class="col-3">
                                            <div class="row">
                                                <div class="likeListGender col text-center fw-bold" style="font-size: 0.8rem;">
                                                    ? ?
                                                    <!-- 👱🏻‍♀️ -->
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                    성별
                                                </div>
                                            </div>
                                        </div>
                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                        <div class="col">
                                            <div class="row">
                                                <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                    <span class="likeListWeight">? ? ?</span> kg
                                                    <!-- 50 kg -->
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                    몸무게
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <div class="row">
                                                <div class="likeListMbtiType col text-center fw-bold" style="font-size: 0.8rem;">
                                                    ? ? ? ?
                                                    <!-- ISTJ -->
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                    MBTI
                                                </div>
                                            </div>
                                        </div>
                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                        <div class="col">
                                            <div class="row">
                                                <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                    <span class="likeListBloodType">? ?</span> 형
                                                    <!-- B 형 -->
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                    혈액형
                                                </div>
                                            </div>
                                        </div>
                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                        <div class="col">
                                            <div class="row">
                                                <div class="likeListDrinking col text-center fw-bold" style="font-size: 0.8rem;">
                                                    ? ?
                                                    <!-- N -->
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                    음주여부
                                                </div>
                                            </div>
                                        </div>
                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                        <div class="col">
                                            <div class="row">
                                                <div class="likeListSmoking col text-center fw-bold" style="font-size: 0.8rem;">
                                                    ? ?
                                                    <!-- N -->
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                    흡연여부
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <div class="row">
                                                <div class="likeListHobby col text-center fw-bold" style="font-size: 0.8rem;">
                                                    ? ? ? ? ?
                                                    <!-- 집에서 뒹굴거리기 -->
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                    취미
                                                </div>
                                            </div>
                                        </div>
                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                        <div class="col">
                                            <div class="row">
                                                <div class="likeListPreference col text-center fw-bold" style="font-size: 0.8rem;">
                                                    ? ? ? ? ?
                                                    <!-- 게이 -->
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                    성적지향
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row align-items-center">
                                <div class="col-auto pe-0 text-body-tertiary text-center" style="font-size: 0.6rem;">
                                    멍스타 활동온도
                                </div>
                                <div class="col">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <div class="progress" style="height: 0.5rem;">
                                                <div class="likeListTemp progress-bar rounded" style="background: #feb146; width: 36.5%;"></div>
                                            </div>
                                        </div>
                                        <div class="col-auto ps-0 fw-bold text-end" style="font-size: 0.8rem; color: #000;">
                                            <span class="likeListTempContent">36.5</span>℃
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="collectionDetailCardCommonWrapper col mt-2 px-2">
                <div class="row">
                    <div class="col">
                        <div class="collectionDetailCardFilter d-flex justify-content-center align-items-center" style="position: relative; width: 100%; aspect-ratio: 1/1; border-radius: 3%; background: #AD6B33;">
                            <div class="d-flex justify-content-center align-items-center" style="width: 83%; aspect-ratio: 1/1; border-radius: 30%; background: #AD6B33; z-index: 1;">
                                <div class="d-flex justify-content-center align-items-center" style="position: absolute; width: 85%; aspect-ratio: 1/1; border-radius: 50%; background: linear-gradient(-45deg, #E0A159, #F5C45C);">
                                    <div class="d-flex justify-content-center align-items-center" style="width: 90%; aspect-ratio: 1/1; border-radius: 50%; background: #AD6B33;">
                                        <span class="fw-bold" style="font-size: 0.7rem; color: #ededed;"><span style="font-size: 0.6rem;">No.</span> <span class="collectionDetailLogPk">48</span></span>
                                    </div>
                                </div>
                            </div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: linear-gradient(-45deg, #E0A159, #F5C45C); top: 5%; left: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #E0A159; top: 5%; right: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #E0A159; bottom: 5%; left: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #E0A159; bottom: 5%; right: 5%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="collectionDetailCardLegendaryWrapper col mt-2 px-2">
                <div class="row">
                    <div class="col">
                        <div class="collectionDetailCardFilter d-flex justify-content-center align-items-center" style="position: relative; width: 100%; aspect-ratio: 1/1; border-radius: 3%; background: #808080;">
                            <div class="d-flex justify-content-center align-items-center" style="width: 83%; aspect-ratio: 1/1; border-radius: 30%; background: #808080; z-index: 1;">
                                <div class="d-flex justify-content-center align-items-center" style="position: absolute; width: 85%; aspect-ratio: 1/1; border-radius: 50%; background: linear-gradient(-45deg, #AFADA7, #E0DBC1);">
                                    <div class="d-flex justify-content-center align-items-center" style="width: 90%; aspect-ratio: 1/1; border-radius: 50%; background: linear-gradient(-20deg, #0E3759, #30759D);">
                                        <span class="fw-bold" style="font-size: 0.7rem; color: #ededed;"><span style="font-size: 0.6rem;">No.</span> <span class="collectionDetailLogPk">48</span></span>
                                    </div>
                                </div>
                            </div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: linear-gradient(-45deg, #AFADA7, #E0DBC1); top: 5%; left: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #AFADA7; top: 5%; right: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #AFADA7; bottom: 5%; left: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #AFADA7; bottom: 5%; right: 5%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="collectionDetailCardRareWrapper col mt-2 px-2">
                <div class="row">
                    <div class="col">
                        <div class="collectionDetailCardFilter d-flex justify-content-center align-items-center" style="position: relative; width: 100%; aspect-ratio: 1/1; border-radius: 3%; background: #808080;">
                            <div class="d-flex justify-content-center align-items-center" style="width: 83%; aspect-ratio: 1/1; border-radius: 30%; background: #808080; z-index: 1;">
                                <div class="d-flex justify-content-center align-items-center" style="position: absolute; width: 85%; aspect-ratio: 1/1; border-radius: 50%; background: linear-gradient(-45deg, #AFADA7, #E0DBC1);">
                                    <div class="d-flex justify-content-center align-items-center" style="width: 90%; aspect-ratio: 1/1; border-radius: 50%; background: linear-gradient(-20deg, #4E1E1A, #873028);">
                                        <span class="fw-bold" style="font-size: 0.7rem; color: #ededed;"><span style="font-size: 0.6rem;">No.</span> <span class="collectionDetailLogPk">48</span></span>
                                    </div>
                                </div>
                            </div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: linear-gradient(-45deg, #AFADA7, #E0DBC1); top: 5%; left: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #AFADA7; top: 5%; right: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #AFADA7; bottom: 5%; left: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #AFADA7; bottom: 5%; right: 5%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="collectionCardCommentWrapper col">
                <div class="row">
                    <div class="col-auto pe-0">
                        <span style="color: #b2db5e; font-size: 0.8rem;">???</span>
                    </div>
                    <div class="col">
                        <span style="font-size: 0.7em;" class="collectionCardCommentDate text-secondary">2024.07.02</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col" style="font-size: 0.9rem;">
                        <span class="collectionCardCommentContent">저 여기 있어요....!!!</span>      
                    </div>
                </div>
            </div>

            <div class="myTrackCardCommentWrapper col">
                <div class="row">
                    <div class="col-auto pe-0">
                        <span class="myTrackCardNickName" style="color: #b2db5e; font-size: 0.8rem;">???</span>
                    </div>
                    <div class="col">
                        <span style="font-size: 0.7em;" class="myTrackCardCommentDate text-secondary">2024.07.02</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col" style="font-size: 0.9rem;">
                        <span class="myTrackCardCommentContent">저 여기 있어요....!!!</span>      
                    </div>
                </div>
            </div>

            <div class="itemScanUpWrapper">
                <div class="mx-3" style="width: 4rem; height: 4rem; background: url('/public/image/mFollow/scanUp.png') no-repeat center; background-size: cover;"></div>
                <div><span class="itemCount">0</span> 개</div>
            </div>
            
            <div class="itemMegaPhoneWrapper">
                <div class="mx-3" style="width: 4rem; height: 4rem; background: url('/public/image/mFollow/megaPhone.png') no-repeat center; background-size: cover;"></div>
                <div><span class="itemCount">0</span> 개</div>
            </div>

            <div class="itemCupidoWrapper">
                <div class="mx-3" style="width: 4rem; height: 4rem; background: url('/public/image/mFollow/cupido.png') no-repeat center; background-size: cover;"></div>
                <div><span class="itemCount">0</span> 개</div>
            </div>

            <div class="itemRainbowHandWrapper">
                <div class="mx-3" style="width: 4rem; height: 4rem; background: url('/public/image/mFollow/rainbowHand.png') no-repeat center; background-size: contain;"></div>
                <div><span class="itemCount">0</span> 개</div>
            </div>

        </div>


        <div class="fixed-bottom" style="bottom: 4.5em; height: 5rem;">
            <div class="row">
                <div class="col">
                    <div id="actionButton" class="text-center d-grid align-items-center" style="position: relative;">
                        <div id="actionPaw" style="position: relative;">
                            <span id="pawIcon" class="material-symbols-rounded">
                                pets
                            </span>
        
                            <div id="claw1" class="commonStyle"></div>
                            <div id="claw2" class="commonStyle"></div>
                            <div id="claw3" class="commonStyle"></div>
                            <div id="claw4" class="commonStyle"></div>
                        </div>
                        
                        <input id="checkClaw" value="hide" hidden>
                        
                        <div onclick="marking()" id="markClaw" class="commonStyle text-center d-grid align-items-center">
                            <span class="material-symbols-rounded actionIcon">
                                where_to_vote
                            </span>
                        </div>
                        <div onclick="scanning()" id="scanClaw" class="commonStyle text-center d-grid align-items-center">
                            <span class="material-symbols-rounded actionIcon">
                                wifi_tethering
                            </span>
                        </div>
                        <div onclick="tracing()" id="traceClaw" class="commonStyle text-center d-grid align-items-center">
                            <span class="material-symbols-rounded actionIcon">
                                footprint
                            </span>
                        </div>
                        <div id="loveClaw" class="commonStyle text-center d-grid align-items-center">
                            <span class="material-symbols-rounded actionIcon">
                                favorite
                            </span>
                        </div>
                        <div onclick="toggleAction()" id="actionToggle" class="commonStyle"></div>
                    </div>
                    <div onclick="getMyLocation(0)" id="locationButton" class="text-center d-grid align-items-center float-end">
                        <span id="locationIcon" class="material-symbols-rounded">
                            my_location
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- #FDE4CD  #FFC98B -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    </body>
    
</html>