<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
        <script src="https://kit.fontawesome.com/fdd6196f61.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=a277eb582a644847f86de6196a42745f"></script>

        <script src="/public/js/commons/lockLikeMobile.js"></script>

        <script src="/public/js/commons/naviBar.js"></script>
        <link rel="stylesheet" th:href="@{/public/css/commons/naviBar.css}">

        <link rel="stylesheet" th:href="@{/public/css/mFollowShop/item.css}" />
        <link rel="stylesheet" th:href="@{/public/css/mFollowShop/achievement.css}" />
        <script src="/public/js/mFollowShop/item.js"></script>
        <script src="/public/js/mFollowShop/achievement.js"></script>

        <script>

            let user_pk;

            let map;

            let myLocation;

            let currentLat;
            let currentLng;

            const staticLat = 37.4996259;
            const staticLng = 127.0304801;

            let myTrackMarkers = [];
            let tracingTrackMarkers = [];
            let tracingTrackInfoMarkers = [];
            let scanningTrackMarkers = [];

            const trackMarkerEffectiveDistance = 100;
            const trackMarkerDateValidity = 7;
            const trackMarkerUpTo = 3;

            let scanMarkerEffectiveDistance = 250;
            let scanMarkerUpTo = 5;
            
            let collectMarkerUpTo = 100; // ...

            let traceMarkerUpTo = 3;

            let plusTrackMarkerProbability = 0;

            let mapHeight;

            function getMyUserPk() {

                const url = "./getMyUserPk";

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    user_pk = response.data.user_pk;
                    console.log(user_pk);

                    if(response.data.gender == "M") {
                        console.log(response.data.gender);
                        document.getElementById("myPageImage").setAttribute("src", "/public/image/follow/male.png");
                    }

                    getMyTrackMarkers();
                    getTracingTrackMarkers();
                    getPermanentItemLv();

                });

            }

            function createMap() {

                const mapContainer = document.getElementById("map");
                mapOption = {
                    center: new kakao.maps.LatLng(staticLat, staticLng),
                    level: 4
                };

                map = new kakao.maps.Map(mapContainer, mapOption);

            }

            function getMyLocation() {
                if(navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition((position) => {

                        currentLat = position.coords.latitude;
                        currentLng = position.coords.longitude;

                        position = new kakao.maps.LatLng(currentLat, currentLng);

                        displayMyLocation(position);
                    }, (error) => {

                        if(error.code === 3) {
                            document.getElementById("alertContent").innerText = "ÏúÑÏπòÏ†ïÎ≥¥ ÌôïÏù∏Ïù¥ ÏßÄÏó∞ÎêòÍ≥† ÏûàÏäµÎãàÎã§";
                        }else if(error.code === 1) {
                            document.getElementById("alertContent").innerText = "ÏúÑÏπòÏ†ïÎ≥¥ ÌóàÏö©Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§";
                        }else {
                            document.getElementById("alertContent").innerText = "ÏòàÍ∏∞Ïπò Î™ªÌïú Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§";
                        }

                        document.getElementById("alertCheckButton").onclick = () => {
                            hideAlertModal();
                            location.href = "/commons/mainPage";
                        };
                        showAlertModal();

                        position = new kakao.maps.LatLng(staticLat, staticLng);
                        displayMyLocation(position);

                        });

                }else {
                    position = new kakao.maps.LatLng(staticLat, staticLng);
                    displayMyLocation(position);

                    document.getElementById("alertContent").innerText = "ÏúÑÏπòÏ†ïÎ≥¥ ÏÇ¨Ïö©Ïù¥ Î∂àÍ∞ÄÌï©ÎãàÎã§";
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                        location.href = "/commons/mainPage";
                    };
                    showAlertModal();
                }
            }

            function displayMyLocation(position) {

                if(myLocation) {
                    myLocation.setPosition(position);
                    map.panTo(position);

                    return;
                }

                const content = document.createElement("div");
                content.classList.add("myLocationMarkerBox");

                const div1 = document.createElement("div");
                div1.classList.add("myLocationMarker", "first");
                const div2 = document.createElement("div");
                div2.classList.add("myLocationMarker", "second");
                const div3 = document.createElement("div");
                div3.classList.add("myLocationMarker", "third");

                content.appendChild(div1);
                content.appendChild(div2);
                content.appendChild(div3);
                
                myLocation = new kakao.maps.CustomOverlay({
                    position: position,
                    content: content
                });

                myLocation.setMap(map);
                map.panTo(position);

            }

            function displayMyTrackMarker(lat, lng) {

                const position = new kakao.maps.LatLng(lat, lng);

                const content = document.createElement("div");
                content.classList.add("myTrackMarker");

                marker = new kakao.maps.CustomOverlay({
                    position: position,
                    content: content,
                    yAnchor: 0.95,
                    zIndex: 1
                });

                marker.setMap(map);
                myTrackMarkers.push(marker);

            }

            function removeMyTrackMarkers() {
                for(var i = 0 ; i < myTrackMarkers.length ; i++) {
                    myTrackMarkers[i].setMap(null);
                }

                myTrackMarkers = [];
            }

            function displayTracingTrackAndInfoMarker(e) {

                const position = new kakao.maps.LatLng(e.latitude, e.longitude);

                var circle = new kakao.maps.Circle({
                    center : position,  // ÏõêÏùò Ï§ëÏã¨Ï¢åÌëú ÏûÖÎãàÎã§ 
                    radius: 1000, // ÎØ∏ÌÑ∞ Îã®ÏúÑÏùò ÏõêÏùò Î∞òÏßÄÎ¶ÑÏûÖÎãàÎã§ 
                    strokeWeight: 5, // ÏÑ†Ïùò ÎëêÍªòÏûÖÎãàÎã§ 
                    strokeColor: '#75B8FA', // ÏÑ†Ïùò ÏÉâÍπîÏûÖÎãàÎã§
                    strokeOpacity: 1, // ÏÑ†Ïùò Î∂àÌà¨Î™ÖÎèÑ ÏûÖÎãàÎã§ 1ÏóêÏÑú 0 ÏÇ¨Ïù¥Ïùò Í∞íÏù¥Î©∞ 0Ïóê Í∞ÄÍπåÏö∏ÏàòÎ°ù Ìà¨Î™ÖÌï©ÎãàÎã§
                    strokeStyle: 'dashed', // ÏÑ†Ïùò Ïä§ÌÉÄÏùº ÏûÖÎãàÎã§
                    fillColor: '#CFE7FF', // Ï±ÑÏö∞Í∏∞ ÏÉâÍπîÏûÖÎãàÎã§
                    fillOpacity: 0.7  // Ï±ÑÏö∞Í∏∞ Î∂àÌà¨Î™ÖÎèÑ ÏûÖÎãàÎã§   
                }); 

                // ÏßÄÎèÑÏóê ÏõêÏùÑ ÌëúÏãúÌï©ÎãàÎã§ 
                circle.setMap(map);

                var marker = new kakao.maps.Marker({
                    position: position
                });

                // ÎßàÏª§Í∞Ä ÏßÄÎèÑ ÏúÑÏóê ÌëúÏãúÎêòÎèÑÎ°ù ÏÑ§Ï†ïÌï©ÎãàÎã§
                marker.setMap(map);

                tracingTrackMarkers.push(circle);
                tracingTrackInfoMarkers.push(marker);

            }

            function removeTracingTrackAndInfoMarkers() {
                for(var i = 0 ; i < tracingTrackMarkers.length ; i++) {
                    tracingTrackMarkers[i].setMap(null);
                    tracingTrackInfoMarkers[i].setMap(null);
                }

                tracingTrackMarkers = [];
                tracingTrackInfoMarkers = [];
            }

            function displayScanningTrackMarkers(e) {

                const position = new kakao.maps.LatLng(e.latitude, e.longitude);

                const content = document.createElement("div");
                content.classList.add("scanMarkerBox");

                const div1 = document.createElement("div");
                div1.classList.add("scanMarkerImage");

                if(e.star_rating == 'oneStar') {
                    div1.style.background = "url('/public/image/follow/onestar.png') no-repeat center";
                }else if(e.star_rating == 'twoStar') {
                    div1.style.background = "url('/public/image/follow/twostar.png') no-repeat center";
                }else if(e.star_rating == 'threeStar') {
                    div1.style.background = "url('/public/image/follow/threestar.png') no-repeat center";
                }else if(e.star_rating == 'fourStar') {
                    div1.style.background = "url('/public/image/follow/fourstar.png') no-repeat center";
                }else if(e.star_rating == 'fiveStar') {
                    div1.style.background = "url('/public/image/follow/fivestar.png') no-repeat center";
                }else if(e.star_rating == 'S') {
                    div1.style.background = "url('/public/image/follow/sixstar.png') no-repeat center";
                }else if(e.star_rating == 'SR') {
                    div1.style.background = "url('/public/image/follow/sevenstar.png') no-repeat center";
                }else {
                    div1.style.background = "url('/public/image/follow/eightstar.png') no-repeat center";
                }

                div1.style.backgroundSize = "cover";

                const div2 = document.createElement("div");
                div2.classList.add("scanMarkerContent");
                
                div2.style.width = "1.2rem";
                div2.style.height = "1.2rem";
                div2.style.top = "0.8rem";
                div2.style.left = "1.4rem";

                div2.style.background = "url('/public/image/follow/questionBlack.png') no-repeat center";
                div2.style.backgroundSize = "cover";

                if(e.open_rating == 10) {
                    div2.style.width = "1.6rem";
                    div2.style.height = "1.6rem";
                    div2.style.top = "0.7rem";
                    div2.style.left = "1.2rem";

                    div2.style.background = "url('/uploadFiles/ " + e.profile_photo + " ') no-repeat center";
                }

                content.appendChild(div1);
                content.appendChild(div2);

                // Ïª§Ïä§ÌÖÄ Ïò§Î≤ÑÎ†àÏù¥Î•º ÏÉùÏÑ±Ìï©ÎãàÎã§
                var customOverlay = new kakao.maps.CustomOverlay({
                    position: position,
                    content: content,
                    yAnchor: 0.9,
                    zIndex: 1
                });

                // Ïª§Ïä§ÌÖÄ Ïò§Î≤ÑÎ†àÏù¥Î•º ÏßÄÎèÑÏóê ÌëúÏãúÌï©ÎãàÎã§
                customOverlay.setMap(map);

                content.onclick = () => {
                    console.log("click");
                    fillPreviewTrackMarkerModal(e);

                };

                scanningTrackMarkers.push(customOverlay);

            }

            function removeScanningTrackMarkers() {
                for(var i = 0 ; i < scanningTrackMarkers.length ; i++) {
                    scanningTrackMarkers[i].setMap(null);
                }

                scanningTrackMarkers = [];
            }

            function getMyTrackMarkers() {

                removeMyTrackMarkers();

                const url = "./getMyTrackMarkers?user_pk=" + user_pk + "&trackMarkerDateValidity=" + trackMarkerDateValidity;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    if(response.data.length == 0) {
                        console.log("getMyTrackMarkers");
                        return;
                    }

                    for(let e of response.data) {
                        console.log(e);
                        displayMyTrackMarker(e.latitude, e.longitude);

                    }

                });

            }

            function getTracingTrackMarkers() {

                removeTracingTrackAndInfoMarkers();

                const url = "./getTracingTrackMarkers?user_pk=" + user_pk + "&trackMarkerDateValidity=" + trackMarkerDateValidity;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                        if(response.data.length == 0) {
                            console.log("getTracingTrackMarkers");
                            return;
                        }

                        for(let e of response.data) {
                            console.log(e);
                            displayTracingTrackAndInfoMarker(e);

                        }

                });

            }

            function getPermanentItemLv() {

                const url = "./getPermanentItemLv?user_pk=" + user_pk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    for(let e of response.data) {

                        if(e.item_pk == 1) {
                            scanMarkerUpTo += e.item_cnt;
                        }else if(e.item_pk == 2) {
                            scanMarkerEffectiveDistance += e.item_cnt * 5;
                        }else if(e.item_pk == 3) {
                            traceMarkerUpTo += e.item_cnt;
                        }else if(e.item_pk == 4) {
                            plusTrackMarkerProbability += e.item_cnt;
                        }

                    }

                });

            }
            
            function marking() {
                // poiu
                hideAction();
                getMyLocation();
                isFirstTimeLeavingTrackMark();

            }

            function isFirstTimeLeavingTrackMark() {

                const url = "./isFirstTimeLeavingTrackMark?user_pk=" + user_pk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    if(response.data) {
                        console.log("isFirstTimeLeavingTrackMark : " + response.data);
                        // Ï≤òÏùå ÎßàÏª§ ÎÇ®ÍπÄ
                        document.getElementById("alertWithCancelContent").innerText = "Ï≤òÏùå Ï≤¥Ï∑®Î•º ÎÇ®Í∏∞Ïã§ Í≤ΩÏö∞ Ï∂îÍ∞Ä Ï†ïÎ≥¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÖîÏïº Ìï©ÎãàÎã§";
                        document.getElementById("alertWithCancelCheckButton").onclick = () => {
                            hideAlertWithCancelModal();
                            showWriteMoreInfoModal();
                        };
                        showAlertWithCancelModal();

                        return;
                    }

                    console.log("isFirstTimeLeavingTrackMark : " + response.data);

                    // Ï†ÑÏóê ÎÇ®Í∏¥ Ï†Å ÏûàÏùå
                    getCurrentMyTrackMarkerCount();

                });

            }
            // qwer
            function saveMoreInfo() {

                height = document.getElementById("writeMoreInfoHeight").value;
                weight = document.getElementById("writeMoreInfoWeight").value;
                bloodType = document.getElementById("writeMoreInfoBloodType").value;
                mbtiType = document.getElementById("writeMoreInfoMbtiType").value;
                hobby = document.getElementById("writeMoreInfoHobby").value;
                drinking = document.querySelector("input[name='isDrinking']:checked").value;
                smoking = document.querySelector("input[name='isSmoking']:checked").value;
                preference = document.getElementById("writeMoreInfoPreference").value;

                if(height == "" || weight == "" || bloodType == "0" || mbtiType == "0" || hobby == "" || preference == "0") {
                    document.getElementById("writeBlank").innerText = "‚Äª ÎπàÏπ∏ÏùÑ Î™®Îëê Ï±ÑÏõåÏ£ºÏÑ∏Ïöî";
                    return;
                }

                const url = "./insertMoreInfo?user_pk=" + user_pk + "&height=" + height + "&weight=" + weight + "&blood_type=" + bloodType + "&mbti_type=" + mbtiType +
                    "&hobby=" + hobby + "&drinking=" + drinking + "&smoking=" + smoking + "&preference=" + preference;

                fetch(url)
                .then(response => response.json())
                .then(response => {
                    
                    hideWriteMoreInfoModal();

                    document.getElementById("alertContent").innerText = "Ï∂îÍ∞ÄÏ†ïÎ≥¥ ÏûÖÎ†•Ïù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§";
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                        showWriteTrackMarkModal();
                    };
                    
                    showAlertModal();

                });

            }

            function getCurrentMyTrackMarkerCount() {

                const url = "./getCurrentMyTrackMarkerCount?user_pk=" + user_pk;

                fetch(url)
                .then(response => response.json())
                .then(response => {
                    console.log("getCurrentMyTrackMarkerCount : " + response.data);
                    if(response.data >= trackMarkerUpTo) {

                        document.getElementById("alertContent").innerText = "ÌöüÏàòÎ•º Î™®Îëê ÏÇ¨Ïö©ÌïòÏÖ®ÏäµÎãàÎã§";
                        showAlertModal();

                        return;

                    }

                    isEnoughDistanceFromMyTrackMarker();

                });

            }

            function isEnoughDistanceFromMyTrackMarker() {

                const url = "./isEnoughDistanceFromMyTrackMarker?user_pk=" + user_pk + "&latitude=" + currentLat + "&longitude=" + currentLng +
                    "&trackMarkerEffectiveDistance=" + trackMarkerEffectiveDistance + "&trackMarkerDateValidity=" + trackMarkerDateValidity;

                fetch(url)
                .then(response => response.json())
                .then(response => {
                    console.log("isEnoughDistanceFromMyTrackMarker : " + response.data);
                    if(response.data) {

                        showWriteTrackMarkModal();

                        return;

                    }

                    document.getElementById("alertContent").innerText = "Í∑ºÏ≤òÏóê Î∂ÑÏÇ¨Ìïú Ï≤¥Ï∑®Í∞Ä ÏûàÏäµÎãàÎã§";
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                    };
                    showAlertModal();

                });

            }
            // qwer
            function saveWriteTrackMarkInfo() {

                const inputImage = document.getElementById("writeTrackMarkImage");
                const content = document.getElementById("writeTrackMarkContent").value;

                if(inputImage.files.length == 0 || content == "") {

                    document.getElementById("alertContent").innerText = "ÏÇ¨ÏßÑÏù¥ ÏóÜÏäµÎãàÎã§";
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                    };
                    showAlertModal();

                    return;
                }

                const formData = new FormData();
                formData.append("user_pk", user_pk);
                formData.append("imageFile", inputImage.files[0]);
                formData.append("content", content);
                formData.append("latitude", currentLat);
                formData.append("longitude", currentLng);

                const url = "./insertWriteTrackMarkInfo";
                const option = {
                    method: "post",
                    "Content-Type": "multipart/form-data",
                    body: formData
                };

                fetch(url, option)
                .then(response => {
                    console.log("saveWriteTrackMarkInfo");
                    hideWriteTrackMarkModal();
                    getMyTrackMarkers();

                });

            }

            function scanning() {
                // poiu
                hideAction();
                getMyLocation();
                removeScanningTrackMarkers();
                getScanningTrackMarkers();
                
            }

            function getScanningTrackMarkers() {

                const url = "./getScanningTrackMarkers?user_pk=" + user_pk + "&latitude=" + currentLat + "&longitude=" + currentLng +
                    "&trackMarkerDateValidity=" + trackMarkerDateValidity + "&scanMarkerEffectiveDistance=" + scanMarkerEffectiveDistance +
                    "&scanMarkerUpTo=" + scanMarkerUpTo;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    if(response.data.length == 0) {
                        console.log("getScanningTrackMarkers");
                        document.getElementById("alertContent").innerText = "Í∑ºÏ≤òÏóê Î∂ÑÏÇ¨Îêú Ï≤¥Ï∑®Í∞Ä ÏóÜÏäµÎãàÎã§";
                        document.getElementById("alertCheckButton").onclick = () => {
                            hideAlertModal();
                        };
                        showAlertModal();

                        return;

                    }

                    for(let e of response.data) {
                        console.log(e);
                        displayScanningTrackMarkers(e);

                    }

                });

            }

            function fillPreviewTrackMarkerModal(e) {

                resetPreviewTrackMarkerModal();

                switch(e.open_rating) {

                    case "10" :
                        document.getElementById("previewTrackMarkerName").innerText = e.nick_name;
                    case "9" :
                        document.getElementById("previewTrackMarkerImage").style.background = 
                            "url(/uploadFiles/" + e.profile_photo + ") no-repeat center";
                            document.getElementById("previewTrackMarkerImage").style.backgroundSize = "cover";
                    case "8" : 
                        if(e.preference == "L") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "Ïù¥ÏÑ±Ïï†";
                        }else if(e.preference == "B") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "Í≤åÏù¥";
                        }else if(e.preference == "G") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "Î†àÏ¶àÎπÑÏñ∏";
                        }else if(e.preference == "V") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "Î∞îÏù¥ÏÑπÏäàÏñº";
                        }else if(e.preference == "A") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "ÏóêÏù¥ÏÑπÏäàÏñº";
                        }else if(e.preference == "D") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "Îç∞ÎØ∏ÏÑπÏäàÏñº";
                        }else if(e.preference == "P") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "Ìå¨ÏÑπÏäàÏñº";
                        }else if(e.preference == "Q") {
                            document.getElementById("previewTrackMarkerPreference").innerText = "ÌÄòÏä§Ï≤òÎãù";
                        }
                    case "7", "6" : 
                        document.getElementById("previewTrackMarkerMbtiType").innerText = e.blood_type;
                        document.getElementById("previewTrackMarkerHobby").innerText = e.hobby;
                    case "5" :
                        document.getElementById("previewTrackMarkerSmoking").innerText = e.smoking;
                        document.getElementById("previewTrackMarkerDrinking").innerText = e.drinking;
                    case "4", "3" : 
                        document.getElementById("previewTrackMarkerHeight").innerText = e.height;
                        document.getElementById("previewTrackMarkerWeight").innerText = e.weight;
                        document.getElementById("previewTrackMarkerBloodType").innerText = e.blood_type;
                    case "2": 
                        if(e.gender == 'W') {
                            document.getElementById("previewTrackMarkerGender").innerText = "üë±üèª‚Äç‚ôÄÔ∏è";
                        }else {
                            document.getElementById("previewTrackMarkerGender").innerText = "üë±üèª‚Äç‚ôÇÔ∏è";
                        }
                    case "1":
                        document.getElementById("previewTrackMarkerPk").innerText = e.user_more_pk;

                        if(e.mstar_temp < 100) {
                            document.getElementById("previewTrackMarkerTemp").style.width = e.mstar_temp;
                            document.getElementById("previewTrackMarkerTempContent").innerText = e.mstar_temp;
                        }else {
                            document.getElementById("previewTrackMarkerTemp").style.width = 100;
                            document.getElementById("previewTrackMarkerTempContent").innerText = 100;
                        }

                    }

                    if(e.open_rating == 10) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + e.cnt + " / ‚àû )";
                    }else if(e.open_rating == 9) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (18 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 8) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (16 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 7) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (14 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 6) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (12 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 5) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (10 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 4) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (8 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 3) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (6 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 2) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + (4 - e.cnt) + " / 2 )";
                    }else if(e.open_rating == 1) {
                        document.getElementById("previewTrackMarkerOpenRating").innerText = "Lv " + e.open_rating + " ( " + e.cnt + " / 2 )";
                    }

                    if(e.star_rating == "SSR") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("SSROuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("SSROuter");
                    }else if(e.star_rating == "SR") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("SROuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("SROuter");
                    }else if(e.star_rating == "S") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("SOuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("SOuter");
                    }else if(e.star_rating == "fiveStar") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("FiveStarROuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("FiveStarROuter");
                    }else if(e.star_rating == "fourStar") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("FourStarROuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("FourStarROuter");
                    }else if(e.star_rating == "threeStar") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("ThreeStarROuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("ThreeStarROuter");
                    }else if(e.star_rating == "twoStar") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("TwoStarOuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("TwoStarOuter");
                    }else if(e.star_rating == "oneStar") {
                        document.getElementById("previewTrackMarkerOuter").classList.add("OneStarOuter");
                        document.getElementById("previewTrackMarkercoverdImage").classList.add("OneStarOuter");
                    }


                document.getElementById("collectTrackMarkerButton").onclick = () => {

                    getCurrentCollectTrackMarkerCount(e);

                };

                showPreviewTrackMarkerModal();
                
            }

            function getCurrentCollectTrackMarkerCount(e) {

                const url = "./getCurrentCollectTrackMarkerCount?user_pk=" + user_pk;

                fetch(url)
                .then(response => response.json())
                .then(response => {
                    console.log("getCurrentCollectTrackMarkerCount : " + response.data);
                    if(response.data >= collectMarkerUpTo) {
                        //ghgh

                        document.getElementById("alertWithCancelContent").innerText = `ÌöüÏàòÎ•º Î™®Îëê ÏÇ¨Ïö©ÌïòÏÖ®ÏäµÎãàÎã§\nÏïÑÏù¥ÌÖúÏùÑ ÏÇ¨Ïö©ÌïòÏãúÍ≤†ÏäµÎãàÍπå?`;
                        document.getElementById("alertWithCancelCheckButton").onclick = () => {
                            hideAlertWithCancelModal();
                            getPlusCollectTrackMarkerItemCount(e);
                        };
                        showAlertWithCancelModal();

                        return;

                    }

                    collectTrackMarkerInfo(e);

                });

            }

            function getPlusCollectTrackMarkerItemCount(e) {

                const url = "./getItemCount?user_pk=" + user_pk + "&item_pk=6";

                fetch(url)
                .then(response => response.json())
                .then(response => {
                    
                    if(response.data <= 0) {

                        document.getElementById("alertContent").innerText = "ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎäî ÏïÑÏù¥ÌÖúÏù¥ ÏóÜÏäµÎãàÎã§";
                        document.getElementById("alertCheckButton").onclick = () => {
                            hideAlertModal();
                        };
                        showAlertModal();

                        return;

                    }

                    savePlusCollectTrackMarkerItemUse(e);

                });

            }

            function savePlusCollectTrackMarkerItemUse(e) {

                const url = "./insertUserItemInfo?user_pk=" + user_pk + "&item_pk=6";

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    collectTrackMarkerInfo(e);

                });

            }

            // qwer
            function collectTrackMarkerInfo(e) {

                removeScanningTrackMarkers();
                fillTrackMarkerModal(e);
                saveCollectionInfo(e.log_pk);

                // mnbv
                const random = Math.floor((Math.random() * 99) + 1);

                if(plusTrackMarkerProbability >= random) {
                    getPlusTrackMarker(e.user_pk);
                }

            }

            function getPlusTrackMarker(userWriterPk) {

                const url = "./getPlusTrackMarker?user_pk=" + user_pk + "&user_writer_pk=" + userWriterPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    saveCollectionInfo(response.data.log_pk);

                });

            }

            function fillTrackMarkerModal(e) {

                resetTrackMarkerModal();
                console.log(e.star_rating)
                if(e.star_rating == "SSR") {
                    document.getElementById("trackMarkerOuter").classList.add("SSROuter");
                }else if(e.star_rating == "SR") {
                    document.getElementById("trackMarkerOuter").classList.add("SROuter");
                }else if(e.star_rating == "S") {
                    document.getElementById("trackMarkerOuter").classList.add("SOuter");
                }else if(e.star_rating == "fiveStar") {
                    document.getElementById("trackMarkerOuter").classList.add("FiveStarROuter");
                }else if(e.star_rating == "fourStar") {
                    document.getElementById("trackMarkerOuter").classList.add("FourStarROuter");
                }else if(e.star_rating == "threeStar") {
                    document.getElementById("trackMarkerOuter").classList.add("ThreeStarROuter");
                }else if(e.star_rating == "twoStar") {
                    document.getElementById("trackMarkerOuter").classList.add("TwoStarOuter");
                }else if(e.star_rating == "oneStar") {
                    document.getElementById("trackMarkerOuter").classList.add("OneStarOuter");
                }

                if(e.open_rating == 9) {
                    document.getElementById("trackMarkerInner").style.background = 
                        "url(/uploadFiles/" + e.profile_photo + ") no-repeat center";
                    document.getElementById("trackMarkerInner").style.backgroundSize = "cover";
                }

                document.getElementById("trackMarkerPk").innerText = "No. " + e.user_more_pk;

                if(e.is_like == "Y") {
                    document.getElementById("trackMarkerHeartIcon").style.fontVariationSettings = "'FILL' 1";
                }else {
                    document.getElementById("trackMarkerHeartIcon").style.fontVariationSettings = "'FILL' 0";
                }
                
                document.getElementById("trackMarkerHeartIcon").onclick = () => {

                    if(e.is_trace == "N") {
                        toggleLike(e.user_pk, document.getElementById("trackMarkerHeartIcon"));
                        return;
                    }

                    document.getElementById("alertContent").innerText = "Ï∂îÌñâÌïòÍ≥† ÏûàÏäµÎãàÎã§";
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                    };
                    showAlertModal();

                };

                document.getElementById("trackMarkerImage").style.background = "url(/uploadFiles/" + e.image_link + ") no-repeat center";
                document.getElementById("trackMarkerImage").style.backgroundSize = "cover";

                document.getElementById("trackMarkerContent").innerText = e.content;

                document.getElementById("trackMarkerCommentButton").onclick = () => {

                    saveTrackMarkerComment(e.log_pk);

                };

                showTrackMarkerModal();

            }

            function saveCollectionInfo(logPk) {

                const url = "./insertCollectionInfo?user_pk=" + user_pk + "&log_pk=" + logPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    hidePreviewTrackMarkerModal();

                });

            }

            function saveTrackMarkerComment(logPk) {

                const content = document.getElementById("trackMarkerCommentContent").value;

                const url = "./insertComment?user_pk=" + user_pk + "&log_pk=" + logPk + "&content=" + content;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    document.getElementById("trackMarkerCommentHidden").hidden = true;
                    document.getElementById("trackMarkerPreviewCommentContent").innerText = content;

                });

            }

            function tracing() {
                
                hideAction();
                getMyLocation();
                getLikeList();

            }

            function getLikeList() {

                const url = "./getLikeList?user_pk=" + user_pk + "&trackMarkerDateValidity=" + trackMarkerDateValidity;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    const likeListBox = document.getElementById("likeListBox");
                    likeListBox.innerHTML = "";

                    if(response.data.length == 0) {
                        console.log("getLikeList");
                        const noLikeListWrapper = document.querySelector("#template .noLikeListWrapper").cloneNode(true);
                        likeListBox.appendChild(noLikeListWrapper);
                        // empty list
                        showLikeListModal();
                        return;

                    }
                    
                    let switchButton = true;

                    for(let e of response.data) {
                        console.log(e);
                        const likeListWrapper = document.querySelector("#template .likeListWrapper").cloneNode(true);
                        if(switchButton) {
                            likeListWrapper.classList.add("active");
                        }
                        likeListWrapper.querySelector(".likeListButton").onclick = () => {
                            console.log(e.user_pk + ": " + e.is_trace);
                            if(e.is_trace == "Y") {
                                // ghgh

                                // document.getElementById("alertContent").innerText = "Ïù¥ÎØ∏ Ï∂îÌñâÌïòÍ≥† ÏûàÏäµÎãàÎã§";
                                // document.getElementById("alertCheckButton").onclick = () => {
                                //     hideAlertModal();
                                // };
                                // showAlertModal();

                                // Î≤ÑÌäº 2Í∞úÏûàÎäî Î™®Îã¨ ÎùÑÏõåÏÑú itemÍ∏∞Îä•Ïù¥Îûë Ïó∞Í≤∞ÏãúÌÇ§Í∏∞ > ÏïÑÏù¥ÌÖúÏùÑ ÏÇ¨Ïö©ÌïòÏãúÍ≤†ÏäµÎãàÍπå?
                                // getImmediateCollectTrackMarkerItemCount();
                                // getSendMessageItemCount(e.user_pk);

                                return;

                            }

                            if(tracingTrackMarkers.length == traceMarkerUpTo) {

                                document.getElementById("alertContent").innerText = "ÌöüÏàòÎ•º Î™®Îëê ÏÇ¨Ïö©ÌïòÏÖ®ÏäµÎãàÎã§";
                                document.getElementById("alertCheckButton").onclick = () => {
                                    hideAlertModal();
                                };
                                showAlertModal();

                                return;

                            }

                            getClosestTrackMarker(e.user_pk);

                        };

                        likeListWrapper.querySelector(".heartIcon").style.fontVariationSettings = "'FILL' 1";
                        likeListWrapper.querySelector(".heartIcon").onclick = () => {

                            if(e.is_trace == "N") {
                                toggleLike(e.user_pk, likeListWrapper.querySelector(".heartIcon"));
                                return;
                            }

                            document.getElementById("alertContent").innerText = "Ï∂îÌñâÌïòÍ≥† ÏûàÏäµÎãàÎã§";
                            document.getElementById("alertCheckButton").onclick = () => {
                                hideAlertModal();
                            };
                            showAlertModal();

                        };

                        switch(e.open_rating) {

                            case "10" :
                                likeListWrapper.querySelector(".likeListName").innerText = e.nick_name;
                            case "9" :
                                likeListWrapper.querySelector(".likeListImage").style.background = 
                                    "url(/uploadFiles/" + e.profile_photo + ") no-repeat center";
                                    likeListWrapper.querySelector(".likeListImage").style.backgroundSize =
                                    "cover";
                            case "8" : 
                                if(e.preference == "L") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "Ïù¥ÏÑ±Ïï†";
                                }else if(e.preference == "B") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "Í≤åÏù¥";
                                }else if(e.preference == "G") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "Î†àÏ¶àÎπÑÏñ∏";
                                }else if(e.preference == "V") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "Î∞îÏù¥ÏÑπÏäàÏñº";
                                }else if(e.preference == "A") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "ÏóêÏù¥ÏÑπÏäàÏñº";
                                }else if(e.preference == "D") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "Îç∞ÎØ∏ÏÑπÏäàÏñº";
                                }else if(e.preference == "P") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "Ìå¨ÏÑπÏäàÏñº";
                                }else if(e.preference == "Q") {
                                    likeListWrapper.querySelector(".likeListPreference").innerText = "ÌÄòÏä§Ï≤òÎãù";
                                }
                            case "7", "6" : 
                                likeListWrapper.querySelector(".likeListMbtiType").innerText = e.blood_type;
                                likeListWrapper.querySelector(".likeListHobby").innerText = e.hobby;
                            case "5" :
                                likeListWrapper.querySelector(".likeListSmoking").innerText = e.smoking;
                                likeListWrapper.querySelector(".likeListDrinking").innerText = e.drinking;
                            case "4", "3" : 
                                likeListWrapper.querySelector(".likeListHeight").innerText = e.height;
                                likeListWrapper.querySelector(".likeListWeight").innerText = e.weight;
                                likeListWrapper.querySelector(".likeListBloodType").innerText = e.blood_type;
                            case "2": 
                                if(e.gender == 'W') {
                                    likeListWrapper.querySelector(".likeListGender").innerText = "üë±üèª‚Äç‚ôÄÔ∏è";
                                }else {
                                    likeListWrapper.querySelector(".likeListGender").innerText = "üë±üèª‚Äç‚ôÇÔ∏è";
                                }
                            case "1":
                                likeListWrapper.querySelector(".likeListPk").innerText = e.user_more_pk;

                                if(e.mstar_temp < 100) {
                                    likeListWrapper.querySelector(".likeListTemp").style.width = e.mstar_temp;
                                    likeListWrapper.querySelector(".likeListTempContent").innerText = e.mstar_temp;
                                }else {
                                    likeListWrapper.querySelector(".likeListTemp").style.width = 100;
                                    likeListWrapper.querySelector(".likeListTempContent").innerText = 100;
                                }

                        }

                        if(e.open_rating == 10) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + e.cnt + " / ‚àû )";
                        }else if(e.open_rating == 9) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (18 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 8) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (16 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 7) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (14 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 6) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (12 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 5) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (10 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 4) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (8 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 3) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (6 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 2) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + (4 - e.cnt) + " / 2 )";
                        }else if(e.open_rating == 1) {
                            likeListWrapper.querySelector(".likeListOpenRating").innerText = "Lv " + e.open_rating + " ( " + e.cnt + " / 2 )";
                        }

                        if(e.star_rating == "SSR") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("SSROuter");
                        }else if(e.star_rating == "SR") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("SROuter");
                        }else if(e.star_rating == "S") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("SOuter");
                        }else if(e.star_rating == "fiveStar") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("FiveStarROuter");
                        }else if(e.star_rating == "fourStar") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("FourStarROuter");
                        }else if(e.star_rating == "threeStar") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("ThreeStarROuter");
                        }else if(e.star_rating == "twoStar") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("TwoStarOuter");
                        }else if(e.star_rating == "oneStar") {
                            likeListWrapper.querySelector(".likeListOuter").classList.add("OneStarOuter");
                        }

                        switchButton = false;

                        likeListBox.appendChild(likeListWrapper);

                    }
                    
                    showLikeListModal();

                });

            }

            function getImmediateCollectTrackMarkerItemCount() {

                const url = "./getItemCount?user_pk=" + user_pk + "&item_pk=5";

                fetch(url)
                .then(response => response.json())
                .then(response => {
                    
                    if(response.data <= 0) {

                        document.getElementById("alertContent").innerText = "ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎäî ÏïÑÏù¥ÌÖúÏù¥ ÏóÜÏäµÎãàÎã§";
                        document.getElementById("alertCheckButton").onclick = () => {
                            hideAlertModal();
                        };
                        showAlertModal();

                        return;

                    }

                    saveImmediateCollectTrackMarkerItemUse();

                });

            }

            function saveImmediateCollectTrackMarkerItemUse() {

                const url = "./insertUserItemInfo?user_pk=" + user_pk + "&item_pk=5";

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    // collectTrackMarkerInfo(e); > Ïù¥Í±∞ Ïã§ÌñâÎêòÎäî Ï≤òÏùåÎ∂ÄÎ∂Ñ eÏóê Ï±ÑÏõåÏßÄÎäî Í∞íÏù¥ Ï†ÑÎ∂Ä ÏûàÎäîÏßÄ ÌôïÏù∏ÌïòÍ∏∞ ÏïÑÎßà logÎ∂ÄÎ∂ÑÏù¥ ÏóÜÏùÑ ÎìØ

                });

            }

            function getSendMessageItemCount(userWriterPk) {

                const url = "./getItemCount?user_pk=" + user_pk + "&item_pk=7";

                fetch(url)
                .then(response => response.json())
                .then(response => {
                    
                    if(response.data <= 0) {

                        document.getElementById("alertContent").innerText = "ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎäî ÏïÑÏù¥ÌÖúÏù¥ ÏóÜÏäµÎãàÎã§";
                        document.getElementById("alertCheckButton").onclick = () => {
                            hideAlertModal();
                        };
                        showAlertModal();

                        return;

                    }

                    // Î©îÏÑ∏ÏßÄ Ï†ÅÏùÑ Ïàò ÏûàÎäî Î™®Îã¨ ÎùÑÏö∞Í∏∞
                    // show SendMessageItemModal();
                    // Î≥¥ÎÇ¥Í∏∞ Î≤ÑÌäº > sendMessage(userWriterPk);

                });

            }

            function sendMessage(userWriterPk) {

                // message ÎÇ¥Ïö© Í∞ÄÏ†∏Ïò§Í∏∞ asdf
                const message = "Asdf";
                const title = "ÎàÑÍµ∞Í∞ÄÍ∞Ä Î©îÏÑ∏ÏßÄÎ•º Î≥¥ÎÉàÏñ¥Ïöî!";
                const linkPath = "/follow/gamePage";
                const notifyImg = "N";

                const url = "./sendMessage?user_pk=" + userWriterPk + "&title=" + title +
                    "&message=" + message + "&link_path=" + linkPath + "&notify_img=" + notifyImg;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    saveSendMessageItemUse();

                });

            }

            function saveSendMessageItemUse() {

                const url = "./insertUserItemInfo?user_pk=" + user_pk + "&item_pk=7";

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    document.getElementById("alertContent").innerText = "Î©îÏÑ∏ÏßÄ Ï†ÑÎã¨Ïù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§";
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                    };
                    showAlertModal();

                });

            }
            

            function getClosestTrackMarker(userWriterPk) {

                const url = "./getClosestTrackMarker?user_pk=" + user_pk + "&user_writer_pk=" +
                    userWriterPk + "&latitude=" + currentLat + "&longitude=" + currentLng + "&trackMarkerDateValidity=" + trackMarkerDateValidity;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    if(!response.data) {

                    document.getElementById("alertContent").innerText = "ÏïÑÏßÅ Ï≤¥Ï∑®Î•º Î∂ÑÏÇ¨ÌïòÏßÄ ÏïäÏïòÏäµÎãàÎã§";
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                    };
                    showAlertModal();

                        return;

                    }

                    hideLikeListModal();
                    saveClosestTrackMarker(response.data);

                });

            }

            function saveClosestTrackMarker(e) {
                console.log(e);
                const url = "./insertLikeLogInfo?user_pk=" + user_pk + "&log_pk=" + e.log_pk +
                    "&markLat=" + e.latitude + "&markLng=" + e.longitude;
                
                fetch(url)
                .then(response => response.json())
                .then(response => {

                    getTracingTrackMarkers();
                    getLikeList();

                });

            }

            function toggleLike(userWriterPk, target) {

                // .onclick = () => {} ÏúºÎ°ú Ìò∏Ï∂ú & ifÎ¨∏ÏúºÎ°ú is_trace Í±∏Îü¨ÎÇ¥Í∏∞

                const url = "./isLike?user_collector_pk=" + user_pk + "&user_writer_pk=" + userWriterPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    if(response.data) {

                        deleteLike(userWriterPk, target);

                    }

                    insertLike(userWriterPk, target);

                });
                
            }

            function insertLike(userWriterPk, target) {

                const url = "./insertLike?user_collector_pk=" + user_pk + "&user_writer_pk=" + userWriterPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    target.style.fontVariationSettings = "'FILL' 1";

                });

            }

            function deleteLike(userWriterPk, target) {

                const url = "./deleteLike?user_collector_pk=" + user_pk + "&user_writer_pk=" + userWriterPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    target.style.fontVariationSettings = "'FILL' 0";

                });

            }

            function toggleAction() {

                const checkClaw = document.getElementById("checkClaw");

                if(checkClaw.value == "hide") {

                    showAction();

                }else {

                    hideAction();

                }

            }

            function showAction() {

                const checkClaw = document.getElementById("checkClaw");
                checkClaw.value = "show";

                const actionIcons = document.getElementsByClassName("actionIcon");
                for(e of actionIcons) {
                    e.style.animation = "actionIconOn 0.3s linear 1";
                    e.style.animationFillMode = "both";
                }

                const markClaw = document.getElementById("markClaw");
                markClaw.style.animation = "markClawOn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1";
                markClaw.style.animationFillMode = "both";

                const scanClaw = document.getElementById("scanClaw");
                scanClaw.style.animation = "scanClawOn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1";
                scanClaw.style.animationFillMode = "both";
                
                const traceClaw = document.getElementById("traceClaw");
                traceClaw.style.animation = "traceClawOn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1";
                traceClaw.style.animationFillMode = "both";

                const loveClaw = document.getElementById("loveClaw");
                loveClaw.style.animation = "loveClawOn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1";
                loveClaw.style.animationFillMode = "both";

            }

            function hideAction() {

                const checkClaw = document.getElementById("checkClaw");
                checkClaw.value = "hide";

                const actionIcons = document.getElementsByClassName("actionIcon");
                for(e of actionIcons) {
                    e.style.animation = "actionIconOff 0.3s linear 1";
                }

                const markClaw = document.getElementById("markClaw");
                markClaw.style.animation = "markClawOff 0.3s cubic-bezier(0.6, -0.28, 0.735, 0.045) 1";

                const scanClaw = document.getElementById("scanClaw");
                scanClaw.style.animation = "scanClawOff 0.3s cubic-bezier(0.6, -0.28, 0.735, 0.045) 1";
                
                const traceClaw = document.getElementById("traceClaw");
                traceClaw.style.animation = "traceClawOff 0.3s cubic-bezier(0.6, -0.28, 0.735, 0.045) 1";

                const loveClaw = document.getElementById("loveClaw");
                loveClaw.style.animation = "loveClawOff 0.3s cubic-bezier(0.6, -0.28, 0.735, 0.045) 1";

            }

            function openBag() {

                getCollectionList();

            }

            function getCollectionList() {

                resetCollectionModal();

                const url = "./getCollectionList?user_pk=" + user_pk;

                fetch(url)
                .then(response => response.json())
                .then(response => {
                    
                    const collectionLikeListBox = document.getElementById("collectionLikeListBox");
                    const collectionListBox = document.getElementById("collectionListBox");

                    for(e of response.data) {

                        const collectionWrapper = document.querySelector("#template .collectionWrapper").cloneNode(true);

                        const collectionOuter = collectionWrapper.querySelector(".collectionOuter");
                        const collectionInner = collectionWrapper.querySelector(".collectionInner");
                        const collectionOpenRating = collectionWrapper.querySelector(".collectionOpenRating");
                        const collectionOpenRatngContent = collectionWrapper.querySelector(".collectionOpenRatngContent");
                        const collectionProgress = collectionWrapper.querySelector(".collectionProgress");
                        
                        collectionWrapper.querySelector(".collectionPk").innerText = "No. " + e.user_more_pk;
                        collectionOpenRating.innerText = "Lv " + e.open_rating;

                        if(e.star_rating == 'SSR') {
                            collectionOuter.classList.add("SSROuter");
                            collectionInner.classList.add("SSRInner");
                        }else if(e.star_rating == 'SR') {
                            collectionOuter.classList.add("SROuter");
                            collectionInner.classList.add("SRInner");
                        }else if(e.star_rating == 'S') {
                            collectionOuter.classList.add("SOuter");
                            collectionInner.classList.add("SInner");
                        }else if(e.star_rating == 'oneStar') {
                            collectionOuter.classList.add("OneStarOuter");
                            collectionInner.classList.add("OneStarInner");
                        }else if(e.star_rating == 'twoStar') {
                            collectionOuter.classList.add("TwoStarOuter");
                            collectionInner.classList.add("TwoStarInner");
                        }else if(e.star_rating == 'threeStar') {
                            collectionOuter.classList.add("ThreeStarOuter");
                            collectionInner.classList.add("ThreeStarInner");
                        }else if(e.star_rating == 'fourStar') {
                            collectionOuter.classList.add("FourStarOuter");
                            collectionInner.classList.add("FourStarInner");
                        }else {
                            collectionOuter.classList.add("FiveStarOuter");
                            collectionInner.classList.add("FiveInner");
                        }

                        if(e.open_rating == '10') {
                            collectionInner.style.background = "url(/uploadFiles/" + e.profile_photo + ") no-reapt center";
                            collectionProgress.style.width = "100%";
                            collectionOpenRatngContent.innerText = e.collect_count + " / ‚àû";
                        }else if(e.open_rating == '9') {
                            collectionInner.style.background = "url(/uploadFiles/" + e.profile_photo + ") no-reapt center";
                            collectionProgress.style.width = (18 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (18 - e.collect_count) + " / 2";
                        }else if(e.open_rating == '8') {
                            collectionProgress.style.width = (16 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (16 - e.collect_count) + " / 2";
                        }else if(e.open_rating == '7') {
                            collectionProgress.style.width = (14 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (14 - e.collect_count) + " / 2";
                        }else if(e.open_rating == '6') {
                            collectionProgress.style.width = (12 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (12 - e.collect_count) + " / 2";
                        }else if(e.open_rating == '5') {
                            collectionProgress.style.width = (10 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (10 - e.collect_count) + " / 2";
                        }else if(e.open_rating == '4') {
                            collectionProgress.style.width = (8 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (8 - e.collect_count) + " / 2";
                        }else if(e.open_rating == '3') {
                            collectionProgress.style.width = (6 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (6 - e.collect_count) + " / 2";
                        }else if(e.open_rating == '2') {
                            collectionProgress.style.width = (4 - e.collect_count) / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = (4 - e.collect_count) + " / 2";
                        }else {
                            collectionProgress.style.width = e.collect_count / 2 * 100 + "%";
                            collectionOpenRatngContent.innerText = e.collect_count + " / 2";
                        }

                        collectionOuter.onclick = () => {

                        reloadDetailCollection(e);

                        };

                        document.getElementById("collectionLikeCnt").innerText = e.like_cnt;

                        if(e.is_like == 'Y') {

                            collectionLikeListBox.appendChild(collectionWrapper);
                            
                        }else {

                            collectionListBox.appendChild(collectionWrapper);

                        }

                    }

                    showCollectionModal();


                });

            }

            function reloadDetailCollection(e) {

                switch(e.open_rating) {

                    case "10" :
                        document.getElementById("collectionDetailName").innerText = e.nick_name;
                    case "9" :
                        document.getElementById("collectionDetailModalImage").style.background = 
                            "url(/uploadFiles/" + e.profile_photo + ") no-repeat center";
                        document.getElementById("collectionDetailModalImage").style.backgroundSize = "cover";
                    case "8" : 
                        if(e.preference == "L") {
                            document.getElementById("likeListPreference").innerText = "Ïù¥ÏÑ±Ïï†";
                        }else if(e.preference == "B") {
                            document.getElementById("likeListPreference").innerText = "Í≤åÏù¥";
                        }else if(e.preference == "G") {
                            document.getElementById("likeListPreference").innerText = "Î†àÏ¶àÎπÑÏñ∏";
                        }else if(e.preference == "V") {
                            document.getElementById("likeListPreference").innerText = "Î∞îÏù¥ÏÑπÏäàÏñº";
                        }else if(e.preference == "A") {
                            document.getElementById("likeListPreference").innerText = "ÏóêÏù¥ÏÑπÏäàÏñº";
                        }else if(e.preference == "D") {
                            document.getElementById("likeListPreference").innerText = "Îç∞ÎØ∏ÏÑπÏäàÏñº";
                        }else if(e.preference == "P") {
                            document.getElementById("likeListPreference").innerText = "Ìå¨ÏÑπÏäàÏñº";
                        }else if(e.preference == "Q") {
                            document.getElementById("likeListPreference").innerText = "ÌÄòÏä§Ï≤òÎãù";
                        }
                    case "7", "6" : 
                        document.getElementById("collectionDetailMbtiType").innerText = e.blood_type;
                        document.getElementById("collectionDetailHobby").innerText = e.hobby;
                    case "5" :
                        document.getElementById("collectionDetailSmoking").innerText = e.smoking;
                        document.getElementById("collectionDetailDrinking").innerText = e.drinking;
                    case "4", "3" : 
                        document.getElementById("collectionDetailHeight").innerText = e.height;
                        document.getElementById("collectionDetailWeight").innerText = e.weight;
                        document.getElementById("collectionDetailBloodType").innerText = e.blood_type;
                    case "2": 
                        if(e.gender == 'W') {
                            document.getElementById("collectionDetailGender").innerText = "üë±üèª‚Äç‚ôÄÔ∏è";
                        }else {
                            document.getElementById("collectionDetailGender").innerText = "üë±üèª‚Äç‚ôÇÔ∏è";
                        }
                    case "1":

                        if(e.mstar_temp < 100) {
                            document.getElementById("collectionDetailTemp").style.width = e.mstar_temp;
                            document.getElementById("collectionDetailTempContent").innerText = e.mstar_temp;
                        }else {
                            document.getElementById("collectionDetailTemp").style.width = 100;
                            document.getElementById("collectionDetailTempContent").innerText = 100;
                        }

                }

                if(e.open_rating == 10) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + e.collect_count + " / ‚àû )";
                }else if(e.open_rating == 9) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (18 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 8) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (16 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 7) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (14 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 6) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (12 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 5) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (10 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 4) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (8 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 3) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (6 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 2) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + (4 - e.collect_count) + " / 2 )";
                }else if(e.open_rating == 1) {
                    document.getElementById("collectionDetailOpenRating").innerText = "Lv " + e.open_rating + " ( " + e.collect_count + " / 2 )";
                }

                if(e.star_rating == "SSR") {
                    document.getElementById("collectionDetailOuter").classList.add("SSROuter");
                }else if(e.star_rating == "SR") {
                    document.getElementById("collectionDetailOuter").classList.add("SROuter");
                }else if(e.star_rating == "S") {
                    document.getElementById("collectionDetailOuter").classList.add("SOuter");
                }else if(e.star_rating == "fiveStar") {
                    document.getElementById("collectionDetailOuter").classList.add("FiveStarROuter");
                }else if(e.star_rating == "fourStar") {
                    document.getElementById("collectionDetailOuter").classList.add("FourStarROuter");
                }else if(e.star_rating == "threeStar") {
                    document.getElementById("collectionDetailOuter").classList.add("ThreeStarROuter");
                }else if(e.star_rating == "twoStar") {
                    document.getElementById("collectionDetailOuter").classList.add("TwoStarOuter");
                }else if(e.star_rating == "oneStar") {
                    document.getElementById("collectionDetailOuter").classList.add("OneStarOuter");
                }

                // ÌÅêÌîºÌä∏ÌôîÏÇ¥ ÏùºÎã® ÎûúÎç§ÏúºÎ°ú Ìïú Í∞ú ÏàòÏßë > Ïó¨Í∏∞ÏÑú ÏûàÎäîÍ±∏Î°ú // ÌôïÏ†ï ÌïúÍ∞úÎ©¥ getCollectionLogList Ïó¨Í∏∞ÏóêÏÑú ÏøºÎ¶¨Î∂ÄÌÑ∞ Îã§Ïãú ÏßúÍ∏∞ ghgh > ÌôïÏ†ï 1Í∞ú ÎùºÏã†Îã§,,,
                // Î≤ÑÌäº onclick > cupidArrows(e.user_pk);

                getCollectionLogList(e.user_pk);

            }

            function cupidArrows(userWriterPk) {

                document.getElementById("alertWithCancelContent").innerText = `ÏïÑÏù¥ÌÖúÏùÑ ÏÇ¨Ïö©ÌïòÏãúÍ≤†ÏäµÎãàÍπå?`;
                document.getElementById("alertWithCancelCheckButton").onclick = () => {
                    hideAlertWithCancelModal();
                    getCupidArrowsItemCount(userWriterPk);
                    saveCupidArrowsItemUse();
                };
                showAlertWithCancelModal();

            }
            
            function getCupidArrowsItemCount(userWriterPk) {

                const url = "./getItemCount?user_pk=" + user_pk + "&item_pk=8";

                fetch(url)
                .then(response => response.json())
                .then(response => {
                    
                    if(response.data <= 0) {

                        document.getElementById("alertContent").innerText = "ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎäî ÏïÑÏù¥ÌÖúÏù¥ ÏóÜÏäµÎãàÎã§";
                        document.getElementById("alertCheckButton").onclick = () => {
                            hideAlertModal();
                        };
                        showAlertModal();

                        return;

                    }

                    getPlusTrackMarker(userWriterPk);

                });

            }

            function saveCupidArrowsItemUse() {

                const url = "./insertUserItemInfo?user_pk=" + user_pk + "&item_pk=8";

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    document.getElementById("alertContent").innerText = "ÏàòÏßëÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§";
                    document.getElementById("alertCheckButton").onclick = () => {
                        hideAlertModal();
                    };
                    showAlertModal();

                });

            }

            function getCollectionLogList(userWriterPk) {

                const url = "./getCollectionLogList?user_pk=" + user_pk + "&user_writer_pk=" + userWriterPk + "&trackMarkerDateValidity=" + trackMarkerDateValidity;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    const collectionDetailCardListBox = document.getElementById("collectionDetailCardListBox");
                    collectionDetailCardListBox.innerHTML = "";

                    if(response.data.length == 0) {

                        return;
                    }

                    for(e of response.data) {

                        let wrapper;

                        if(e.card_rating == "common") {
                            wrapper = document.querySelector("#template .collectionDetailCardCommonWrapper").cloneNode(true);
                        }else if(e.card_rating == "rare") {
                            wrapper = document.querySelector("#template .collectionDetailCardRareWrapper").cloneNode(true);
                        }else {
                            wrapper = document.querySelector("#template .collectionDetailCardLegendaryWrapper").cloneNode(true);
                        }

                        if(e.is_collect == "N") {
                            wrapper.querySelector(".collectionDetailCardFilter").style.filter = "brightness(50%)";
                        }else {
                            wrapper.querySelector(".collectionDetailCardFilter").onclick = () => {
                                reloadCollectionCard(e);
                            };
                        }

                        wrapper.querySelector(".collectionDetailLogPk").innerText = e.log_pk;
                        
                        collectionDetailCardListBox.appendChild(wrapper);

                    }

                    showCollectionDetailModal();

                });
                
            }

            function reloadCollectionCard(e) {
                
                // resetmodal

                // Í∞í Î∂ôÏù¥Í∏∞
                getCommentList(e.log_pk);

            }

            function getCommentList(logPk) {

                const url = "./getCommentList?log_pk=" + logPk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                    if(response.data.length == 0) {

                        return;
                    }

                    for(e of response.data) {

                        // Í∞í Î∂ôÏù¥Í∏∞

                    }

                    // showmodal; asdf
                    showCollectionCardModal();

                });

            }

            function openMyPage() {

                // getMyPageInfo();
                showMyPageModal();

            }

            function getMyPageInfo() {

                const url = "./getMyPageInfo?user_pk=" + user_pk;

                fetch(url)
                .then(response => response.json())
                .then(resposne => {

                    // asdf

                });

            }

            function showMyTrackMarkersInfo() {

                getMyTrackMarkersInfo();

            }

            function getMyTrackMarkersInfo() {
//asdf
                const url = "./getMyTrackMarkersInfo?user_pk=" + user_pk;

                fetch(url)
                .then(response => response.json())
                .then(response => {

                });

            }

            function inputWriteTrackMarkImage() {
                const inputImage = document.getElementById("writeTrackMarkImage");
                inputImage.click();
            }

            function previewWriteTrackMarkImage() {
                const inputImage = document.getElementById("writeTrackMarkImage");
                const writeTrackMarkImageHere = document.getElementById("writeTrackMarkImageHere");

                if([...inputImage.files].length === 0) {
                    return;
                }

                const imageUrl = URL.createObjectURL(inputImage.files[0]);
                document.getElementById("writeTrackMarkNoimage").hidden = true;
                writeTrackMarkImageHere.style.background = "url(" + imageUrl + ") no-repeat center";
                writeTrackMarkImageHere.style.backgroundSize = "cover";
            }

            function blockOn() {

                document.getElementById("block").hidden = false;

            }

            function blockOff() {

                document.getElementById("block").hidden = true;

            }

            function showAlertWithCancelModal() {
                
                const modal = bootstrap.Modal.getOrCreateInstance("#alertWithCancelModal");
                modal.show();

            }

            function hideAlertWithCancelModal() {
                
                const modal = bootstrap.Modal.getOrCreateInstance("#alertWithCancelModal");
                modal.hide();

            }

            function showAlertModal() {
                
                const modal = bootstrap.Modal.getOrCreateInstance("#alertModal");
                modal.show();

            }

            function hideAlertModal() {
                
                const modal = bootstrap.Modal.getOrCreateInstance("#alertModal");
                modal.hide();

            }

            function showWriteMoreInfoModal() {

                resetWriteMoreInfoModal();

                const modal = bootstrap.Modal.getOrCreateInstance("#writeMoreInfoModal");
                modal.show();

            }

            function hideWriteMoreInfoModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#writeMoreInfoModal");
                modal.hide();

            }
            
            function showWriteTrackMarkModal() {

                resetWriteTrackMarkModal();

                const modal = bootstrap.Modal.getOrCreateInstance("#writeTrackMarkModal");
                modal.show();

            }

            function hideWriteTrackMarkModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#writeTrackMarkModal");
                modal.hide();

            }
            
            function showPreviewTrackMarkerModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#previewTrackMarkerModal");
                modal.show();

            }

            function hidePreviewTrackMarkerModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#previewTrackMarkerModal");
                modal.hide();

            }

            function showTrackMarkerModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#trackMarkerModal");
                modal.show();

            }
            
            function showCollectionModal() {

                document.getElementById("collectionModalHeight").style.height = mapHeight * 0.9 + "px";
                // document.getElementById("collectionListColorBox").style.height = mapHeight * 0.625;
                document.getElementById("collectionListBoxHeight").style.height = mapHeight * 0.9 * 0.77 + "px";

                const modal = bootstrap.Modal.getOrCreateInstance("#collectionModal");
                modal.show();

                // setTimeout(() => window.scrollTo(0,0), 1000);

            }

            function showCollectionDetailModal() {
                const modal = bootstrap.Modal.getOrCreateInstance("#collectionDetailModal");
                modal.show();


                document.getElementById("collectionDetailModalHeight").style.height = mapHeight * 0.9 + "px";
                //document.getElementById("collectionDetailInfoHeight").style.height;

                const collectionDetailInfoHeight = parseFloat(getComputedStyle(document.getElementById("collectionDetailInfoHeight")).height.replace("px",""));

                document.getElementById("collectionDetailModalCardHeight").style.height = (mapHeight * 0.9 - collectionDetailInfoHeight - 100) + "px";

            }

            function showMyPageModal() {

                document.getElementById("myPageModalHeight").style.height = mapHeight * 0.9 + "px";

                const modal = bootstrap.Modal.getOrCreateInstance("#myPageModal");
                modal.show();

            }

            function showLikeListModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#likeListModal");
                modal.show();

                document.getElementById("likeListCarouselPrev").click();

            }

            function hideLikeListModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#likeListModal");
                modal.hide();

            }

            function showCollectionCardModal() {

                const modal = bootstrap.Modal.getOrCreateInstance("#collectionCardModal");
                modal.show();

                document.getElementById("collectionCardModalHeight").style.height = mapHeight * 0.9 * 0.85 + "px";

            }

            function showShopModal(){

                const itemModal = bootstrap.Modal.getOrCreateInstance("#itemModal");
                loadShopItemList();
                getMyCoin();
                itemModal.show();

            }

            function closeShopModal(){

                const itemModal = bootstrap.Modal.getOrCreateInstance("#itemModal");
                itemModal.hide();

            }

            function resetWriteMoreInfoModal() {
                document.getElementById("writeMoreInfoHeight").value = "";
                document.getElementById("writeMoreInfoWeight").value = "";
                document.getElementById("writeMoreInfoBloodType").value = "0";
                document.getElementById("writeMoreInfoMbtiType").value = "0";
                document.getElementById("writeMoreInfoHobby").value = "";
                document.getElementById("yesDrinking").checked = false;
                document.getElementById("yesSmoking").checked = false;
                document.getElementById("writeMoreInfoPreference").value = "0";
                document.getElementById("writeBlank").innerText = "";
            }

            function resetWriteTrackMarkModal() {
                document.getElementById("writeTrackMarkNoimage").hidden = false;
                document.getElementById("writeTrackMarkImageHere").style.removeProperty("background", "background-size");
                document.getElementById("writeTrackMarkContent").value = "";
            }

            function resetPreviewTrackMarkerModal() {
                // modal ÎÇ¥Ïö© Ï¥àÍ∏∞Ìôî
            }

            function resetTrackMarkerModal() {
                document.getElementById("trackMarkerPreviewCommentContent").innerText = "";
                document.getElementById("trackMarkerCommentContent").value = "";
                document.getElementById("trackMarkerCommentHidden").hidden = false;
            }

            function resetCollectionModal() {
                document.getElementById("collectionLikeCnt").innerText = "0";
                document.getElementById("collectionLikeListBox").innerHTML = "";
                document.getElementById("collectionListBox").innerHTML = "";
            }

            // window.addEventListener("DOMContentLoaded", () => {

            //     getMyUserPk();
            //     createMap();
            //     getMyLocation();
            //     showPreviewTrackMarkerModal();

            // })

        </script>

        <script>
            window.addEventListener("DOMContentLoaded", () => {

                const topNaviHeight = parseFloat(getComputedStyle(document.getElementById("topNavi")).height.replace("px", ""));
                const bottomNaviHeight = parseFloat(getComputedStyle(document.getElementById("bottomNavi")).height.replace("px", ""));
                const bodyHeight = parseFloat(getComputedStyle(document.body).height.replace("px", ""));
                const bodyBottomMargin = parseFloat(getComputedStyle(document.body).marginBottom.replace("px", ""));
                // alert(screen.availHeight);
                // alert(window.innerHeight);
                // alert(screen.height);
                // alert(bodyHeight);

                // alert(getComputedStyle(document.getElementById("map")).height);

                // const xxx = parseFloat(getComputedStyle(document.getElementById("map")).height.replace("px", ""));

                // mapHeight = screen.availHeight - topNaviHeight - bottomNaviHeight;
                mapHeight = window.innerHeight - topNaviHeight - bottomNaviHeight;
                document.getElementById("map").style.height = mapHeight  + "px";
                // document.getElementById("map").style.height = xxx - topNaviHeight - bottomNaviHeight + "px";

                getMyUserPk();
                createMap();
                getMyLocation();

                // window.scrollTo(0,0);
            });

        </script>


        <style>

            @font-face {
                font-family: 'omyu_pretty';
                src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2304-01@1.0/omyu_pretty.woff2') format('woff2');
                font-weight: normal;
                font-style: normal;
            }

            body {
                font-family: 'omyu_pretty';
                min-width: 375px;
                touch-action: none;
            }

            #map {
                position: relative;
                overflow: hidden;
                width: 100%;
                height: 100vh;
            }

            #block {
                position: absolute;
                z-index: 9999;
                width: 100%;
                height: 32rem;
            }
            
            .commonStyle {
                position: absolute;
                z-index: 1000;
            }

            #locationIcon {
                font-variation-settings:
                'FILL' 1;
                font-size: 1.2rem;
                color: #211e1e;
            }

            #pawIcon {
                font-variation-settings:
                'FILL' 1;
                font-size: 1.8rem;
                color: white;
            }

            .actionIcon {
                font-size: 0;
                color: #000;
                /* animation: actionIconOn 0.3s linear 1;
                animation-fill-mode: both; */
            }

            @keyframes actionIconOn {
                to {
                    font-size: 1.3rem;
                }
            }

            @keyframes actionIconOff {
                from {
                    font-size: 1.3rem;
                }
            }

            #collectionModalCloseIcon {
                font-variation-settings:
                'FILL' 1;
                color: white;
            }

            .myLocationMarkerBox {
                position: relative;
                width: 2rem;
                height: 2rem;
            }

            .myLocationMarker {
                position: absolute;
                border-radius: 50%;
                top: calc(50% - var(--my-location-marker-radius));
                left: calc(50% - var(--my-location-marker-radius));
            }

            .myLocationMarker.first {
                width: 2rem;
                height: 2rem;
                background: rgb(0, 0, 0, 0.1);
                --my-location-marker-radius: 1rem;
            }

            .myLocationMarker.second {
                width: 0.9rem;
                height: 0.9rem;
                background: white;
                box-shadow: 0 0 2px 2px rgb(0, 0, 0, 0.5);
                --my-location-marker-radius: 0.45rem;
            }

            .myLocationMarker.third {
                width: 0.65625rem;
                height: 0.65625rem;
                background: #211e1e;
                --my-location-marker-radius: 0.328125rem;
            }

            .scanMarkerBox {
                position: relative;
                width: 4rem;
                height: 4rem;
            }

            .scanMarkerImage {
                position: absolute;
                width: 4rem;
                height: 4rem;
            }

            .scanMarkerContent {
                position: absolute;
                border-radius: 50%;
            }

            #shopButton {
                width: 3rem;
                height: 3rem;
                right: 1rem;
                top: 2rem;
            }

            #myPageButton {
                width: 3rem;
                height: 3rem;
                right: 1rem;
                top: 5.5rem;
            }

            #bagButton {
                width: 3rem;
                height: 3rem;
                right: 1rem;
                top: 9rem;
            }

            #locationButton {
                position: relative;
                width: 2rem;
                height: 2rem;
                right: 1.5rem;
                bottom: 2.5rem;
                border-radius: 50%;
                border: 1px solid rgb(0, 0, 0, 0.15);
                box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                background: white;
            }

            #actionButton {
                width: 3rem;
                height: 3rem;
                left: calc(50% - 1.5rem);
                /* bottom: 7.5rem; */
                border-radius: 50%;
                border: 1px solid rgb(0, 0, 0, 0.15);
                box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                /* background: linear-gradient(to right, #FDE4CD 50%, #FFC98B 50%); */
                background: #211e1e;
            }

            #actionToggle {
                width: 3rem;
                height: 3rem;
                /* right: calc(50% - 1.5rem);
                bottom: 7.5rem; */
            }

            .myTrackMarker {
                width: 1.5rem;
                height: 1.5rem;
                background: url("/public/image/follow/mytrackmarker.png") no-repeat center;
                background-size : cover;
            }

            #claw1 {
                width: 0.6rem;
                height: 0.6rem;
                border-radius: 50%;
                background: #211e1e;
                top: 0.4rem;
                left: 0.6rem;
            }
            
            #claw2 {
                width: 0.6rem;
                height: 0.6rem;
                border-radius: 50%;
                background: #211e1e;
                top: 0.1rem;
                left: 0.9rem;
            }

            #claw3 {
                width: 0.6rem;
                height: 0.6rem;
                border-radius: 50%;
                background: #211e1e;
                top: 0.1rem;
                right: 0.9rem;
            }
            
            #claw4 {
                width: 0.6rem;
                height: 0.6rem;
                border-radius: 50%;
                background: #211e1e;
                top: 0.4rem;
                right: 0.6rem;
            }

            #markClaw {
                width: 0.4rem;
                height: 0.4rem;
                border-radius: 50%;
                background: white;
                top: 0.9rem;
                left: 0.6rem;
            }

            @keyframes markClawOn {
                to {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(-4rem, -2.5rem);
                }
            }

            @keyframes markClawOff {
                from {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(-4rem, -2.5rem);
                }
            }
            
            #scanClaw {
                width: 0.4rem;
                height: 0.4rem;
                border-radius: 50%;
                background: white;
                top: 0.5rem;
                left: 0.95rem;
            }

            @keyframes scanClawOn {
                to {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(-2.1rem, -4rem);
                }
            }

            @keyframes scanClawOff {
                from {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(-2.1rem, -4rem);
                }
            }

            #traceClaw {
                width: 0.4rem;
                height: 0.4rem;
                border-radius: 50%;
                background: white;
                top: 0.5rem;
                right: 0.95rem;
            }

            @keyframes traceClawOn {
                to {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(2.1rem, -4rem);
                }
            }

            @keyframes traceClawOff {
                from {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(2.1rem, -4rem);
                }
            }
            
            #loveClaw {
                width: 0.4rem;
                height: 0.4rem;
                border-radius: 50%;
                background: white;
                top: 0.9rem;
                right: 0.6rem;
                /* animation: loveClawOn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1;
                animation-fill-mode: both; */
            }

            @keyframes loveClawOn {
                to {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(4rem, -2.5rem);
                }
            }

            @keyframes loveClawOff {
                from {
                    width: 2.25rem;
                    height: 2.25rem;
                    border: 1px solid rgb(0, 0, 0, 0.15);
                    box-shadow: 0 1px 1px 0 rgb(94, 94, 94, 0.7);
                    transform: translate(4rem, -2.5rem);
                }
            }

            .SSROuter {
                background: radial-gradient(white, #ffff90ff);
                border: 1px solid #ffdf00;
            }

            .SSRInner {
                border: 1px solid #ffdf00;
            }

            .SROuter {
                background: radial-gradient(white, #cc4125ff);
                border: 1px solid #980000;
            }

            .SRInner {
                border: 1px solid #980000;
            }

            .SOuter {
                background: radial-gradient(white, #c27ba0ff);
                border: 1px solid #a64d79;
            }

            .SInner {
                border: 1px solid #a64d79;
            }

            .FiveStarOuter {
                background: radial-gradient(white, #8e7cc3ff);
                border: 1px solid #674ea7;
            }

            .FiveStarInner {
                border: 1px solid #674ea7;
            }

            .FourStarOuter {
                background: radial-gradient(white, #3c78d8ff);
                border: 1px solid #0b5394;
            }

            .FourStarInner {
                border: 1px solid #0b5394;
            }

            .ThreeStarOuter {
                background: radial-gradient(white, #93c47dff);
                border: 1px solid #38761d;
            }

            .ThreeStarInner {
                border: 1px solid #38761d;
            }

            .TwoStarOuter {
                background: radial-gradient(white, #b7b7b7ff);
                border: 1px solid #666666;
            }

            .TwoStarInner {
                border: 1px solid #666666;
            }

            .OneStarOuter {
                background: radial-gradient(white, #d9d9d9ff);
                border: 1px solid #b7b7b7;
            }

            .OneStarInner {
                border: 1px solid #b7b7b7;
            }

        </style>

    </head>

    <body>

        <div class="container-fluid">
            <div th:replace="~{/commons/naviBar.html :: topNavi}"></div>
            <div th:replace="~{/commons/naviBar.html :: bottomNavi}"></div>
            <div th:replace="~{/commons/naviBar.html :: motifyModal}"></div>
            <div th:replace="~{/commons/naviBar.html :: unReadNotifyListTemplate}"></div>
            <div th:replace="~{/commons/naviBar.html :: readNotifyListTeplate}"></div>
            <div class="row">
                <div class="col px-0">
                    <div id="map">
                        <div id="block" hidden></div>
                        <div onclick="showShopModal()" id="shopButton" class="commonStyle">
                            <img class="img-fluid" th:src="@{/public/image/follow/shop.png}">
                        </div>
                        <div onclick="openMyPage()" id="myPageButton" class="commonStyle">
                            <img id="myPageImage" class="img-fluid" th:src="@{/public/image/follow/female.png}">
                        </div>
                        <div onclick="openBag()" id="bagButton" class="commonStyle">
                            <img class="img-fluid" th:src="@{/public/image/follow/bag.png}">
                        </div>

                        <!-- modal -->

                        <div id="alertModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 2000;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: auto; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div class="modal-header text-white fw-bold py-1 px-1 border-0" style="font-size: 1rem;">
                                        ÏïåÎ¶º
                                    </div>
                                    <div class="modal-body pb-1 text-center rounded" style="background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4);">
                                        <div id="alertContent" style="color: #81461A;">

                                        </div>
                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button id="alertCheckButton" class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">ÌôïÏù∏</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="alertWithCancelModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute; z-index: 2000;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: auto; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div class="modal-header text-white fw-bold py-1 px-1 border-0" style="font-size: 1rem;">
                                        ÏïåÎ¶º
                                    </div>
                                    <div class="modal-body pb-1 text-center rounded" style="background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4);">
                                        <div id="alertWithCancelContent" style="color: #81461A;">

                                        </div>
                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button class="d-grid btn py-0 px-4 text-white" style="background: #a6a6a6; border: 2px solid rgba(91, 91, 91, 0.4); font-size: 0.9rem;" data-bs-dismiss="modal">Ï∑®ÏÜå</button>
                                            <!-- <button id="alertWithCancelCheckButton" class="d-grid btn py-0 px-4 text-white" style="background: #5D81B7; border: 2px solid rgba(78, 106, 150, 0.4);">ÌôïÏù∏</button> -->
                                            <button id="alertWithCancelCheckButton" class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">ÌôïÏù∏</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="writeMoreInfoModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: auto; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div class="modal-header text-white fw-bold py-1 px-1 border-0" style="font-size: 1rem;">
                                        <span>Ï∂îÍ∞Ä Ï†ïÎ≥¥ ÏûÖÎ†•</span>
                                        <span id="writeBlank" class="text-end" style="font-size: 0.7rem;"></span>
                                    </div>
                                    <div class="modal-body pb-1 text-center rounded" style="background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4); color: #81461A;">
                                        
                                        <div class="input-group">
                                            <span class="my-auto">ÌÇ§&nbsp;&nbsp;</span>
                                            <input id="writeMoreInfoHeight" type="number" class="form-control py-0 text-end" style="font-size: 0.8rem;">
                                            <span class="my-auto">&nbsp;&nbsp;cm&nbsp;&nbsp;</span>
                                            <span class="my-auto">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                                            <span class="my-auto">&nbsp;&nbsp;Î™∏Î¨¥Í≤å&nbsp;&nbsp;</span>
                                            <input id="writeMoreInfoWeight" type="number" class="form-control py-0 text-end" style="font-size: 0.8rem;">
                                            <span class="my-auto">&nbsp;&nbsp;kg</span>
                                        </div>

                                        <div class="input-group mt-2">
                                            <span class="my-auto">ÌòàÏï°Ìòï&nbsp;&nbsp;</span>
                                            <select id="writeMoreInfoBloodType" class="form-select py-0 text-end" style="font-size: 0.8rem;">
                                                <option value="0" selected>ÏÑ†ÌÉù</option>
                                                <option value="A">A</option>
                                                <option value="B">B</option>
                                                <option value="O">O</option>
                                                <option value="AB">AB</option>
                                            </select>
                                            <span class="my-auto">&nbsp;&nbsp;Ìòï&nbsp;&nbsp;</span>
                                            <span class="my-auto">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                                            <span class="my-auto">&nbsp;&nbsp;MBTI&nbsp;&nbsp;</span>
                                            <select id="writeMoreInfoMbtiType" class="form-select py-0 text-end rounded-0" style="font-size: 0.8rem;">
                                                <option value="0" selected>ÏÑ†ÌÉù</option>
                                                <option value="ENTP">ENTP</option>
                                                <option value="ENTJ">ENTJ</option>
                                                <option value="ENFP">ENFP</option>
                                                <option value="ENFJ">ENFJ</option>
                                                <option value="ESTP">ESTP</option>
                                                <option value="ESTJ">ESTJ</option>
                                                <option value="ESFP">ESFP</option>
                                                <option value="ESFJ">ESFJ</option>
                                                <option value="INTP">INTP</option>
                                                <option value="INTJ">INTJ</option>
                                                <option value="INFP">INFP</option>
                                                <option value="INFJ">INFJ</option>
                                                <option value="ISTP">ISTP</option>
                                                <option value="ISTJ">ISTJ</option>
                                                <option value="ISFP">ISFP</option>
                                                <option value="ISFJ">ISFJ</option>
                                            </select>
                                        </div>

                                        <div class="input-group mt-2">
                                            <span class="my-auto">Ï∑®ÎØ∏&nbsp;&nbsp;</span>
                                            <input id="writeMoreInfoHobby" type="text" class="form-control py-0" max="10" style="font-size: 0.8rem;">
                                            <span class="my-auto" style="font-size: 0.6rem;">&nbsp;&nbsp;10Í∏ÄÏûêÏù¥ÎÇ¥</span>
                                        </div>

                                        <div class="input-group mt-2">
                                            <span class="my-auto">ÏùåÏ£ºÏó¨Î∂Ä&nbsp;&nbsp;</span>
                                            <input type="radio" name="isDrinking" id="yesDrinking" class="form-check-input writeMoreInfoDrinking" value="Y">
                                            <label class="form-check-label" for="yesDrinking">&nbsp;&nbsp;Y&nbsp;&nbsp;</label>
                                            <input type="radio" name="isDrinking" id="noDrinking" class="form-check-input writeMoreInfoDrinking" value="N" checked>
                                            <label class="form-check-label" for="noDrinking">&nbsp;&nbsp;N&nbsp;&nbsp;</label>
                                            <span class="my-auto">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
                                            <span class="my-auto">&nbsp;&nbsp;Ìù°Ïó∞Ïó¨Î∂Ä&nbsp;&nbsp;</span>
                                            <input type="radio" name="isSmoking" id="yesSmoking" class="form-check-input writeMoreInfoSmoking" value="Y">
                                            <label class="form-check-label" for="yesSmoking">&nbsp;&nbsp;Y&nbsp;&nbsp;</label>
                                            <input type="radio" name="isSmoking" id="noSmoking" class="form-check-input writeMoreInfoSmoking" value="N" checked>
                                            <label class="form-check-label" for="noSmoking">&nbsp;&nbsp;N&nbsp;&nbsp;</label>
                                        </div>

                                        <div class="input-group mt-2">
                                            <span class="my-auto">ÏÑ±Ï†ÅÏßÄÌñ•&nbsp;&nbsp;</span>
                                            <select id="writeMoreInfoPreference" class="form-select py-0 text-end rounded-0" style="font-size: 0.8rem;">
                                                <option value="0" selected>ÏÑ†ÌÉù</option>
                                                <option value="L">Ïù¥ÏÑ±Ïï†</option>
                                                <option value="B">Í≤åÏù¥</option>
                                                <option value="G">Î†àÏ¶àÎπÑÏñ∏</option>
                                                <option value="V">Î∞îÏù¥ÏÑπÏäàÏñº</option>
                                                <option value="A">ÏóêÏù¥ÏÑπÏäàÏñº</option>
                                                <option value="D">Îç∞ÎØ∏ÏÑπÏäàÏñº</option>
                                                <option value="P">Ìå¨ÏÑπÏäàÏñº</option>
                                                <option value="Q">ÌÄòÏä§Ï≤òÎãù</option>
                                            </select>
                                        </div>

                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button class="d-grid btn py-0 px-4 text-white" style="background: #a6a6a6; border: 2px solid rgba(91, 91, 91, 0.4); font-size: 0.9rem;" data-bs-dismiss="modal">Ï∑®ÏÜå</button>
                                            <button onclick="saveMoreInfo()" class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">Ï†ÄÏû•</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="writeTrackMarkModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: 70%; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div class="modal-header text-white fw-bold py-1 px-1 border-0" style="font-size: 1rem;">
                                        Ï≤¥Ï∑® Î∂ÑÏÇ¨
                                    </div>
                                    <div class="modal-body pb-1 rounded" style="background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4);">

                                        <div class="row">
                                            <div class="col">
                                                <div class="row">
                                                    <div onclick="inputWriteTrackMarkImage()" onchange="previewWriteTrackMarkImage()" id="writeTrackMarkImageHere" class="col border rounded-pill mx-3 px-0" style="aspect-ratio: 16/9;">
                                                        <!-- hidden -->
                                                        <div id="writeTrackMarkNoimage" class="row text-center align-items-center" style="height: 100%;">
                                                            <div class="col">
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span class="material-symbols-outlined" style="color: #BFBFBF; font-size: 1.5rem;">
                                                                            add_photo_alternate
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col" style="color: #BFBFBF; font-size: 0.9rem;">
                                                                        Ïù¥ÎØ∏ÏßÄ Ï∂îÍ∞Ä
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        <input id="writeTrackMarkImage" type="file" accept="image/*" hidden>
                                                    </div>
                                                </div>
                                                <div class="row mt-3">
                                                    <div class="col">
                                                        <span class="material-symbols-outlined align-middle" style="font-size: 1rem;">
                                                            stylus_note
                                                        </span>
                                                        ÌïúÏ§ÑÍ∏Ä
                                                    </div>
                                                    <div class="col text-end my-auto" style="font-size: 0.65rem;">
                                                        50Í∏ÄÏûê Ïù¥ÎÇ¥
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col">
                                                        <textarea id="writeTrackMarkContent" class="form-control" rows="2" maxlength="50" placeholder="Ï≤¥Ï∑®ÏôÄ Ìï®ÍªòÌïòÎäî ÌùîÏ†Å" style="font-size: 0.8rem;"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button class="d-grid btn py-0 px-4 text-white" style="background: #a6a6a6; border: 2px solid rgba(91, 91, 91, 0.4); font-size: 0.9rem;" data-bs-dismiss="modal">Ï∑®ÏÜå</button>
                                            <button onclick="saveWriteTrackMarkInfo()" class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">Ï†ÄÏû•</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="previewTrackMarkerModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: 90%; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div class="modal-header text-white fw-bold py-1 px-1 border-0 d-inline" style="font-size: 1rem;">
                                        ÏãúÌñ•&nbsp;&nbsp;No. <span id="previewTrackMarkerPk">777</span>
                                    </div>
                                    <div class="modal-body pb-1 px-1 pt-2 rounded" style="background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4);">
                                        <div class="rounded-top px-3 py-2" style="width: 100%; border: 3px solid #C5A886;">
                                            <div class="row">
                                                <div class="col-3">
                                                    <div class="row">
                                                        <div class="col px-2">
                                                            <div id="previewTrackMarkerOuter" class="d-flex align-items-center justify-content-center border-0" style="width: 100%; aspect-ratio: 1/1; border-radius: 50%;">
                                                                <div id="previewTrackMarkerImage" style="width: 90%; aspect-ratio: 1/1; border-radius: 50%; background: url('/public/image/follow/questionBlack.png') no-repeat center; background-size: cover; filter: opacity(85%);"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row mt-1">
                                                        <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                            <span id="previewTrackMarkerName">? ? ?</span>
                                                            <!-- ÍπÄÏïÑÎ¨¥ -->
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div id="previewTrackMarkerOpenRating" class="col text-center fw-bold" style="font-size: 0.56rem;">
                                                            Lv ? ( ?? / ?? )
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col my-auto">
                                                    <div class="row">
                                                        <div class="col">
                                                            <div class="row">
                                                                <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    <span id="previewTrackMarkerHeight">? ? ?</span> cm
                                                                    <!-- 163 cm -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    ÌÇ§
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col-3">
                                                            <div class="row">
                                                                <div id="previewTrackMarkerGender" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ?
                                                                    <!-- üë±üèª‚Äç‚ôÄÔ∏è -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    ÏÑ±Î≥Ñ
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col">
                                                            <div class="row">
                                                                <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    <span id="previewTrackMarkerWeight">? ? ?</span> kg
                                                                    <!-- 50 kg -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    Î™∏Î¨¥Í≤å
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col">
                                                            <div class="row">
                                                                <div id="previewTrackMarkerMbtiType" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ? ? ?
                                                                    <!-- ISTJ -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    MBTI
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col">
                                                            <div class="row">
                                                                <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    <span id="previewTrackMarkerBloodType">? ?</span> Ìòï
                                                                    <!-- B Ìòï -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    ÌòàÏï°Ìòï
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col">
                                                            <div class="row">
                                                                <div id="previewTrackMarkerDrinking" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ?
                                                                    <!-- N -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    ÏùåÏ£ºÏó¨Î∂Ä
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col">
                                                            <div class="row">
                                                                <div id="previewTrackMarkerSmoking" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ?
                                                                    <!-- N -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    Ìù°Ïó∞Ïó¨Î∂Ä
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col">
                                                            <div class="row">
                                                                <div id="previewTrackMarkerHobby" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ? ? ? ?
                                                                    <!-- ÏßëÏóêÏÑú ÎíπÍµ¥Í±∞Î¶¨Í∏∞ -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    Ï∑®ÎØ∏
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                        <div class="col">
                                                            <div class="row">
                                                                <div id="previewTrackMarkerPreference" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    ? ? ? ? ?
                                                                    <!-- Í≤åÏù¥ -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                    ÏÑ±Ï†ÅÏßÄÌñ•
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row align-items-center">
                                                <div class="col-auto pe-0 text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                    Ïù∏Ïä§ÌÉÄ ÌôúÎèôÏò®ÎèÑ
                                                </div>
                                                <div class="col">
                                                    <div class="row align-items-center">
                                                        <div class="col">
                                                            <div class="progress" style="height: 0.5rem;">
                                                                <div id="previewTrackMarkerTemp" class="progress-bar rounded" style="background: #feb146; width: 36.5%;"></div>
                                                            </div>
                                                        </div>
                                                        <div class="col-auto ps-0 fw-bold text-end" style="font-size: 0.8rem; color: #000;">
                                                            <span id="previewTrackMarkerTempContent">36.5</span>‚ÑÉ
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="rounded-bottom px-3 py-5" style="width: 100%; background: #C5A886;">
                                            <div class="row justify-content-center">
                                                <div id="previewTrackMarkercoverdImage" class="col-6 rounded-pill mx-3 px-0" style="aspect-ratio: 16/9;">
                                                    <div class="row text-center align-items-center" style="height: 100%;">
                                                        <div class="col">
                                                            <div class="row">
                                                                <div class="col" style="font-size: 0.9rem;">
                                                                    ? ? ?
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row justify-content-center mt-4">
                                                <div class="col-auto my-auto">
                                                    <div class="row">
                                                        <div class="col-auto">
                                                            <span class="material-symbols-outlined align-middle" style="font-size: 1rem;">
                                                                stylus_note
                                                            </span>
                                                            ÌïúÏ§ÑÍ∏Ä
                                                        </div>
                                                        <div class="col">
                                                            ?&nbsp;&nbsp;?&nbsp;&nbsp;?&nbsp;&nbsp;?&nbsp;&nbsp;?
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button class="d-grid btn py-0 px-4 text-white" style="background: #a6a6a6; border: 2px solid rgba(91, 91, 91, 0.4); font-size: 0.9rem;" data-bs-dismiss="modal">Ï∑®ÏÜå</button>
                                            <button id="collectTrackMarkerButton" class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">ÏàòÏßë</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="trackMarkerModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: 90%; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div class="modal-header text-white fw-bold py-1 px-1 border-0 d-inline" style="font-size: 1rem;">
                                        Ï£ºÏÑ¨Ï£ºÏÑ¨
                                    </div>
                                    <div class="modal-body pb-1 pt-2 px-2 rounded" style="background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4);">
                                        <div class="row">
                                            <div class="col">
                                                <div class="row">
                                                    <div class="col-auto pe-1">
                                                        <div id="trackMarkerOuter" class="d-flex align-items-center justify-content-center border-0" style="width: 2rem; height: 2rem; border-radius: 50%;">
                                                            <div id="trackMarkerInner" style="width: 1.6rem; height: 1.6rem; border-radius: 50%; background: url('/public/image/follow/questionBlack.png') no-repeat center; background-size: cover; filter: opacity(85%);"></div>
                                                        </div>
                                                    </div>
                                                    <div id="trackMarkerPk" class="col ps-0 align-self-end" style="font-size: 0.8rem;">
                                                        No. 777
                                                    </div>
                                                    <div class="col align-self-end">
                                                        <span id="trackMarkerHeartIcon" class="material-symbols-rounded d-flex float-end" style="font-size: 1.2rem;">
                                                            favorite
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mt-2">
                                            <div id="trackMarkerImage" class="col rounded-pill mx-3 px-0" style="aspect-ratio: 16/9; border: 2px solid #81461A;">
                                            </div>
                                        </div>
                                        <div class="row mt-2">
                                            <div class="col">
                                                <span class="material-symbols-outlined align-middle" style="font-size: 1rem;">
                                                    stylus_note
                                                </span>
                                                ÌïúÏ§ÑÍ∏Ä
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div id="trackMarkerContent" class="col">
                                                ÎÑàÏùò ÎààÎèôÏûêÏóê ÏπòÏñºÏä§‚òÖ
                                            </div>
                                        </div>
                                        <div class="row mt-3">
                                            <div class="col-auto pe-0">
                                                <span class="material-symbols-rounded align-middle" style="font-size: 1rem;">
                                                    volunteer_activism
                                                </span>
                                                Í¥ÄÏã¨ÏùÑ ÌëúÌòÑÌïòÏÑ∏Ïöî
                                            </div>
                                        </div>
                                        <div class="row mt-1">
                                            <div id="trackMarkerPreviewCommentContent" class="col"></div>
                                        </div>
                                        <div id="trackMarkerCommentHidden" class="row mt-1">
                                            <div class="col">
                                                <div class="input-group">
                                                    <input id="trackMarkerCommentContent" type="text" class="form-control py-0 rounded" style="font-size: 0.8rem;">&nbsp;&nbsp;
                                                    <button id="trackMarkerCommentButton" class="btn py-1 rounded text-white" style="font-size: 0.8rem; background: #81461A; border: 2.5px solid #CEB597;">Ï†ÄÏû•ÌïòÍ∏∞</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;" data-bs-dismiss="modal">ÌôïÏù∏</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="collectionModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content border-0" style="position: relative; background: transparent; padding-left: 1rem; padding-right: 1rem; padding-top: 1rem;">
                                    <div style="position: absolute; width: 12rem; height: 3rem; z-index: 1; top: -0.4rem;">
                                        <img class="img-fluid" th:src="@{/public/image/follow/banner.png}" style="width: 12rem; height: 3rem;">
                                    </div>
                                    <span class="text-white fw-bold" style="position: absolute; z-index: 1; font-size: 1rem; left: 5.5rem; top: 0.3rem; color: #f3ecdd;">ÎÇ¥ Í∞Ä Î∞©</span>
                                    <button type="button" class="btn px-0 py-0 float-end d-grid align-items-center justify-content-center" data-bs-dismiss="modal" style="position: absolute; z-index: 1; width: 1.7rem; height: 1.7rem; right: 0.7rem; top: 0.6rem; border-radius: 50%; background: #E0C9A9; border: 1px solid #7D3A05;">
                                        <div style="border-radius: 50%; background: #ac5e23; width: 1.3rem; height: 1.3rem; border: 1px solid #7D3A05;">
                                            <span id="collectionModalCloseIcon" class="material-symbols-rounded" style="position: absolute; font-size: 1.2rem; left: 0.2rem; color: #f3ecdd;">
                                                close
                                            </span>
                                        </div>
                                    </button>
                                    <div class="modal-body rounded" style="padding: 0.2rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                        <div id="collectionModalHeight" class="rounded" style="padding: 0.5rem; padding-top: 1rem; background: #E0C9A9; border: 2px solid rgba(241, 194, 92, 0.4);">
                                            <div class="row">
                                                <div class="col">
                                                    <span class="ps-1 pe-5 rounded" style="color: #81461A; background: #CEB597; font-size: 0.9rem;">&nbsp;Íæ∏Ïö±: <span id="collectionLikeCnt">0</span></span>
                                                </div>
                                                <!-- <div class="col text-end">
                                                    <span class="ps-1 pe-4 rounded" style="color: #81461A; background: #CEB597; font-size: 0.9rem;">&nbsp;Îì±Í∏âÏàú &ShortDownArrow;</span>
                                                </div> -->
                                            </div>
                                            <div id="collectionListBoxHeight" class="rounded mt-2 overflow-auto" style="background: #C5A886; border: 1px solid #f3ecdd;">

                                                <div id="collectionLikeListBox" class="row row-cols-3 mx-auto py-0" style="width: 100%;">

                                                    

                                                </div>

                                                <hr class="mx-2 mt-3 mb-0" style="border: 2px solid #81461A; border-style: dashed;">
                                                <hr class="mx-2 mt-1 mb-0" style="border: 2px solid #81461A; border-style: dashed;">

                                                <div id="collectionListBox" class="row row-cols-3 mx-auto py-2" style="width: 100%;">



                                                </div>
                                                
                                            </div>

                                            <div class="modal-footer pb-0 border-0 justify-content-center">
                                                <!-- <button class="d-grid btn py-0 px-4 text-white" style="background: #4684d0; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">Îì±Í∏âÏàú</button>
                                                <button class="d-grid btn py-0 px-4 text-white" style="background: #5d96dc; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">Ïù¥Î¶ÑÏàú</button>
                                                <button class="d-grid btn py-0 px-4 text-white" style="background: #6fa3e3; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;">ÏàòÏßëÎèÑÏàú</button> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="collectionDetailModal" class="modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content border-0" style="position: relative; background: transparent; padding-left: 1rem; padding-right: 1rem; padding-top: 1rem;">
                                    <div style="position: absolute; width: 12rem; height: 3rem; z-index: 1; top: -0.4rem;">
                                        <img class="img-fluid" th:src="@{/public/image/follow/banner.png}" style="width: 12rem; height: 3rem;">
                                    </div>
                                    <span class="text-white fw-bold" style="position: absolute; z-index: 1; font-size: 1rem; left: 5rem; top: 0.3rem; color: #f3ecdd;">ÏÉÅ ÏÑ∏ Ï†ï Î≥¥</span>
                                    <button type="button" class="btn px-0 py-0 float-end d-grid align-items-center justify-content-center" data-bs-dismiss="modal" style="position: absolute; z-index: 1; width: 1.7rem; height: 1.7rem; right: 0.7rem; top: 0.6rem; border-radius: 50%; background: #E0C9A9; border: 1px solid #7D3A05;">
                                        <div style="border-radius: 50%; background: #ac5e23; width: 1.3rem; height: 1.3rem; border: 1px solid #7D3A05;">
                                            <span id="collectionModalCloseIcon" class="material-symbols-rounded" style="position: absolute; font-size: 1.2rem; left: 0.2rem; color: #f3ecdd;">
                                                close
                                            </span>
                                        </div>
                                    </button>
                                    <div class="modal-body rounded" style="padding: 0.2rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                        <div id="collectionDetailModalHeight" class="rounded" style="padding: 0.5rem; padding-top: 1.3rem; background: #E0C9A9; border: 2px solid rgba(241, 194, 92, 0.4);">

                                            <div class="rounded px-3 py-2" style="width: 100%;" id="collectionDetailInfoHeight">
                                                <div class="row">
                                                    <div class="col-3">
                                                        <div class="row">
                                                            <div class="col px-2">
                                                                <div id="collectionDetailOuter" class="d-flex align-items-center justify-content-center border-0" style="width: 100%; aspect-ratio: 1/1; border-radius: 50%;">
                                                                    <div id="collectionDetailImage" style="width: 90%; aspect-ratio: 1/1; border-radius: 50%; background: url('/public/image/follow/questionBlack.png') no-repeat center; background-size: cover; filter: opacity(85%);"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row mt-1">
                                                            <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                <span id="collectionDetailName">? ? ?</span>
                                                                <!-- ÍπÄÏïÑÎ¨¥ -->
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div id="collectionDetailOpenRating" class="col text-center fw-bold" style="font-size: 0.56rem;">
                                                                Lv ? ( ?? / ?? )
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col my-auto">
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="row">
                                                                    <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                        <span id="collectionDetailHeight">? ? ?</span> cm
                                                                        <!-- 163 cm -->
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                        ÌÇ§
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                            <div class="col-3">
                                                                <div class="row">
                                                                    <div id="collectionDetailGender" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                        ? ?
                                                                        <!-- üë±üèª‚Äç‚ôÄÔ∏è -->
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                        ÏÑ±Î≥Ñ
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                            <div class="col">
                                                                <div class="row">
                                                                    <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                        <span id="collectionDetailWeight">? ? ?</span> kg
                                                                        <!-- 50 kg -->
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                        Î™∏Î¨¥Í≤å
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="row">
                                                                    <div id="collectionDetailMbtiType" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                        ? ? ? ?
                                                                        <!-- ISTJ -->
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                        MBTI
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                            <div class="col">
                                                                <div class="row">
                                                                    <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                        <span id="collectionDetailBloodType">? ?</span> Ìòï
                                                                        <!-- B Ìòï -->
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                        ÌòàÏï°Ìòï
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                            <div class="col">
                                                                <div class="row">
                                                                    <div id="collectionDetailDrinking" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                        ? ?
                                                                        <!-- N -->
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                        ÏùåÏ£ºÏó¨Î∂Ä
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                            <div class="col">
                                                                <div class="row">
                                                                    <div id="collectionDetailSmoking" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                        ? ?
                                                                        <!-- N -->
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                        Ìù°Ïó∞Ïó¨Î∂Ä
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="row">
                                                                    <div id="collectionDetailHobby" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                        ? ? ? ? ?
                                                                        <!-- ÏßëÏóêÏÑú ÎíπÍµ¥Í±∞Î¶¨Í∏∞ -->
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                        Ï∑®ÎØ∏
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                            <div class="col">
                                                                <div class="row">
                                                                    <div id="collectionDetailPreference" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                        ? ? ? ? ?
                                                                        <!-- Í≤åÏù¥ -->
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                        ÏÑ±Ï†ÅÏßÄÌñ•
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row align-items-center">
                                                    <div class="col-auto pe-0 text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                        Ïù∏Ïä§ÌÉÄ ÌôúÎèôÏò®ÎèÑ
                                                    </div>
                                                    <div class="col">
                                                        <div class="row align-items-center">
                                                            <div class="col">
                                                                <div class="progress" style="height: 0.5rem;">
                                                                    <div id="collectionDetailTemp" class="progress-bar rounded" style="background: #feb146; width: 36.5%;"></div>
                                                                </div>
                                                            </div>
                                                            <div class="col-auto ps-0 fw-bold text-end" style="font-size: 0.8rem; color: #000;">
                                                                <span id="collectionDetailTempContent">36.5</span>‚ÑÉ
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div style="position: relative;">
                                                <hr class="my-2" style="color: #81461A;">
                                                <span class="px-3" style="position: absolute; top: -0.65rem; left: calc(50% - 2rem); font-size: 0.9rem; background: #E0C9A9; color: #81461A;">Ï≤¥Ï∑®ÎèÑÍ∞ê</span>
                                            </div>

                                            <!-- ... -->
                                            <div class="row mt-2">
                                                <div class="col fw-bold">Ï†ÑÏ≤¥ Ïπ¥ÎìúÎ™©Î°ù</div>
                                            </div>
                                            <div class="row">
                                                <div class="col text-seconday" style="font-size: 0.8em;">Îã§Î•∏ ÏÇ¨ÎûåÎì§Ïùò Ïπ¥ÎìúÎ•º ÏàòÏßëÌï¥ Î¥êÏöî!!</div>
                                            </div>

                                            <div id="collectionDetailModalCardHeight" class="rounded mt-1" style="background: #C5A886;">
                                                <div class="overflow-auto px-3" style="height: 100%;">
                                                    <div id="collectionDetailCardListBox" class="row row-cols-4 mt-1 pb-2">

                                                        
                                                        <!-- <div class="col">
                                                            <div class="row">
                                                                <div class="col-3">
                                                                    <img src="/public/image/commons/list1.jpeg" class="img-fluid" style="height: 100%;">
                                                                </div>
                                                                <div class="col">
        
                                                                    <div class="row">
                                                                        <div  style="font-size: 0.8em;" class="col fw-bold">no.3</div>
                                                                    </div>
                
                                                                    <div class="row">
                                                                        <div class="col">
                                                                            <span class="text-secondary" style="font-size: 0.8em;">ÏàòÏßë</span>
                                                                            <span class="text-danger fw-bold">3</span><span class="text-secondary" style="font-size: 0.8em;">Ìöå</span>
                                                                        </div>
                                                                        <div class="col">
                                                                            <span class="text-secondary" style="font-size: 0.8em;">ÎåìÍ∏Ä</span>
                                                                            <span class="text-danger fw-bold">7</span><span class="text-secondary" style="font-size: 0.8em;">Í∞ú</span>
                                                                        </div>
                                                                        <div class="col">
                                                                            <span class="text-secondary" style="font-size: 0.8em;">Ï∂îÌñâ</span>
                                                                            <span class="text-danger fw-bold">2</span><span class="text-secondary" style="font-size: 0.8em;">Ìöå</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div style="font-size: 0.8em;" class="col text-secondary">2024-01-03</div>
                                                                        <div style="font-size: 0.8em;" class="col text-success">ÏàòÏßë ÏôÑÎ£å</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div> -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="collectionCardModal" class="modal fade" tabindex="-1" style="position: absolute;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content border-0" style="position: relative; background: transparent; padding-left: 2.5rem; padding-right: 2.5rem;">
                                    <div class="modal-body rounded" style="border: 1px solid #81461A; padding: 0;">
                                        <div class="rounded" style="border: 2px solid #f3ecdd;">
                                            <div id="collectionCardModalHeight" class="rounded px-2" style="width: 100%; background: rgb(45, 23, 11, 0.95);">
                                                <div class="row" style="color: #f3ecdd;">
                                                    <div class="col">
                                                        <div class="row py-2">
                                                            <div class="col">no.13</div>
                                                            <div class="col-auto ms-auto">
                                                                <span style="font-size: 0.8em;" class="text-secondary">ÏàòÏßëÏùº</span>
                                                                <span>2024.07.07</span>
                                                            </div>
                                                        </div>                                                       
                                                        <div class="row">
                                                            <div class="col">
                                                                <img src="/public/image/commons/list2.jpeg" class="img-fluid" style="width: 100%; aspect-ratio: 16/9;" >
                                                            </div>
                                                        </div>                                                       

                                                        <div class="row">
                                                            <div class="col">
                                                                <span style="color: #ce742f;; font-size: 0.8em;">ÎãπÏã†Ïùò ÌïòÎ£®Îäî Ïñ¥Îï†ÎÇòÏöî?</span>
                                                            </div>
                                                        </div>                                                       


                                                        <div class="row">
                                                            <div class="col">
                                                                <span >Ïò§Îäò ÌïòÎ£® ÎÑàÎ¨¥ Ï¶êÍ±∞Ïö¥ ÌïòÎ£®ÏòÄÎã§... Í∑ºÎç∞ ÏñºÎπµÏù¥Îäî Ïñ¥ÎîßÏùÑÍπå...„Ö†„Ö†</span>
                                                                <span style="font-size: 0.8em;" class="text-secondary">(2024.05.05)</span>
                                                            </div>
                                                        </div>                                                       


                                                        <div class="row mt-2">
                                                            <div class="col">
                                                                <span style="color: #ce742f;; font-size: 0.8em;">Ï†ïÎ≥¥ Ïñ¥Ï©åÍ≥†.. Ï†ÄÏ©åÍ≥†..</span>
                                                            </div>
                                                        </div>                                                       

                                                        <div class="row">
                                                            <div class="col">
                                                                <span style="font-size: 0.8em;" class="text-secondary">ÏàòÏßë</span>
                                                                <span>10</span>
                                                                <span style="font-size: 0.8em;" class="text-secondary">Ìöå</span>
                                                            </div>
                                                            <div class="col">
                                                                <span style="font-size: 0.8em;" class="text-secondary">Í¥ÄÏã¨</span>
                                                                <span>17</span>
                                                                <span style="font-size: 0.8em;" class="text-secondary">Ìöå</span>
                                                            </div>
                                                            <div class="col">
                                                                <span style="font-size: 0.8em;" class="text-secondary">Ï∂îÌñâ</span>
                                                                <span>7</span>
                                                                <span style="font-size: 0.8em;" class="text-secondary">Ìöå</span>
                                                            </div>
                                                        </div>                                                       





                                                        <div class="row mt-2">
                                                            <div class="col">
                                                                <span style="color: #ce742f;; font-size: 0.8em;">Í¥ÄÏã¨ÏùÑ ÎÇòÌÉÄÎäî Í∏ÄÎì§Ïù¥Ïó¨Ïöî...</span>
                                                            </div>
                                                        </div>                                                       

                                                        <div class="row row-cols-1 overflow-auto" style="height: 5rem;">
                                                            
                                                            <div class="col">
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span style="color: #b2db5e;">ÏñºÎπµÏù¥</span>
                                                                    </div>
                                                                    <div class="col">
                                                                        <span style="font-size: 0.8em;" class="text-secondary">(2024.05.05)</span>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span>Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!</span>        
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col">
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span style="color: #b2db5e;">ÏñºÎπµÏù¥</span>
                                                                    </div>
                                                                    <div class="col">
                                                                        <span style="font-size: 0.8em;" class="text-secondary">(2024.05.05)</span>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span>Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!</span>        
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col">
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span style="color: #b2db5e;">ÏñºÎπµÏù¥Ïñ¥ÎîßÎÇò</span>
                                                                    </div>
                                                                    <div class="col-auto ms-auto">
                                                                        <span style="font-size: 0.8em;" class="text-secondary">(2024.05.05)</span>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span>Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!</span>        
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col">
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span style="color: #b2db5e;">ÏñºÎπµÏù¥ÏúºÏïÑÏïÑ</span>
                                                                    </div>
                                                                    <div class="col">
                                                                        <span style="font-size: 0.8em;" class="text-secondary">(2024.05.05)</span>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <span>Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!Ï†Ä Ïó¨Í∏∞ ÏûàÏñ¥Ïöî....!!!</span>        
                                                                    </div>
                                                                </div>
                                                            </div>


                                                        </div>


                                                    </div>
                                                </div>

                                            
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="myPageModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content border-0" style="position: relative; background: transparent; padding-left: 1rem; padding-right: 1rem; padding-top: 1rem;">
                                    <div style="position: absolute; width: 12rem; height: 3rem; z-index: 1; top: -0.4rem;">
                                        <img class="img-fluid" th:src="@{/public/image/follow/banner.png}" style="width: 12rem; height: 3rem;">
                                    </div>
                                    <span class="text-white fw-bold" style="position: absolute; z-index: 1; font-size: 1rem; left: 5.5rem; top: 0.3rem; color: #f3ecdd;">ÎÇ¥ Ï†ï Î≥¥</span>
                                    <button type="button" class="btn px-0 py-0 float-end d-grid align-items-center justify-content-center" data-bs-dismiss="modal" style="position: absolute; z-index: 1; width: 1.7rem; height: 1.7rem; right: 0.7rem; top: 0.6rem; border-radius: 50%; background: #E0C9A9; border: 1px solid #7D3A05;">
                                        <div style="border-radius: 50%; background: #ac5e23; width: 1.3rem; height: 1.3rem; border: 1px solid #7D3A05;">
                                            <span id="collectionModalCloseIcon" class="material-symbols-rounded" style="position: absolute; font-size: 1.2rem; left: 0.2rem; color: #f3ecdd;">
                                                close
                                            </span>
                                        </div>
                                    </button>
                                    <div class="modal-body rounded" style="padding: 0.2rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                        <div id="myPageModalHeight" class="rounded" style="padding: 0.5rem; padding-top: 3.5rem; background:#E0C9A9; border: 2px solid rgba(241, 194, 92, 0.4);">
                                            <div class="rounded" style="position: relative; background: #C5A886; height: 8rem; border: 1px solid #f3ecdd;">
                                                <div class="d-flex gap-2 justify-content-end" style="position: absolute; left: 5.2rem; top: -1.7rem;">
                                                    <button onclick="showMyTrackMarkersInfo()" class="btn text-white py-0" style="background: #81461A; font-size: 0.8rem;">ÎÇ¥ Ï≤¥Ï∑® / ÌùîÏ†Å</button>
                                                    <button onclick="showAchievementModal()" class="btn text-white py-0" style="background: #81461A; font-size: 0.8rem;">ÏóÖÏ†Å</button>
                                                </div>
                                                <div class="d-grid align-items-center justify-content-center" style="position: absolute; width: 4rem; height: 4rem; top: -2rem; left: 1rem; border-radius: 50%; background: #81461A;">
                                                    <div style="width: 3.5rem; height: 3.5rem; border-radius: 50%; background: #f3ecdd;"></div>
                                                </div>
                                                <div style="width: 100%;">
                                                    <div class="row px-2 align-items-center">
                                                        <div class="col-4 px-0">
                                                            <div class="row">
                                                                <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                    <span id="previewTrackMarkerName">? ? ?</span>
                                                                    <!-- ÍπÄÏïÑÎ¨¥ -->
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div id="previewTrackMarkerOpenRating" class="col text-center fw-bold" style="font-size: 0.56rem;">
                                                                    Lv ?&nbsp;&nbsp;( ?? / ?? )
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col my-auto ps-0">
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            <span id="previewTrackMarkerHeight">? ? ?</span> cm
                                                                            <!-- 163 cm -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            ÌÇ§
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                                <div class="col-3">
                                                                    <div class="row">
                                                                        <div id="previewTrackMarkerGender" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            ? ?
                                                                            <!-- üë±üèª‚Äç‚ôÄÔ∏è -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            ÏÑ±Î≥Ñ
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            <span id="previewTrackMarkerWeight">? ? ?</span> kg
                                                                            <!-- 50 kg -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            Î™∏Î¨¥Í≤å
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div id="previewTrackMarkerMbtiType" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            ? ? ? ?
                                                                            <!-- ISTJ -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            MBTI
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            <span id="previewTrackMarkerBloodType">? ?</span> Ìòï
                                                                            <!-- B Ìòï -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            ÌòàÏï°Ìòï
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div id="previewTrackMarkerDrinking" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            ? ?
                                                                            <!-- N -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            ÏùåÏ£ºÏó¨Î∂Ä
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div id="previewTrackMarkerSmoking" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            ? ?
                                                                            <!-- N -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            Ìù°Ïó∞Ïó¨Î∂Ä
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div id="previewTrackMarkerHobby" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            ? ? ? ? ?
                                                                            <!-- ÏßëÏóêÏÑú ÎíπÍµ¥Í±∞Î¶¨Í∏∞ -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            Ï∑®ÎØ∏
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div id="previewTrackMarkerPreference" class="col text-center fw-bold" style="font-size: 0.8rem;">
                                                                            ? ? ? ? ?
                                                                            <!-- Í≤åÏù¥ -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                                            ÏÑ±Ï†ÅÏßÄÌñ•
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row align-items-center px-2">
                                                        <div class="col-auto pe-0 text-body-tertiary text-center" style="font-size: 0.6rem;">
                                                            Ïù∏Ïä§ÌÉÄ ÌôúÎèôÏò®ÎèÑ
                                                        </div>
                                                        <div class="col">
                                                            <div class="row align-items-center">
                                                                <div class="col">
                                                                    <div class="progress" style="height: 0.5rem;">
                                                                        <div id="previewTrackMarkerTemp" class="progress-bar rounded" style="background: #feb146; width: 36.5%;"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-auto ps-0 fw-bold text-end" style="font-size: 0.8rem; color: #000;">
                                                                    <span id="previewTrackMarkerTempContent">36.5</span>‚ÑÉ
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                            </div>

                                            <div class="row">
                                                <div class="col">
                                                    <div style="position: relative;">
                                                        <hr style="color: #81461A;">
                                                        <span class="px-1" style="position: absolute; top: -0.65rem; left: calc(50% - 1.5rem); font-size: 0.9rem; background: #E0C9A9; color: #81461A;">ÎÇ¥Í∞Ä ÎãπÌïú Ïßì</span>
                                                    </div>

                                                    <div class="row text-start row-cols-1">
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">Ï∂îÌñâ</span>
                                                            <span >4</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">Ìöå</span>
                                                        </div>
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">Ï∞©Ï∑®</span>
                                                            <span >217</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">Ìöå</span>
                                                        </div>
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">Íæ∏Ïö±</span>
                                                            <span >8</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">Ìöå</span>
                                                        </div>
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">Í¥ÄÏã¨</span>
                                                            <span >8</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">Ìöå</span>
                                                        </div>
                                                    </div>
    
                                                </div>
                                                <div class="col">
                                                    <div style="position: relative;">
                                                        <hr style="color: #81461A;">
                                                        <span class="px-1" style="position: absolute; top: -0.65rem; left: calc(50% - 1.5rem); font-size: 0.9rem; background: #E0C9A9; color: #81461A;">ÎÇ¥Í∞Ä Ìïú Ïßì</span>
                                                    </div>
    
                                                    <div class="row text-start row-cols-1">
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">Ï∂îÌñâ</span>
                                                            <span >4</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">Ìöå</span>
                                                        </div>
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">Ï∞©Ï∑®</span>
                                                            <span >217</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">Ìöå</span>
                                                        </div>
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">Íæ∏Ïö±</span>
                                                            <span >8</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">Ìöå</span>
                                                        </div>
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">Í¥ÄÏã¨</span>
                                                            <span >8</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">Ìöå</span>
                                                        </div>
                                                    </div>

                                                    <div class="row text-center">
                                                        <div class="col">
                                                            <span style="font-size: 0.8em;" class="text-danger">Ïú†Ìòπ</span>
                                                            <span >17</span>
                                                            <span style="font-size: 0.8em;" class="text-secondary">Ìöå</span>
                                                        </div>
                                                    </div>
    
    

                                                </div>
                                            </div>











                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="likeListModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" style="position: absolute;">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content fw-bold mx-auto rounded" style="width: 90%; padding: 0.25rem; font-size: 0.85rem; background: #81461A; border: 2px solid rgba(55, 29, 13, 0.4);">
                                    <div id="previewTrackMarkerPk" class="modal-header text-white fw-bold py-1 px-1 border-0" style="font-size: 1rem;">
                                        Íæ∏Ïö±
                                    </div>
                                    <div class="modal-body pb-1 px-0 pt-1 rounded" style="width: 100%; background: #f3ecdd; border: 2px solid rgba(241, 194, 92, 0.4);">
                                        <div id="likeListCarousel" class="carousel slide" data-bs-wrap="false">
                                            <div id="likeListBox" class="carousel-inner">
                                                
                                                

                                            </div>
                                            <button id="likeListCarouselPrev" class="carousel-control-prev" type="button" data-bs-target="#likeListCarousel" data-bs-slide="prev" style="position: absolute; top: calc(50% - 5.3rem); left: -3rem;">
                                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                <span class="visually-hidden">Previous</span>
                                              </button>
                                              <button id="likeListCarouselNext" class="carousel-control-next" type="button" data-bs-target="#likeListCarousel" data-bs-slide="next" style="position: absolute; top: calc(50% - 5.3rem); right: -3rem;">
                                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                <span class="visually-hidden">Next</span>
                                            </button>
                                        </div>
                                        <div class="modal-footer pb-0 border-0 justify-content-center">
                                            <button id="collectTrackMarkerButton" class="d-grid btn py-0 px-4 text-white" style="background: #fdb96b; border: 2px solid rgba(188, 136, 46, 0.4); font-size: 0.9rem;" data-bs-dismiss="modal">Îã´Í∏∞</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>

        <div th:insert="~{commons/item/itemShop}"></div>
        <div th:insert="~{commons/item/achievement}"></div>

        <!-- fetch(url)
                .then(response => response.json())
                .then(response => {

                    

        }); -->
        
        <div id="likeListBox"></div>

        <div id="template" class="d-none">

            <div class="collectionWrapper col mt-3 px-3">
                <div class="row">
                    <div class="col d-grid align-items-bottom">
                        <span class="collectionPk fw-bold" style="font-size: 0.7rem; color: #81461A;">No. 7777</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col d-flex justify-content-center">
                        <div class="collectionOuter d-flex align-items-center justify-content-center" style="width: 80%; aspect-ratio: 1/1; border-radius: 8%;">
                            <!-- <div class="d-flex justify-content-center" style="position: relative; width: 98%; aspect-ratio: 1/1; border: 1px solid #ffdf00; border-radius: 3%; background: url('/public/image/commons/list2.jpeg') no-repeat center; background-size: cover; filter: opacity(80%);"> -->
                            <div class="collectionInner" style="position: relative; width: 97%; aspect-ratio: 1/1; border-radius: 3%; background: url('/public/image/follow/questionAnother (2).png') no-repeat; background-position: center; background-size: contain; filter: opacity(80%);">
                                <!-- <div class="fw-bold text-center" style="position: absolute; width: 1rem; height: 1rem; top: 0.2rem; left: 0.2rem; border-radius: 50%; background: #ffff90ff; border: 1px solid #feb146; font-size: 0.8rem;">
                                    1
                                </div> -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-1">
                    <div class="col-auto d-grid align-items-bottom pe-0">
                        <span class="collectionOpenRating" style="font-size: 0.6rem; color: #81461A;">Lv 2</span>
                    </div>
                    <div class="col d-grid align-items-bottom text-end ps-0">
                        <span class="collectionOpenRatngContent" style="font-size: 0.6rem; color: #81461A;">15 / 100</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="progress" role="progressbar" style="height: 0.4rem; border: 0.1px solid #E0C9A9; bottom: 0.1rem;">
                            <div class="collectionProgress progress-bar progress-bar-striped rounded-pill" style="background: #feb146; width: 75%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="noLikeListWrapper carousel-item px-1 active">
                <div class="rounded px-3 py-3" style="width: 100%; background: #C5A886;">
                    <div class="row">
                        <div class="col text-center py-5">
                            <div class="row">
                                <div class="col">
                                    <span class="material-symbols-rounded">
                                        ecg
                                    </span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    Î™©Î°ùÏù¥ ÏóÜÏäµÎãàÎã§
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="likeListWrapper carousel-item px-1">
                <div class="likeListButton rounded px-3 py-2" style="width: 100%; background: #C5A886;">
                    <div class="row my-auto align-items-center">
                        <div class="col">No. <span class="likeListPk">777</span></div>
                        <div class="col">
                            <span class="heartIcon material-symbols-rounded d-flex align-items-center float-end" style="font-size: 1.3rem;">
                                favorite
                            </span>
                        </div>
                    </div>
                    <div>
                        <hr class="mt-1 mb-2" style="color: #81461A;">
                    </div>
                    <div class="row">
                        <div class="col-3">
                            <div class="row">
                                <div class="col px-2">
                                    <div class="likeListOuter d-flex align-items-center justify-content-center border-0" style="width: 100%; aspect-ratio: 1/1; border-radius: 50%;">
                                        <div class="likeListImage" style="width: 90%; aspect-ratio: 1/1; border-radius: 50%; background: url('/public/image/follow/questionBlack.png') no-repeat center; background-size: cover; filter: opacity(85%);"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-1">
                                <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                    <span class="likeListName">? ? ?</span>
                                    <!-- ÍπÄÏïÑÎ¨¥ -->
                                </div>
                            </div>
                            <div class="row">
                                <div class="likeListOpenRating col text-center fw-bold" style="font-size: 0.56rem;">
                                    Lv ? ( ?? / ?? )
                                </div>
                            </div>
                        </div>
                        <div class="col my-auto">
                            <div class="row">
                                <div class="col">
                                    <div class="row">
                                        <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                            <span class="likeListHeight">? ? ?</span> cm
                                            <!-- 163 cm -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                            ÌÇ§
                                        </div>
                                    </div>
                                </div>
                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                <div class="col-3">
                                    <div class="row">
                                        <div class="likeListGender col text-center fw-bold" style="font-size: 0.8rem;">
                                            ? ?
                                            <!-- üë±üèª‚Äç‚ôÄÔ∏è -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                            ÏÑ±Î≥Ñ
                                        </div>
                                    </div>
                                </div>
                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                <div class="col">
                                    <div class="row">
                                        <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                            <span class="likeListWeight">? ? ?</span> kg
                                            <!-- 50 kg -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                            Î™∏Î¨¥Í≤å
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <div class="row">
                                        <div class="likeListMbtiType col text-center fw-bold" style="font-size: 0.8rem;">
                                            ? ? ? ?
                                            <!-- ISTJ -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                            MBTI
                                        </div>
                                    </div>
                                </div>
                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                <div class="col">
                                    <div class="row">
                                        <div class="col text-center fw-bold" style="font-size: 0.8rem;">
                                            <span class="likeListBloodType">? ?</span> Ìòï
                                            <!-- B Ìòï -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                            ÌòàÏï°Ìòï
                                        </div>
                                    </div>
                                </div>
                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                <div class="col">
                                    <div class="row">
                                        <div class="likeListDrinking col text-center fw-bold" style="font-size: 0.8rem;">
                                            ? ?
                                            <!-- N -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                            ÏùåÏ£ºÏó¨Î∂Ä
                                        </div>
                                    </div>
                                </div>
                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                <div class="col">
                                    <div class="row">
                                        <div class="likeListSmoking col text-center fw-bold" style="font-size: 0.8rem;">
                                            ? ?
                                            <!-- N -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                            Ìù°Ïó∞Ïó¨Î∂Ä
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <div class="row">
                                        <div class="likeListHobby col text-center fw-bold" style="font-size: 0.8rem;">
                                            ? ? ? ? ?
                                            <!-- ÏßëÏóêÏÑú ÎíπÍµ¥Í±∞Î¶¨Í∏∞ -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                            Ï∑®ÎØ∏
                                        </div>
                                    </div>
                                </div>
                                <div class="vr px-0 text-body-tertiary my-auto" style="height: 1rem;"></div>
                                <div class="col">
                                    <div class="row">
                                        <div class="likeListPreference col text-center fw-bold" style="font-size: 0.8rem;">
                                            ? ? ? ? ?
                                            <!-- Í≤åÏù¥ -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col text-body-tertiary text-center" style="font-size: 0.6rem;">
                                            ÏÑ±Ï†ÅÏßÄÌñ•
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row align-items-center">
                        <div class="col-auto pe-0 text-body-tertiary text-center" style="font-size: 0.6rem;">
                            Ïù∏Ïä§ÌÉÄ ÌôúÎèôÏò®ÎèÑ
                        </div>
                        <div class="col">
                            <div class="row align-items-center">
                                <div class="col">
                                    <div class="progress" style="height: 0.5rem;">
                                        <div class="likeListTemp progress-bar rounded" style="background: #feb146; width: 36.5%;"></div>
                                    </div>
                                </div>
                                <div class="col-auto ps-0 fw-bold text-end" style="font-size: 0.8rem; color: #000;">
                                    <span class="likeListTempContent">36.5</span>‚ÑÉ
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="collectionDetailCardCommonWrapper col mt-2 px-2">
                <div class="row">
                    <div class="col">
                        <div class="collectionDetailCardFilter d-flex justify-content-center align-items-center" style="position: relative; width: 100%; aspect-ratio: 1/1; border-radius: 3%; background: #AD6B33;">
                            <div class="d-flex justify-content-center align-items-center" style="width: 83%; aspect-ratio: 1/1; border-radius: 30%; background: #AD6B33; z-index: 1;">
                                <div class="d-flex justify-content-center align-items-center" style="position: absolute; width: 85%; aspect-ratio: 1/1; border-radius: 50%; background: linear-gradient(-45deg, #E0A159, #F5C45C);">
                                    <div class="d-flex justify-content-center align-items-center" style="width: 90%; aspect-ratio: 1/1; border-radius: 50%; background: #AD6B33;">
                                        <span class="fw-bold" style="font-size: 0.7rem; color: #ededed;"><span style="font-size: 0.6rem;">No.</span> <span class="collectionDetailLogPk">48</span></span>
                                    </div>
                                </div>
                            </div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: linear-gradient(-45deg, #E0A159, #F5C45C); top: 5%; left: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #E0A159; top: 5%; right: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #E0A159; bottom: 5%; left: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #E0A159; bottom: 5%; right: 5%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="collectionDetailCardLegendaryWrapper col mt-2 px-2">
                <div class="row">
                    <div class="col">
                        <div class="collectionDetailCardFilter d-flex justify-content-center align-items-center" style="position: relative; width: 100%; aspect-ratio: 1/1; border-radius: 3%; background: #808080;">
                            <div class="d-flex justify-content-center align-items-center" style="width: 83%; aspect-ratio: 1/1; border-radius: 30%; background: #808080; z-index: 1;">
                                <div class="d-flex justify-content-center align-items-center" style="position: absolute; width: 85%; aspect-ratio: 1/1; border-radius: 50%; background: linear-gradient(-45deg, #AFADA7, #E0DBC1);">
                                    <div class="d-flex justify-content-center align-items-center" style="width: 90%; aspect-ratio: 1/1; border-radius: 50%; background: linear-gradient(-20deg, #0E3759, #30759D);">
                                        <span class="fw-bold" style="font-size: 0.7rem; color: #ededed;"><span style="font-size: 0.6rem;">No.</span> <span class="collectionDetailLogPk">48</span></span>
                                    </div>
                                </div>
                            </div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: linear-gradient(-45deg, #AFADA7, #E0DBC1); top: 5%; left: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #AFADA7; top: 5%; right: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #AFADA7; bottom: 5%; left: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #AFADA7; bottom: 5%; right: 5%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="collectionDetailCardRareWrapper col mt-2 px-2">
                <div class="row">
                    <div class="col">
                        <div class="collectionDetailCardFilter d-flex justify-content-center align-items-center" style="position: relative; width: 100%; aspect-ratio: 1/1; border-radius: 3%; background: #808080;">
                            <div class="d-flex justify-content-center align-items-center" style="width: 83%; aspect-ratio: 1/1; border-radius: 30%; background: #808080; z-index: 1;">
                                <div class="d-flex justify-content-center align-items-center" style="position: absolute; width: 85%; aspect-ratio: 1/1; border-radius: 50%; background: linear-gradient(-45deg, #AFADA7, #E0DBC1);">
                                    <div class="d-flex justify-content-center align-items-center" style="width: 90%; aspect-ratio: 1/1; border-radius: 50%; background: linear-gradient(-20deg, #4E1E1A, #873028);">
                                        <span class="fw-bold" style="font-size: 0.7rem; color: #ededed;"><span style="font-size: 0.6rem;">No.</span> <span class="collectionDetailLogPk">48</span></span>
                                    </div>
                                </div>
                            </div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: linear-gradient(-45deg, #AFADA7, #E0DBC1); top: 5%; left: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #AFADA7; top: 5%; right: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #AFADA7; bottom: 5%; left: 5%;"></div>
                            <div style="position: absolute; width: 35%; aspect-ratio: 1/1; border-radius: 8%; background: #AFADA7; bottom: 5%; right: 5%;"></div>
                        </div>
                    </div>
                </div>
            </div>

        </div>


        <div class="fixed-bottom" style="bottom: 4.5em; height: 5rem;">
            <div class="row">
                <div class="col">
                    <div id="actionButton" class="text-center d-grid align-items-center" style="position: relative;">
                        <div id="actionPaw" style="position: relative;">
                            <span id="pawIcon" class="material-symbols-rounded">
                                pets
                            </span>
        
                            <div id="claw1" class="commonStyle"></div>
                            <div id="claw2" class="commonStyle"></div>
                            <div id="claw3" class="commonStyle"></div>
                            <div id="claw4" class="commonStyle"></div>
                        </div>
                        
                        <input id="checkClaw" value="hide" hidden>
                        
                        <div onclick="marking()" id="markClaw" class="commonStyle text-center d-grid align-items-center">
                            <span class="material-symbols-rounded actionIcon">
                                where_to_vote
                            </span>
                        </div>
                        <div onclick="scanning()" id="scanClaw" class="commonStyle text-center d-grid align-items-center">
                            <span class="material-symbols-rounded actionIcon">
                                wifi_tethering
                            </span>
                        </div>
                        <div onclick="tracing()" id="traceClaw" class="commonStyle text-center d-grid align-items-center">
                            <span class="material-symbols-rounded actionIcon">
                                footprint
                            </span>
                        </div>
                        <div id="loveClaw" class="commonStyle text-center d-grid align-items-center">
                            <span class="material-symbols-rounded actionIcon">
                                favorite
                            </span>
                        </div>
                        <div onclick="toggleAction()" id="actionToggle" class="commonStyle"></div>
                    </div>
                    <div onclick="getMyLocation()" id="locationButton" class="text-center d-grid align-items-center float-end">
                        <span id="locationIcon" class="material-symbols-rounded">
                            my_location
                        </span>
                    </div>
                </div>
            </div>
        </div>



        <!-- #FDE4CD  #FFC98B -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    </body>
    
</html>